import{a as se,b as ce,c as pe,d as de,e as fe,f as ue,g as ge,h as he,i as _e,j as be,k as Ce}from"./chunk-OEQ5PFX2.js";import"./chunk-7IZTALVS.js";import{a as re,b as me,c as le}from"./chunk-5ZQMS33S.js";import{a as oe}from"./chunk-XKDRZ2FP.js";import{a as P}from"./chunk-CNUYDMNB.js";import{a as x}from"./chunk-QDRWFLAQ.js";import{b as te,g as ne,j as ae}from"./chunk-T3ODEV2J.js";import{A as Z,D as ee,f as K,k as Q,o as X}from"./chunk-DCGZQB77.js";import{a as y,c as ie}from"./chunk-IFDCXV3N.js";import{a as J}from"./chunk-PR2HLA7M.js";import{l as Y,p as q}from"./chunk-DYBUUYLF.js";import{$b as o,$c as z,E as D,Eb as n,Fb as i,Gb as v,Hb as g,Ib as h,Kb as F,Nb as C,Pb as w,Xc as N,Ya as m,Za as d,Zc as U,_c as $,aa as O,ac as _,bc as u,cd as V,dd as W,ec as B,f as T,fc as H,fd as G,gc as A,ic as M,ja as b,ka as R,mc as I,ob as p,oc as E,ra as k,sa as j,ub as c,zb as L}from"./chunk-KNMBK3NL.js";import"./chunk-JKOY2XUY.js";function ve(e,l){e&1&&(n(0,"mat-header-cell",15),o(1," Valor (R$) "),i())}function we(e,l){if(e&1&&(n(0,"mat-cell",16)(1,"strong"),o(2),I(3,"number"),i()()),e&2){let t=l.$implicit;m(2),u("R$ ",E(3,1,t.valor,"1.2-2"),"")}}function Ie(e,l){e&1&&(n(0,"mat-header-cell",15),o(1," Data "),i())}function Ee(e,l){if(e&1&&(n(0,"mat-cell",16),o(1),I(2,"date"),i()),e&2){let t=l.$implicit;m(),u(" ",E(2,1,t.data_pagamento,"dd/MM/yyyy")," ")}}function Te(e,l){e&1&&(n(0,"mat-header-cell"),o(1," Tipo de Pagamento"),i())}function De(e,l){e&1&&(n(0,"span"),o(1,"Cr\xE9dito"),i())}function Oe(e,l){e&1&&(n(0,"span"),o(1,"Pix"),i())}function Re(e,l){e&1&&(n(0,"span"),o(1,"Dinheiro"),i())}function ke(e,l){e&1&&(n(0,"span"),o(1,"Outro"),i())}function je(e,l){if(e&1&&(n(0,"mat-cell")(1,"span",17),p(2,De,2,0,"span",18)(3,Oe,2,0,"span",18)(4,Re,2,0,"span",18)(5,ke,2,0,"span",19),i()()),e&2){let t=l.$implicit;m(),c("ngSwitch",t.tipo_pagamento),m(),c("ngSwitchCase","C"),m(),c("ngSwitchCase","P"),m(),c("ngSwitchCase","D")}}function Le(e,l){e&1&&(n(0,"mat-header-cell",15),o(1," Plano "),i())}function Fe(e,l){if(e&1&&(n(0,"mat-cell",16),o(1),i()),e&2){let t=l.$implicit;m(),u(" ",t.plano_nome," ")}}function Be(e,l){e&1&&v(0,"mat-header-row",20)}function He(e,l){e&1&&v(0,"mat-row",21)}var S=(()=>{class e{dialogRef;httpMethods;data;memberInfo;payments=new Ce;displayedColumns=["valor","data_pagamento","tipo_pagamento","plano_nome"];urlPathPayments=x.PAYMENT;constructor(t,r,a){this.dialogRef=t,this.httpMethods=r,this.data=a,this.memberInfo=a?.memberInfo||{}}fechar(){this.dialogRef.close()}ngOnInit(){this.payments_seach()}payments_seach(){this.httpMethods.get(this.urlPathPayments+`?aluno=${this.memberInfo?.aluno?.id}&academia=${this.memberInfo?.plano?.academia}`).subscribe(t=>{this.payments=t})}static \u0275fac=function(r){return new(r||e)(d(re),d(P),d(me))};static \u0275cmp=b({type:e,selectors:[["app-member-payments"]],standalone:!0,features:[M],decls:27,vars:5,consts:[[1,"p-4"],[1,"flex","align-items-center","gap-2"],[1,"p-4","shadow-lg","rounded-lg",2,"background-color","#ededed","border-radius","2px"],[1,"text-gray-700","text-lg","font-semibold","border-b","pb-2"],[1,"mat-elevation-z1","w-full","mt-3",2,"background-color","#fafafa",3,"dataSource"],["matColumnDef","valor"],["class","text-gray-600 font-medium",4,"matHeaderCellDef"],["class","py-3 px-2",4,"matCellDef"],["matColumnDef","data_pagamento"],["matColumnDef","tipo_pagamento"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","plano_nome"],["class","bg-gray-100",4,"matHeaderRowDef"],["class","hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],[1,"text-gray-600","font-medium"],[1,"py-3","px-2"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"bg-gray-100"],[1,"hover:bg-gray-50"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"div")(2,"h3",1)(3,"mat-icon"),o(4,"credit_card"),i(),o(5),i(),n(6,"p"),o(7),i()(),n(8,"mat-card",2)(9,"h1",3),o(10," Hist\xF3rico de Pagamentos "),i(),n(11,"mat-table",4),g(12,5),p(13,ve,2,0,"mat-header-cell",6)(14,we,4,4,"mat-cell",7),h(),g(15,8),p(16,Ie,2,0,"mat-header-cell",6)(17,Ee,3,4,"mat-cell",7),h(),g(18,9),p(19,Te,2,0,"mat-header-cell",10)(20,je,6,4,"mat-cell",11),h(),g(21,12),p(22,Le,2,0,"mat-header-cell",6)(23,Fe,2,1,"mat-cell",7),h(),p(24,Be,1,0,"mat-header-row",13)(25,He,1,0,"mat-row",14),i()()(),o(26,`]
`)),r&2&&(m(5),u(" Pagamentos de ",a.memberInfo==null||a.memberInfo.aluno==null?null:a.memberInfo.aluno.nome," "),m(2),u("Email: ",a.memberInfo==null||a.memberInfo.aluno==null?null:a.memberInfo.aluno.email,""),m(4),c("dataSource",a.payments),m(13),c("matHeaderRowDef",a.displayedColumns),m(),c("matRowDefColumns",a.displayedColumns))},dependencies:[se,de,fe,pe,ue,_e,be,V,ce,he,ge,J,y,U,$,z,W],styles:[".mat-mdc-dialog-content[_ngcontent-%COMP%]{padding:20px}"]})}return e})();function Ae(e,l){e&1&&(n(0,"mat-card",9),o(1," Inativo "),i())}function Ne(e,l){e&1&&(n(0,"mat-card",10),o(1," Ativo "),i())}function Ue(e,l){if(e&1){let t=F();n(0,"mat-card",8),C("click",function(){let a=k(t).$implicit,s=w();return j(s.selectMember(a))}),n(1,"mat-card-content"),p(2,Ae,2,0,"mat-card",9)(3,Ne,2,0,"mat-card",10),n(4,"div",11)(5,"div",12),o(6),i(),n(7,"div",13)(8,"div",14),o(9),i(),n(10,"div",15),o(11),i()()(),n(12,"div",16)(13,"div",17)(14,"span"),o(15,"Plano recente:"),i(),n(16,"strong"),o(17),i()(),n(18,"div",17)(19,"span"),o(20,"Matr\xEDcula:"),i(),n(21,"strong"),o(22),i()()()(),n(23,"div",18)(24,"span",19),o(25,"Ver pagamentos"),i()()()}if(e&2){let t=l.$implicit,r=w();m(2),L(t.active?3:2),m(4),u(" ",r.getInitials(t.aluno.nome)," "),m(3),_(t.aluno.nome),m(2),_(t.aluno.email),m(6),_(t.plano.nome),m(5),_(t.aluno.matricula)}}var xe=(()=>{class e{httpMethods;router;snackBar;dialog;pathUrlMemberPlan=x.MEMBERPLAN;members;gym_id="";typeUser="";searchTerm="";limit=12;totalResults=0;currentPage=0;searchChanged=new T;constructor(t,r,a,s){this.httpMethods=t,this.router=r,this.snackBar=a,this.dialog=s}ngOnInit(){this.getIdGym(),this.search(),this.getTypeUser(),this.searchChanged.pipe(D(100)).subscribe(t=>{this.searchMember(t,0)})}getIdGym(){this.gym_id=localStorage.getItem("academia")}getTypeUser(){this.typeUser=localStorage.getItem("tipo_usuario")}search(){this.searchMember(this.searchTerm,0)}searchMember(t="",r=0,a=this.limit){let s={expand:["aluno","plano"],academia:this.gym_id,limit:a,offset:r};t&&(s.search=t),this.httpMethods.getPaginated(this.pathUrlMemberPlan,s).subscribe(f=>{this.members=f.results,this.totalResults=f.count,this.currentPage=r/a})}onPageChange(t){let r=t*this.limit;this.searchMember(this.searchTerm,r)}trackById(t,r){return r.aluno.id}getInitials(t){if(!t)return"";let a=t.trim().split(" ").map(s=>s.charAt(0).toUpperCase()).join("");return a.length>2?a.substring(0,2):a}selectMember(t){this.dialog.open(S,{width:"40rem",maxWidth:"none",data:{memberInfo:t}})}onSearchChange(t){this.searchTerm=t,this.searchChanged.next(t)}static \u0275fac=function(r){return new(r||e)(d(P),d(Y),d(ee),d(le))};static \u0275cmp=b({type:e,selectors:[["app-members-list"]],standalone:!0,features:[M],decls:12,vars:6,consts:[[1,"container"],[1,"title"],[1,"subtitle","flex","justify-content-center"],["appearance","outline",1,"search","w-30rem","flex","align-items-center"],["matInput","text","placeholder","Digite o nome ou matricula",3,"ngModelChange","input","ngModel"],[1,"member-list","ml-4"],["class","member-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"pageChange","totalItems","itemsPerPage","currentPage"],[1,"member-card",3,"click"],[1,"absolute","top-0","right-0","m-2","px-2","py-1","text-sm","shadow-1","rounded","text-white-alpha-90",2,"background-color","#d82d2d"],[1,"absolute","top-0","right-0","m-2","px-2","py-1","text-sm","shadow-1","rounded","text-white-alpha-90",2,"background-color","#2dd853"],[1,"member-info","flex","align-items-center"],[1,"avatar","align-items-center"],[1,"details","flex-column"],[1,"name"],[1,"email"],[1,"extra-info"],[1,"info-row"],[1,"footer","p-2","flex","justify-content-center"],[1,"ver-pagamentos"]],template:function(r,a){r&1&&(n(0,"div",0)(1,"h2",1),o(2,"Pagamentos por Aluno"),i(),n(3,"p",2),o(4,"Selecione um aluno para ver seu hist\xF3rico de pagamentos"),i(),n(5,"mat-form-field",3)(6,"mat-label"),o(7,"Buscar aluno"),i(),n(8,"input",4),A("ngModelChange",function(f){return H(a.searchTerm,f)||(a.searchTerm=f),f}),C("input",function(){return a.onSearchChange(a.searchTerm)}),i()(),n(9,"div",5),p(10,Ue,26,6,"mat-card",6),i(),n(11,"app-paginator",7),C("pageChange",function(f){return a.onPageChange(f)}),i()()),r&2&&(m(8),B("ngModel",a.searchTerm),m(2),c("ngForOf",a.members)("ngForTrackBy",a.trackById),m(),c("totalItems",a.totalResults)("itemsPerPage",a.limit)("currentPage",a.currentPage))},dependencies:[Z,K,Q,X,ne,ae,te,y,ie,N,oe],styles:[".title[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;font-size:1.5rem;color:#333}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#909090}.search[_ngcontent-%COMP%]{margin:auto}.member-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.member-card[_ngcontent-%COMP%]{width:95%;background:#f8f8f8;border-radius:12px;box-shadow:0 2px 4px #0000001a;transition:all .3s ease-in-out;cursor:pointer}.member-card[_ngcontent-%COMP%]:hover{transform:scale(1.06);box-shadow:0 4px 8px #00000026}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#53cd55;color:#fff;font-weight:700;font-size:16px;display:flex;align-items:center;justify-content:center;border-radius:50%;text-transform:uppercase}.member-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;line-height:1.2}.name[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#333;margin-bottom:2px}.email[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.extra-info[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid #eee}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.9rem;color:#444}.footer[_ngcontent-%COMP%]{background:#ededed;font-size:.9rem;color:#969696;border-top:1px solid #eee;border-radius:0 0 9px 9px}.member-card[_ngcontent-%COMP%]:hover   .footer[_ngcontent-%COMP%]{color:#fff;background-color:#53cd55}"]})}return e})();var ye=[{path:"membersListPayments",component:xe},{path:"memberPayments",component:S}];var ut=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=R({type:e});static \u0275inj=O({imports:[G,q.forChild(ye)]})}return e})();export{ut as PaymentsModule};
