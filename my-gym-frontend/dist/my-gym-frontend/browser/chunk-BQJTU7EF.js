import{a as oe,b as me}from"./chunk-VJJHH52D.js";import{a as P}from"./chunk-CQ6IIDQT.js";import{a as x}from"./chunk-RFQI5BNG.js";import{b as te,g as ne,j as ie,l as M}from"./chunk-ZVP2WZDK.js";import{A as X,G as Z,H as $,I as _,Y as ee,a as C,q,u as Q,v as Y,x as J,y as K}from"./chunk-KF24QTHE.js";import"./chunk-EJJBCPAK.js";import{a as y,c as v,e as re,f as ae}from"./chunk-2TN3GL7T.js";import{l as W,p as H}from"./chunk-V6KZPOXC.js";import{$ as R,$b as D,$c as V,Bb as n,Cb as i,Db as h,E as O,Hb as U,Kb as p,Mb as k,Sc as N,Xa as o,Ya as d,Yb as a,Zb as f,Zc as L,_b as u,ac as S,bc as w,cc as E,ec as b,f as T,ia as g,ic as z,ja as j,jc as A,nb as G,qa as F,ra as B,sb as c}from"./chunk-BE5RT4AU.js";import"./chunk-JKOY2XUY.js";var I=(()=>{class m{formBuilder;httpMethods;router;snackBar;memberPlan;gymId="";formGroup;pathUrlFrequncy=M.FREQUENCY;currentTime="";getGym(){this.gymId=localStorage.getItem("academia"),this.gymId&&this.formGroup.patchValue({academia:this.gymId})}constructor(t,r,e,l){this.formBuilder=t,this.httpMethods=r,this.router=e,this.snackBar=l,this.updateTime(),this.formGroup=this.formBuilder.group({aluno:[""],academia:[this.gymId]})}ngOnInit(){this.getGym()}getInitials(t){if(!t)return"";let e=t.trim().split(" ").map(l=>l.charAt(0).toUpperCase()).join("");return e.length>2?e.substring(0,2):e}updateTime(){setInterval(()=>{let t=new Date;this.currentTime=t.toLocaleString()},1e3)}confirm(){this.formGroup.patchValue({aluno:this.memberPlan?.aluno.id}),this.httpMethods.post(this.pathUrlFrequncy,this.formGroup.value).subscribe(t=>{console.log(t);let r="check-in realizado com sucesso.";this.router.navigate(["check-in/register"]),this.snackBar.open(r,"fechar",{duration:5e3,verticalPosition:"top"})},t=>{console.error("Erro ao fazer check-in",t)})}static \u0275fac=function(r){return new(r||m)(d(Z),d(P),d(W),d(ee))};static \u0275cmp=g({type:m,selectors:[["app-check-in-confirm"]],inputs:{memberPlan:[0,"member","memberPlan"]},standalone:!0,features:[b],decls:28,vars:5,consts:[["xmlns","http://www.w3.org/1999/html",1,"flex","align-items-center","justify-content-center","p-5"],["appearance","raised",1,"p-4","w-6","h-10","flex","align-content-start"],[1,"flex","flex-column","shadow-log"],[1,"text-xl","mb-1","font-bold"],[1,"text-sm","text-500","mb-3"],[1,"flex","align-items-center","gap-3"],[1,"avatar","align-items-center"],[1,"text-lg","font-bold"],[1,"text-sm","text-gray"],[1,"flex","align-items-start","justify-content-start","mt-3","text-sm"],[3,"formGroup"],["mat-button","",1,"w-full","bg-black-alpha-90","text-white-alpha-90","border-round",3,"click"]],template:function(r,e){r&1&&(n(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"div",2)(4,"span",3),a(5," Confirmar Check-in "),i(),n(6,"span",4),a(7," Confirme as informacoes do aluno "),i()()(),n(8,"mat-card-content")(9,"div",5)(10,"div")(11,"div",6),a(12),i()(),n(13,"div")(14,"span",7),a(15),i(),h(16,"br"),n(17,"span",8),a(18),i()()(),n(19,"div",9)(20,"mat-icon"),a(21,"schedule"),i(),n(22,"span"),a(23),i()()(),n(24,"form",10)(25,"mat-card-actions")(26,"button",11),p("click",function(){return e.confirm()}),a(27,"Confirmar"),i()()()()()),r&2&&(o(12),u(" ",e.getInitials((e.memberPlan==null||e.memberPlan.aluno==null?null:e.memberPlan.aluno.nome)||"")," "),o(3),u(" ",e.memberPlan==null||e.memberPlan.aluno==null?null:e.memberPlan.aluno.nome,""),o(3),u(" ",e.memberPlan==null||e.memberPlan.aluno==null?null:e.memberPlan.aluno.email,""),o(5),u(" Data e Hora: ",e.currentTime,""),o(),c("formGroup",e.formGroup))},dependencies:[C,y,re,v,_,K,Y,X,x,ae],styles:[".avatar[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#53cd55;color:#fff;font-weight:700;font-size:16px;display:flex;align-items:center;justify-content:center;border-radius:50%;text-transform:uppercase}"]})}return m})();function fe(m,de){if(m&1){let t=U();n(0,"mat-card",13),p("click",function(){let e=F(t).$implicit,l=k();return B(l.makePayment(e))}),n(1,"mat-card-content")(2,"div",14)(3,"div",15),a(4),i(),n(5,"div",16)(6,"div",17),a(7),i(),n(8,"div",18),a(9),i()()(),n(10,"div",19)(11,"div",20)(12,"span"),a(13,"Plano Atual:"),i(),n(14,"strong"),a(15),i()(),n(16,"div",20)(17,"span"),a(18,"Matr\xEDcula:"),i(),n(19,"strong"),a(20),i()()()(),n(21,"div",21)(22,"mat-icon"),a(23,"how_to_reg"),i(),n(24,"span",22),a(25,"Registrar Check-in"),i()()()}if(m&2){let t=de.$implicit,r=k();o(4),u(" ",r.getInitials(t.aluno.nome)," "),o(3),f(t.aluno.nome),o(2),f(t.aluno.email),o(6),f(t.plano.nome),o(5),f(t.aluno.matricula)}}var se=(()=>{class m{httpMethods;obj=void 0;pathUrlMemberPlan=M.MEMBERPLAN;membersPlan;gym_id="";typeUser="";searchTerm="";currentPage=0;limit=30;totalResults=0;selectedIndex=0;searchChanged=new T;constructor(t){this.httpMethods=t}ngOnInit(){this.getIdGym(),this.getTypeUser(),this.search(),this.searchChanged.pipe(O(300)).subscribe(t=>{this.searchMember(t,0)})}getIdGym(){this.gym_id=localStorage.getItem("academia")}getTypeUser(){this.typeUser=localStorage.getItem("tipo_usuario")}search(){this.searchMember(this.searchTerm,0)}searchMember(t="",r=0,e=this.limit){let l={expand:["aluno","plano"],active:!0,academia:this.gym_id,limit:e,offset:r};t&&(l.search=t),this.httpMethods.getPaginated(this.pathUrlMemberPlan,l).subscribe(s=>{this.membersPlan=s.results,this.totalResults=s.count,this.currentPage=r/e})}nextPage(){let t=Math.ceil(this.totalResults/this.limit)-1;if(this.currentPage<t){let r=(this.currentPage+1)*this.limit;this.searchMember(this.searchTerm,r)}}prevPage(){if(this.currentPage>0){let t=(this.currentPage-1)*this.limit;this.searchMember(this.searchTerm,t)}}trackById(t,r){return r.aluno.id}makePayment(t){this.obj=t,this.selectedIndex=1}getInitials(t){if(!t)return"";let e=t.trim().split(" ").map(l=>l.charAt(0).toUpperCase()).join("");return e.length>2?e.substring(0,2):e}onSearchChange(t){this.searchTerm=t,this.searchChanged.next(t)}static \u0275fac=function(r){return new(r||m)(d(P))};static \u0275cmp=g({type:m,selectors:[["app-check-in-registration"]],standalone:!0,features:[b],decls:23,vars:13,consts:[[1,"title"],[1,"subtitle","flex","justify-content-center"],[3,"selectedIndexChange","selectedIndex"],["label","Sele\xE7\xE3o Aluno"],[1,"flex","align-items-center","justify-content-center"],["appearance","outline",1,"search","w-30rem"],["matInput","text","placeholder","Digite o nome ou matr\xEDcula",3,"ngModelChange","input","ngModel"],[1,"member-list","p-3","gap-2","ml-4"],["class","member-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"pagination","flex","justify-content-center","gap-2"],["mat-raised-button","",3,"click","disabled"],["label","Confirma\xE7\xE3o",3,"disabled"],[3,"member"],[1,"member-card",3,"click"],[1,"member-info","flex","align-items-center"],[1,"avatar","align-items-center"],[1,"details","flex-column"],[1,"name"],[1,"email"],[1,"extra-info"],[1,"info-row"],[1,"footer","p-2","flex","justify-content-center"],[1,"Realizar","check-in"]],template:function(r,e){r&1&&(n(0,"h2",0),a(1,"Check-in"),i(),n(2,"div",1),a(3,"Registre a entrada de alunos no estabelecimento"),i(),n(4,"mat-tab-group",2),E("selectedIndexChange",function(s){return w(e.selectedIndex,s)||(e.selectedIndex=s),s}),n(5,"mat-tab",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),a(9,"Busca Aluno"),i(),n(10,"input",6),E("ngModelChange",function(s){return w(e.searchTerm,s)||(e.searchTerm=s),s}),p("input",function(){return e.onSearchChange(e.searchTerm)}),i()()(),n(11,"div",7),G(12,fe,26,5,"mat-card",8),i(),n(13,"div",9)(14,"button",10),p("click",function(){return e.prevPage()}),a(15,"Anterior"),i(),n(16,"span"),a(17),z(18,"number"),i(),n(19,"button",10),p("click",function(){return e.nextPage()}),a(20,"Pr\xF3xima"),i()()(),n(21,"mat-tab",11),h(22,"app-check-in-confirm",12),i()()),r&2&&(o(4),S("selectedIndex",e.selectedIndex),o(6),S("ngModel",e.searchTerm),o(2),c("ngForOf",e.membersPlan)("ngForTrackBy",e.trackById),o(2),c("disabled",e.currentPage===0),o(3),D("P\xE1gina ",e.currentPage+1," de ",A(18,10,e.totalResults/e.limit,"1.0-0"),""),o(2),c("disabled",e.currentPage>=e.totalResults/e.limit-1),o(2),c("disabled",!e.obj),o(),c("member",e.obj))},dependencies:[y,v,ne,ie,te,oe,me,_,q,Q,$,J,I,N,x,C,L],styles:[".title[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;font-size:1.5rem;color:#333}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#909090}.search[_ngcontent-%COMP%]{margin-top:16px}.member-card[_ngcontent-%COMP%]{width:95%;background:#f8f8f8;border-radius:12px;box-shadow:0 2px 4px #0000001a;transition:all .3s ease-in-out;cursor:pointer}.member-card[_ngcontent-%COMP%]:hover{transform:scale(1.06);box-shadow:0 4px 8px #00000026}.member-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#53cd55;color:#fff;font-weight:700;font-size:16px;display:flex;align-items:center;justify-content:center;border-radius:50%;text-transform:uppercase}.member-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;line-height:1.2}.name[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#333;margin-bottom:2px}.email[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.extra-info[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid #eee}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.9rem;color:#444}.footer[_ngcontent-%COMP%]{background:#ededed;font-size:.9rem;color:#969696;border-top:1px solid #eee;border-radius:0 0 9px 9px}.member-card[_ngcontent-%COMP%]:hover   .footer[_ngcontent-%COMP%]{color:#fff;background-color:#53cd55}.mat-tab-group[_ngcontent-%COMP%]{padding-top:16px}h2[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;text-align:center;font-family:Arial,Helvetica,sans-serif}mat-tab-group[_ngcontent-%COMP%]{padding-left:1%;width:98%}"]})}return m})();var ce=[{path:"confirm",component:I},{path:"register",component:se}];var Ne=(()=>{class m{static \u0275fac=function(r){return new(r||m)};static \u0275mod=j({type:m});static \u0275inj=R({imports:[V,H.forChild(ce)]})}return m})();export{Ne as CheckInModule};
