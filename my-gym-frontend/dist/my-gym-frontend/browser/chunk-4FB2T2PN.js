import{a as Oe}from"./chunk-T2GD2P46.js";import{a as xe,b as be}from"./chunk-5MJIV347.js";import{a as Te}from"./chunk-6BTINF4T.js";import{a as we,b as Pe,c as Fe,e as Ie,f as ke,g as De}from"./chunk-DUHGU6EU.js";import{a as B}from"./chunk-CQ6IIDQT.js";import{a as M,b as oe}from"./chunk-RFQI5BNG.js";import{b as Ce,c as Ee,g as Se,j as ye,l as O}from"./chunk-ZVP2WZDK.js";import{A as ce,B as se,C as pe,D as ue,E as fe,F as he,G as _e,I as ge,Y as ve,a as y,q as re,s as h,u as ae,v as le,y as me,z as de}from"./chunk-KF24QTHE.js";import"./chunk-EJJBCPAK.js";import{a as T,c as N,g as Me}from"./chunk-2TN3GL7T.js";import{j as te,l as D,ma as ne,p as ie}from"./chunk-V6KZPOXC.js";import{$ as W,$b as k,$c as ee,Ab as P,Bb as t,Cb as e,Db as g,Hb as I,Kb as u,Mb as C,Sc as Y,Xa as l,Ya as c,Yb as n,Zb as E,Zc as Z,_b as f,ec as S,ia as x,ic as K,ja as J,jc as X,nb as _,qa as b,ra as v,sb as s,xb as p,yb as F,zb as w}from"./chunk-BE5RT4AU.js";import{a as H,b as Q}from"./chunk-JKOY2XUY.js";function Ae(o,d){if(o&1&&(t(0,"li",10)(1,"mat-icon",17),n(2,"check_circle"),e(),n(3),e()),o&2){let r=d.$implicit;l(3),f(" ",r," ")}}function Re(o,d){o&1&&n(0,"Mes")}function Ve(o,d){o&1&&n(0," Meses ")}var Ne=(()=>{class o{dialogRef;plan;constructor(r,a){this.dialogRef=r,this.plan=a}close(){this.dialogRef.close()}static \u0275fac=function(a){return new(a||o)(c(we),c(Pe))};static \u0275cmp=x({type:o,selectors:[["app-plan-detail"]],standalone:!0,features:[S],decls:37,vars:7,consts:[["mat-dialog-title","",1,"dialog-title","text-center"],[1,"dialog-content","p-4"],[1,"plan-card","p-3"],[1,"flex","flex-column","gap-3"],[1,"flex","align-items-center","justify-content-between"],[1,"text-2xl","font-bold"],[1,"text-2xl","text-green-500"],[1,"text-gray-700","text-sm","mb-2","overflow-hidden","text-overflow-ellipsis","line-clamp-3"],[1,"text-lg","font-bold"],[1,"pl-3","line-clamp-5","overflow-hidden"],[1,"text-sm","flex","align-items-center"],[1,"flex","flex-column","gap-2"],[1,"flex","justify-content-between","text-sm","font-medium"],[1,"text-primary","font-bold"],[1,"text-sm"],[1,"dialog-actions","flex","justify-content-center","p-3"],["mat-stroked-button","",1,"close-button","w-full",3,"click"],[1,"text-green-500","mr-2"]],template:function(a,i){a&1&&(t(0,"main")(1,"h2",0),n(2,"Detalhes do Plano"),e(),t(3,"mat-dialog-content",1)(4,"mat-card",2)(5,"mat-card-content",3)(6,"div",4)(7,"div",5),n(8),e(),t(9,"div",6),n(10),e()(),t(11,"div",7),n(12),e(),t(13,"div")(14,"div",8),n(15,"Benef\xEDcios:"),e(),t(16,"ul",9),w(17,Ae,4,1,"li",10,F),e()(),t(19,"div",11)(20,"div",12)(21,"div"),n(22,"Dura\xE7\xE3o:"),e(),t(23,"div",13),n(24),_(25,Re,1,0)(26,Ve,1,0),e()(),t(27,"div",12)(28,"div"),n(29,"Dias dispon\xEDveis:"),e(),t(30,"div",14),n(31),e()()()()()(),t(32,"mat-dialog-actions",15)(33,"button",16),u("click",function(){return i.close()}),t(34,"mat-icon"),n(35,"close"),e(),n(36," Fechar "),e()()()),a&2&&(l(8),E(i.plan.nome),l(2),k("R$ ",i.plan.preco," / ",i.plan.duracao,"Meses"),l(2),f(" ",i.plan.descricao," "),l(5),P(i.plan.beneficios),l(7),f("",i.plan.duracao," "),l(),p(i.plan.duracao>1?25:26),l(6),f(" ",i.plan.dias_permitidos_str,""))},dependencies:[ke,De,Ie,y,M,N,T],styles:[".dialog-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#333}.dialog-content[_ngcontent-%COMP%]{max-width:850px;min-width:650px}.text-green-500[_ngcontent-%COMP%]{color:#0f9d58}.text-primary[_ngcontent-%COMP%]{color:#007bff}.dialog-actions[_ngcontent-%COMP%]{border-top:1px solid #ddd}.close-button[_ngcontent-%COMP%]{color:#d32f2f;font-weight:700}[_nghost-%COMP%]{overflow-x:hidden}main[_ngcontent-%COMP%]{overflow-x:hidden}"]})}return o})();var qe=(o,d)=>d.id;function ze(o,d){if(o&1&&(t(0,"li",17),n(1),e()),o&2){let r=d.$implicit;l(),f(" ",r,"")}}function He(o,d){if(o&1){let r=I();t(0,"mat-card",6)(1,"mat-card-content",9)(2,"div",10)(3,"div",11)(4,"div",12),n(5),e(),t(6,"div",13),n(7),e()(),t(8,"div",14),n(9),e(),t(10,"div",15),n(11,"Benef\xEDcios:"),e(),t(12,"ul",16),w(13,ze,2,1,"li",17,F),e()()(),t(15,"mat-card",18)(16,"div",19)(17,"div"),n(18,"Dura\xE7\xE3o:"),e(),t(19,"div",20),n(20),e()(),t(21,"div",19)(22,"div"),n(23,"Dias dispon\xEDveis:"),e(),t(24,"div",17),n(25),e()()(),t(26,"div",21)(27,"button",22),u("click",function(){let i=b(r).$implicit,m=C();return v(m.edit(i))}),t(28,"mat-icon"),n(29,"edit_square"),e(),n(30," Editar "),e(),t(31,"button",23),u("click",function(){let i=b(r).$implicit,m=C();return v(m.disable(i))}),t(32,"mat-icon"),n(33,"delete"),e(),n(34," Excluir "),e()(),t(35,"button",24),u("click",function(){let i=b(r).$implicit,m=C();return v(m.viewDetail(i))}),t(36,"mat-icon"),n(37,"info"),e(),n(38," Ver Detalhes "),e()()}if(o&2){let r=d.$implicit;l(5),E(r.nome),l(2),f("R$ ",r.preco,""),l(2),f(" ",r.descricao," "),l(4),P(r.beneficios),l(7),f("",r.duracao," meses"),l(5),f(" ",r.dias_permitidos_str,"")}}var Be=(()=>{class o{httpMethods;router;snackBar;dialog;pathUrlPlan=O.PLAN;plans;gym_id="";typeUser="";limit=3;totalResults=0;currentPage=0;getIdGym(){this.gym_id=localStorage.getItem("academia")}constructor(r,a,i,m){this.httpMethods=r,this.router=a,this.snackBar=i,this.dialog=m}ngOnInit(){this.getIdGym(),this.search(),this.getTypeUser()}getTypeUser(){this.typeUser=localStorage.getItem("tipo_usuario")}search(r=0,a=this.limit){let i={academia:this.gym_id,active:!0,limit:a,offset:r};this.httpMethods.getPaginated(this.pathUrlPlan,i).subscribe(m=>{m.results.length<=0&&this.snackBar.open("N\xE3o h\xE1 planos ativos cadastrados!","fechar",{duration:2e3,verticalPosition:"top"}),this.plans=m.results,this.totalResults=m.count,this.currentPage=r/a})}nextPage(){let r=Math.ceil(this.totalResults/this.limit)-1;if(this.currentPage<r){let a=(this.currentPage+1)*this.limit;this.search(a)}}prevPage(){if(this.currentPage>0){let r=(this.currentPage-1)*this.limit;this.search(r)}}create(){this.router.navigate(["/plan/form/create"]).then()}edit(r){this.router.navigate([`/plan/form/${r.id}`]).then()}viewDetail(r){this.dialog.open(Ne,{width:"40rem",maxWidth:"none",data:r})}disable(r){this.dialog.open(Te).afterClosed().subscribe(i=>{i&&this.httpMethods.disable(this.pathUrlPlan,r,"desativar").subscribe(()=>{this.search(),this.snackBar.open("Plano desativado","Fechar",{duration:5e3,verticalPosition:"top"})})})}static \u0275fac=function(a){return new(a||o)(c(B),c(D),c(ve),c(Fe))};static \u0275cmp=x({type:o,selectors:[["app-list"]],standalone:!0,features:[S],decls:21,vars:8,consts:[[1,"container"],["mat-subheader",""],[1,"subtitle","flex","justify-content-center"],[1,"flex","justify-content-end"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","mr-3",2,"color","white",3,"click","disabled"],[1,"flex","flex-wrap","justify-content-center","gap-3","p-2"],[1,"plan-card","w-30rem","p-3","flex","flex-column","justify-content-between"],[1,"pagination","flex","justify-content-center","gap-2","mt-5"],["mat-raised-button","",3,"click","disabled"],[1,"flex-grow-1"],[1,"flex","flex-column","gap-2"],[1,"flex","align-items-center","justify-content-between"],[1,"text-2xl","font-bold"],[1,"text-2xl","font-bold","text-green-500"],[1,"line-clamp-3","text-gray-700","text-sm","mb-2","overflow-hidden","text-overflow-ellipsis","line-clamp-3"],[1,"text-lg","font-bold","overflow-hidden","text-overflow-ellipsis"],[1,"pl-3","line-clamp-5","overflow-hidden"],[1,"text-sm"],["appearance","outlined",1,"p-3"],[1,"flex","justify-content-between","text-sm","font-medium"],[1,"text-primary","font-bold"],[1,"plan-actions","flex","justify-content-between","mt-auto","p-3"],["mat-stroked-button","",1,"edit-button",3,"click"],["mat-stroked-button","",1,"delete-button",3,"click"],["mat-stroked-button","",1,"view-details-button","mt-2","w-full",3,"click"]],template:function(a,i){a&1&&(t(0,"div",0)(1,"h2",1),n(2,"Planos"),e(),t(3,"p",2),n(4,"Crie e edite os planos fornecidos pela academia"),e(),t(5,"div",3)(6,"button",4),u("click",function(){return i.create()}),t(7,"mat-icon"),n(8,"add"),e(),n(9," Novo Plano "),e()(),t(10,"div",5),w(11,He,39,5,"mat-card",6,qe),e(),t(13,"div",7)(14,"button",8),u("click",function(){return i.prevPage()}),n(15,"Anterior"),e(),t(16,"span"),n(17),K(18,"number"),e(),t(19,"button",8),u("click",function(){return i.nextPage()}),n(20,"Pr\xF3xima"),e()()()),a&2&&(l(6),s("disabled",i.typeUser=="A"),l(5),P(i.plans),l(3),s("disabled",i.currentPage===0),l(3),k("P\xE1gina ",i.currentPage+1," de ",X(18,5,i.totalResults/i.limit,"1.0-0"),""),l(2),s("disabled",i.currentPage>=i.totalResults/i.limit-1))},dependencies:[oe,M,y,be,xe,Me,T,N,Z],styles:[".plan-card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 8px #0000001a;padding:1.5rem;width:30rem;min-height:30rem}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#909090}.edit-button[_ngcontent-%COMP%]{color:#4768ff;border-radius:5px}.delete-button[_ngcontent-%COMP%]{color:#ff4747;border-radius:5px}.line-clamp-5[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}"]})}return o})();function Qe(o,d){o&1&&(t(0,"mat-error"),n(1," Campo Obrigatorio "),e())}function We(o,d){o&1&&(t(0,"mat-error"),n(1," Nome tem limite de 20 caracteres "),e())}function Je(o,d){o&1&&(t(0,"mat-error"),n(1," Campo Obrigat\xF3rio "),e())}function Ke(o,d){o&1&&(t(0,"mat-error"),n(1," Pre\xE7o inv\xE1lido (deve ser um n\xFAmero com at\xE9 2 casas decimais) "),e())}function Xe(o,d){o&1&&(t(0,"mat-error"),n(1," Campo Obrigat\xF3rio "),e())}function Ye(o,d){o&1&&(t(0,"mat-error"),n(1," Campo Obrigat\xF3rio "),e())}function Ze(o,d){o&1&&(t(0,"mat-error"),n(1," Campo Obrigat\xF3rio "),e())}function et(o,d){o&1&&(t(0,"mat-error"),n(1," limite de 120 caracteres "),e())}function tt(o,d){if(o&1&&(t(0,"mat-option",18),n(1),e()),o&2){let r=d.$implicit;s("value",r.valor),l(),f(" ",r.label," ")}}function it(o,d){o&1&&(t(0,"mat-error"),n(1," O desconto n\xE3o pode ser negativo. "),e())}function nt(o,d){o&1&&(t(0,"mat-error"),n(1," O desconto n\xE3o pode ser maior que 100%. "),e())}function ot(o,d){if(o&1){let r=I();t(0,"div",19)(1,"div",20)(2,"mat-form-field",21),g(3,"input",22),e(),t(4,"mat-icon",23),u("click",function(){let i=b(r).index,m=C();return v(m.removeBeneficio(i))}),n(5," backspace "),e()()()}if(o&2){let r=d.index;s("formGroupName",r)}}var Ge=(()=>{class o{httpMethods;formBuilder;router;route;action="";pathUrlPlan=O.PLAN;formGroup;created=!0;gymId="";title="Cria\xE7\xE3o de Plano";diasSemana=[{label:"Domingo",valor:1},{label:"Segunda",valor:2},{label:"Ter\xE7a",valor:3},{label:"Quarta",valor:4},{label:"Quinta",valor:5},{label:"Sexta",valor:6},{label:"S\xE1bado",valor:7}];constructor(r,a,i,m){this.httpMethods=r,this.formBuilder=a,this.router=i,this.route=m,this.formGroup=this.formBuilder.group({id:[],nome:["",[h.required,h.maxLength(20)]],preco:["",[h.required,h.pattern("^[0-9]+(.[0-9]{1,2})?$")]],duracao:["",h.required],descricao:["",[h.required,h.maxLength(250)]],beneficios:this.formBuilder.array([]),desconto:[0,[h.min(0),h.max(100)]],dias_permitidos:[[]],academia:[""]})}get benefits(){return this.formGroup.get("beneficios")}addBeneficio(){let r=this.formBuilder.group({beneficio:["",[h.maxLength(50)]]});this.benefits.push(r)}removeBeneficio(r){this.benefits.removeAt(r)}ngOnInit(){this.getPlan(),this.retriveCallBack()}getPlan(){this.gymId=localStorage.getItem("academia"),this.gymId&&this.formGroup.patchValue({academia:this.gymId})}retriveCallBack(){this.route.paramMap.subscribe(r=>{this.action=r.get("action"),this.created=!(this.action&&this.action!=="create"),this.created||(this.title="Edi\xE7\xE3o de Plano",this.httpMethods.get(`${this.pathUrlPlan}${this.action}/`).subscribe(a=>{this.benefits.clear(),Array.isArray(a.beneficios)?a.beneficios.forEach(i=>{this.benefits.push(this.formBuilder.group({beneficio:[i,[h.maxLength(50)]]}))}):console.warn("Benef\xEDcios recebidos n\xE3o s\xE3o um array:",a.beneficios),this.formGroup.patchValue({id:a.id,nome:a.nome,preco:a.preco,duracao:a.duracao,descricao:a.descricao,desconto:a.desconto,academia:this.gymId,dias_permitidos:Array.isArray(a.dias_permitidos)?a.dias_permitidos.map(Number):[]})}))})}saveOrUpdate(r){r.beneficios=this.benefits.value.map(i=>i.beneficio).filter(i=>i.trim()!=="");let a=Q(H({},r),{academia:Number(this.gymId),preco:parseFloat(r.preco.toString()),desconto:parseFloat(r.desconto.toString()),dias_permitidos:r.dias_permitidos?.map(Number)});this.created?this.httpMethods.post(this.pathUrlPlan,a).subscribe(()=>{this.router.navigate(["/plan/list"]).then()}):this.httpMethods.patch(`${this.pathUrlPlan}`,a).subscribe(()=>{this.router.navigate(["/plan/list"]).then()})}static \u0275fac=function(a){return new(a||o)(c(B),c(_e),c(D),c(te))};static \u0275cmp=x({type:o,selectors:[["app-form"]],standalone:!0,features:[S],decls:49,vars:18,consts:[[1,"container","p-3"],[1,"mat-elevation-z2","form",3,"ngSubmit","formGroup"],["appearance","fill",1,"nome"],["matInput","","formControlName","nome","placeholder","Digite o nome do plano"],[1,"flex","align-items-center","justify-content-between","gap-2"],["appearance","fill",2,"width","50%"],["matInput","","type","number","formControlName","preco","placeholder","Digite o pre\xE7o"],["matInput","","type","number","formControlName","duracao","placeholder","Dura\xE7\xE3o em meses",3,"min"],["appearance","fill"],["matInput","","formControlName","descricao","placeholder","Digite uma descri\xE7\xE3o","rows","4"],["formControlName","dias_permitidos","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","desconto","placeholder","Digite o desconto",3,"min","max"],[1,"flex","justify-content-between"],["type","button","mat-button","",2,"width","20%",3,"click"],["formArrayName","beneficios"],[3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",1,"save",3,"disabled"],[3,"value"],[3,"formGroupName"],[1,"flex","align-items-center","justify-content-between","flex-wrap"],["appearance","outline",2,"width","50%","margin-bottom","1px"],["matInput","","formControlName","beneficio","placeholder",""],["aria-label","Remover benef\xEDcio",2,"color","red","cursor","pointer",3,"click"]],template:function(a,i){if(a&1&&(t(0,"div",0)(1,"form",1),u("ngSubmit",function(){return i.saveOrUpdate(i.formGroup.value)}),t(2,"h2"),n(3),e(),t(4,"mat-form-field",2)(5,"mat-label"),n(6,"Nome"),e(),g(7,"input",3),_(8,Qe,2,0,"mat-error")(9,We,2,0,"mat-error"),e(),t(10,"div",4)(11,"mat-form-field",5)(12,"mat-label"),n(13,"Pre\xE7o"),e(),g(14,"input",6),_(15,Je,2,0,"mat-error")(16,Ke,2,0,"mat-error"),e(),t(17,"mat-form-field",5)(18,"mat-label"),n(19," Dura\xE7\xE3o "),e(),g(20,"input",7),_(21,Xe,2,0,"mat-error")(22,Ye,2,0,"mat-error"),e()(),t(23,"mat-form-field",8)(24,"mat-label"),n(25,"Descri\xE7\xE3o"),e(),g(26,"textarea",9),_(27,Ze,2,0,"mat-error")(28,et,2,0,"mat-error"),e(),t(29,"mat-form-field",8)(30,"mat-label"),n(31,"Dias Permitidos"),e(),t(32,"mat-select",10),_(33,tt,2,2,"mat-option",11),e()(),t(34,"mat-form-field",8)(35,"mat-label"),n(36,"Desconto em prudutos (%)"),e(),g(37,"input",12),_(38,it,2,0,"mat-error")(39,nt,2,0,"mat-error"),e(),t(40,"div",13)(41,"h3"),n(42,"Beneficios"),e(),t(43,"button",14),u("click",function(){return i.addBeneficio()}),n(44,"Adicionar Benef\xEDcio"),e()(),t(45,"div",15),_(46,ot,6,1,"div",16),e(),t(47,"button",17),n(48,"Salvar"),e()()()),a&2){let m,G,L,A,R,V,U,$,q,z;l(),s("formGroup",i.formGroup),l(2),E(i.title),l(5),p((m=i.formGroup.get("nome"))!=null&&m.hasError("required")?8:-1),l(),p((G=i.formGroup.get("nome"))!=null&&G.hasError("maxlength")?9:-1),l(6),p((L=i.formGroup.get("preco"))!=null&&L.hasError("required")?15:-1),l(),p((A=i.formGroup.get("preco"))!=null&&A.hasError("pattern")?16:-1),l(4),s("min",1),l(),p((R=i.formGroup.get("duracao"))!=null&&R.hasError("required")?21:-1),l(),p((V=i.formGroup.get("duracao"))!=null&&V.hasError("required")?22:-1),l(5),p((U=i.formGroup.get("descricao"))!=null&&U.hasError("required")?27:-1),l(),p(($=i.formGroup.get("descricao"))!=null&&$.hasError("maxlength")?28:-1),l(5),s("ngForOf",i.diasSemana),l(4),s("min",0)("max",100),l(),p((q=i.formGroup.get("desconto"))!=null&&q.hasError("min")?38:-1),l(),p((z=i.formGroup.get("desconto"))!=null&&z.hasError("max")?39:-1),l(7),s("ngForOf",i.benefits.controls),l(),s("disabled",!i.formGroup.valid)}},dependencies:[ge,me,re,de,ae,le,he,fe,ce,ue,se,pe,Y,Ce,Ee,y,Se,ye,M,Oe,ne],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.form[_ngcontent-%COMP%]{width:100%;max-width:800px;padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-label[_ngcontent-%COMP%]{font-weight:700;color:#333}input[_ngcontent-%COMP%]{font-size:16px}button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border:none;border-radius:4px;cursor:pointer}"]})}return o})();var je=[{path:"list",component:Be},{path:"form/:action",component:Ge}];var Rt=(()=>{class o{static \u0275fac=function(a){return new(a||o)};static \u0275mod=J({type:o});static \u0275inj=W({imports:[ee,ie.forChild(je)]})}return o})();export{Rt as EmployeeModule};
