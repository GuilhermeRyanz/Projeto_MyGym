import"./chunk-DOJ3H5UX.js";import{a as _e,b as be,c as Ce,d as xe,e as ve,f as ye}from"./chunk-LHVLC5TS.js";import{a as Se,b as Ie,d as Pe}from"./chunk-X4CE2ALT.js";import{a as q}from"./chunk-O4NCNYFU.js";import{a as E}from"./chunk-GWEJ6O57.js";import{a as Ee}from"./chunk-VIEVWMA7.js";import{b as G,c as fe,g as N,j as A,l as b}from"./chunk-CIJ5G4FK.js";import{D as U,F as _,H as O,I as me,K as le,L as se,N as de,O as ce,Q as pe,R as j,S as ue,b as v,d as oe,e as re,z as y}from"./chunk-3RHGMBTT.js";import"./chunk-EJJBCPAK.js";import{a as R,b as he,c as $,d as ge,e as V,f as Me}from"./chunk-UT2SQGIQ.js";import{i as ne,k as x,n as ae}from"./chunk-H2QP3XJO.js";import{Ab as C,Db as k,Gb as u,Ib as F,Ic as ie,Sb as r,Tb as te,Ua as m,Ub as p,Va as s,Vb as B,Wb as D,Xb as L,Z,Zb as M,ga as f,ha as ee,kb as P,l as X,oa as S,p as Y,pa as I,pb as h,ub as g,wb as T,xb as w,yb as o,zb as t}from"./chunk-KGKDVHTP.js";import"./chunk-JKOY2XUY.js";var Oe=(a,d)=>d.id;function je(a,d){if(a&1){let e=k();o(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title"),r(3),t(),o(4,"mat-card-subtitle"),r(5),t()(),o(6,"mat-card-content")(7,"div",3)(8,"div",4)(9,"div")(10,"strong"),r(11," Pre\xE7o:"),t(),r(12),t(),o(13,"div")(14,"strong"),r(15,"Dura\xE7\xE3o:"),t(),r(16),t()(),o(17,"p",5)(18,"strong"),r(19," Descri\xE7\xE3o: "),t(),r(20),t()()(),o(21,"mat-card-actions")(22,"mat-radio-button",6),u("click",function(){let n=S(e).$implicit,l=F();return I(l.editPlan(n))}),t()()()}if(a&2){let e=d.$implicit;m(3),p("Nome: ",e.nome,""),m(2),p("ID: ",e.id,""),m(7),p(" R$",e.preco," "),m(4),p(" ",e.duracao," meses"),m(4),p("",e.descricao," ")}}var ke=(()=>{class a{httpMethods;router;snackBar;member;pathUrlPlan=b.PLAN;pathUrlPlanMember=b.MEMBERPLAN;plans;gym_id="";typeUser="";getIdGym(){this.gym_id=localStorage.getItem("academia")}constructor(e,i,n){this.httpMethods=e,this.router=i,this.snackBar=n}ngOnInit(){this.getIdGym(),this.seach(),this.getTypeUser()}getTypeUser(){this.typeUser=localStorage.getItem("usuario_tipo")}seach(){this.httpMethods.get(this.pathUrlPlan+`?academia=${this.gym_id}&active=true`).subscribe(e=>{e.length<=0&&this.snackBar.open("N\xE3o h\xE1 planos ativos cadastrados!","fechar",{duration:2e3,verticalPosition:"top"}),this.plans=e})}editPlan(e){let i={aluno:this.member?.id,plano:e.id,academia:e.academia};this.httpMethods.post(this.pathUrlPlanMember+"alterar_plano/",i).subscribe(()=>{this.snackBar.open("Aluno vinculado a plano","Fechar",{duration:5e3,verticalPosition:"top"}),this.router.navigate(["/member/list/"])})}static \u0275fac=function(i){return new(i||a)(s(E),s(x),s(y))};static \u0275cmp=f({type:a,selectors:[["app-member-plan"]],inputs:{member:"member"},standalone:!0,features:[M],decls:5,vars:0,consts:[[1,"Plan-list"],["mat-subheader",""],["appearance","outlined",1,"plan-card"],[1,"plan-details"],[1,"plan-info"],[1,"plan-description"],[3,"click"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"h3",1),r(2,"Planos"),t(),T(3,je,23,5,"mat-card",2,Oe),t()),i&2&&(m(3),w(n.plans))},dependencies:[$,he,R,Pe,q,V,Me,ge],styles:[".plan-card[_ngcontent-%COMP%]{margin-bottom:16px}.plan-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.plan-info[_ngcontent-%COMP%]{flex:1}.plan-description[_ngcontent-%COMP%]{flex:1;margin-left:16px;margin-top:8px;padding:8px;background-color:#f9f9f9;border-radius:4px;font-size:14px;line-height:1.6;color:#555;max-height:100px;overflow-y:auto}"]})}return a})();function Ne(a,d){a&1&&(o(0,"mat-error"),r(1," Campo Obrigatorio "),t())}function Ae(a,d){a&1&&(o(0,"mat-error"),r(1," Nome tem limite de 50 caracteres "),t())}function Re(a,d){a&1&&(o(0,"mat-error"),r(1," Campo Obrigatorio "),t())}function $e(a,d){a&1&&(o(0,"mat-error"),r(1," Insira um email valido "),t())}function Ve(a,d){a&1&&(o(0,"mat-error"),r(1," Campo Obrigatorio "),t())}function qe(a,d){a&1&&(o(0,"mat-error"),r(1," N\xFAmero de telefone inv\xE1lido "),t())}function ze(a,d){a&1&&(o(0,"mat-error"),r(1," Campo Obrigatorio "),t())}var Be=(()=>{class a{httpMethods;formBuilder;router;route;snackBar;obj=void 0;action="";plans=[];pathUrlMember=b.MEMBER;pathUrlPlan=b.PLAN;formGroup;created=!0;gymId="";selectedIndex=0;title="Cadastro de aluno";getGym(){this.gymId=localStorage.getItem("academia"),this.gymId&&this.formGroup.patchValue({academia:this.gymId})}constructor(e,i,n,l,c){this.httpMethods=e,this.formBuilder=i,this.router=n,this.route=l,this.snackBar=c,this.formGroup=this.formBuilder.group({id:[],nome:["",[_.required,_.maxLength(50)]],telefone:["",[_.required,_.pattern("[0-9]{10,11}")]],email:["",[_.required,_.email]],data_nascimento:["",_.required],academia:[null],matricula:[]})}ngOnInit(){this.getGym(),this.httpMethods.get(this.pathUrlPlan+`?academia=${this.gymId}&active=true`).subscribe(e=>{this.plans=e}),this.route.paramMap.subscribe(e=>{this.action=e.get("action"),this.created=!(this.action&&this.action!=="create"),this.created||(this.title="Edi\xE7\xE3o de aluno",this.httpMethods.get(this.pathUrlMember+`${this.action}/`).subscribe(i=>{this.obj=i,this.formGroup.setValue({id:i.id,nome:i.nome,email:i.email,telefone:i.telefone,data_nascimento:i.data_nascimento,matricula:i.matricula,academia:this.gymId})}))})}saveOrUpdate(e){this.created?this.httpMethods.get(this.pathUrlMember+`?email=${e.email}`).subscribe(i=>i&&i.length>0?(this.router.navigate([`/member/form/${i[0].id}`]),this.snackBar.open("O usu\xE1rio j\xE1 existe no sistema. Altere apenas seu plano.","Fechar",{duration:5e3,verticalPosition:"top"}),this.selectedIndex=1,X(null)):this.httpMethods.post(this.pathUrlMember,e).pipe(Y(n=>n)).subscribe(n=>{this.obj=n,this.selectedIndex=1})):this.httpMethods.patch(`${this.pathUrlMember}`,e).subscribe(()=>{this.snackBar.open("Dados do aluno atualizados","O usu\xE1rio",{duration:5e3,verticalPosition:"top"}),this.obj=e})}return(){this.router.navigate(["/member/list/"])}static \u0275fac=function(i){return new(i||a)(s(E),s(pe),s(x),s(ne),s(y))};static \u0275cmp=f({type:a,selectors:[["app-form"]],standalone:!0,features:[M],decls:36,vars:13,consts:[[3,"selectedIndexChange","selectedIndex"],["label","Dados do Aluno"],[1,"container"],[1,"mat-elevation-z2","form",3,"ngSubmit","formGroup"],["appearance","fill",1,"nome"],["matInput","","formControlName","nome","placeholder","Digite o nome"],["appearance","fill"],["matInput","","type","email","formControlName","email","placeholder","Digite o Email"],["matInput","","type","cellphone","formControlName","telefone","placeholder","Digite o Telefone"],["matInput","","type","date","formControlName","data_nascimento","placeholder","digite a data de nascimento"],["mat-raised-button","","color","primary","type","submit",1,"save",3,"disabled"],["label","Sele\xE7\xE3o de Plano",3,"disabled"],[3,"member"],["mat-raised-button","","color","warn",3,"click"]],template:function(i,n){if(i&1&&(o(0,"h2"),r(1),t(),o(2,"mat-tab-group",0),L("selectedIndexChange",function(c){return D(n.selectedIndex,c)||(n.selectedIndex=c),c}),o(3,"mat-tab",1)(4,"div",2)(5,"form",3),u("ngSubmit",function(){return n.saveOrUpdate(n.formGroup.value)}),o(6,"mat-form-field",4)(7,"mat-label"),r(8,"Nome"),t(),C(9,"input",5),P(10,Ne,2,0,"mat-error")(11,Ae,2,0,"mat-error"),t(),o(12,"mat-form-field",6)(13,"mat-label"),r(14,"Email"),t(),C(15,"input",7),P(16,Re,2,0,"mat-error")(17,$e,2,0,"mat-error"),t(),o(18,"mat-form-field",6)(19,"mat-label"),r(20,"Telefone"),t(),C(21,"input",8),P(22,Ve,2,0,"mat-error")(23,qe,2,0,"mat-error"),t(),o(24,"mat-form-field",6)(25,"mat-label"),r(26,"Data de nascimento"),t(),C(27,"input",9),P(28,ze,2,0,"mat-error"),t(),o(29,"button",10),r(30,"Salvar "),t()()()(),o(31,"mat-tab",11),C(32,"app-member-plan",12),t(),o(33,"div")(34,"button",13),u("click",function(){return n.return()}),r(35,"finalizar"),t()()()),i&2){let l,c,W,H,J,K,Q;m(),te(n.title),m(),B("selectedIndex",n.selectedIndex),m(3),h("formGroup",n.formGroup),m(5),g((l=n.formGroup.get("nome"))!=null&&l.hasError("required")?10:-1),m(),g((c=n.formGroup.get("nome"))!=null&&c.hasError("maxlength")?11:-1),m(5),g((W=n.formGroup.get("email"))!=null&&W.hasError("required")?16:-1),m(),g((H=n.formGroup.get("email"))!=null&&H.hasError("email")?17:-1),m(5),g((J=n.formGroup.get("telefone"))!=null&&J.hasError("required")?22:-1),m(),g((K=n.formGroup.get("telefone"))!=null&&K.hasError("pattern")?23:-1),m(5),g((Q=n.formGroup.get("data_nascimento"))!=null&&Q.hasError("required")?28:-1),m(),h("disabled",!n.formGroup.valid),m(2),h("disabled",!n.obj),m(),h("member",n.obj)}},dependencies:[j,se,U,O,me,v,N,A,G,ue,de,ce,Ie,Se,ke,fe],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form[_ngcontent-%COMP%]{width:100%;max-width:600px;padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-label[_ngcontent-%COMP%]{font-weight:700;color:#333}input[_ngcontent-%COMP%]{font-size:16px;padding:10px}button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border:none;border-radius:4px;cursor:pointer}mat-tab-group[_ngcontent-%COMP%]{padding-left:1%;width:98%}"]})}return a})();var De=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275cmp=f({type:a,selectors:[["app-confirm-dialog-component"]],standalone:!0,features:[M],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","color","warn",3,"mat-dialog-close"]],template:function(i,n){i&1&&(o(0,"h1",0),r(1,"Confirma\xE7\xE3o"),t(),o(2,"div",1),r(3,"Deseja desativar esse aluno?"),t(),o(4,"div",2)(5,"button",3),r(6,"Cancelar"),t(),o(7,"button",4),r(8,"Confirmar"),t()()),i&2&&(m(5),h("mat-dialog-close",!1),m(2),h("mat-dialog-close",!0))},dependencies:[ye,be,Ce,ve,xe,re,v]})}return a})();var He=(a,d)=>d.aluno.id;function Je(a,d){if(a&1){let e=k();o(0,"mat-card",4)(1,"mat-card-content")(2,"div",6)(3,"div")(4,"strong"),r(5,"Matricula:"),t(),r(6),t(),o(7,"div")(8,"strong"),r(9,"Nome:"),t(),r(10),t(),o(11,"div")(12,"strong"),r(13,"Email:"),t(),r(14),t(),o(15,"div")(16,"strong"),r(17,"Plano:"),t(),r(18),t()()(),o(19,"mat-card-actions")(20,"button",7),u("click",function(){let n=S(e).$implicit,l=F();return I(l.edit(n.aluno))}),o(21,"mat-icon"),r(22,"edit"),t()(),o(23,"button",7),u("click",function(){let n=S(e).$implicit,l=F();return I(l.disable(n.aluno))}),o(24,"mat-icon"),r(25,"delete"),t()()()()}if(a&2){let e=d.$implicit;m(6),p(" ",e.aluno.matricula,""),m(4),p(" ",e.aluno.nome,""),m(4),p(" ",e.aluno.email,""),m(4),p(" ",e.plano.nome,"")}}var Le=(()=>{class a{httpMethods;router;snackBar;dialog;pathUrlMemberPlan=b.MEMBERPLAN;members;gym_id="";typeUser="";searchTerm="";getIdGym(){this.gym_id=localStorage.getItem("academia")}getTypeUser(){this.typeUser=localStorage.getItem("tipo_usuario")}constructor(e,i,n,l){this.httpMethods=e,this.router=i,this.snackBar=n,this.dialog=l}ngOnInit(){this.getIdGym(),this.seach(),this.getTypeUser()}seach(){this.httpMethods.get(this.pathUrlMemberPlan+`?expand=aluno&expand=plano&active=true&academia=${this.gym_id}`).subscribe(e=>{this.members=e})}create(){this.router.navigate(["/member/form/create"]).then()}edit(e){this.router.navigate([`/member/form/${e.id}`]).then()}disable(e){this.dialog.open(De).afterClosed().subscribe(n=>{if(n){if(this.gym_id)e.academia=this.gym_id;else{console.error("Gym ID is missing");return}console.log(e),this.httpMethods.disable(this.pathUrlMemberPlan,e,"desativar_aluno").subscribe(()=>{this.seach(),this.snackBar.open("Aluno desativado","Fechar",{duration:5e3,verticalPosition:"top"})})}})}searchMember(){let e="";this.searchTerm&&(e=`&search=${this.searchTerm}`),this.httpMethods.get(`${this.pathUrlMemberPlan}?expand=aluno&expand=plano&active=true${e}&academia=${this.gym_id}`).subscribe(i=>{this.members=i,console.log(i)})}static \u0275fac=function(i){return new(i||a)(s(E),s(x),s(y),s(_e))};static \u0275cmp=f({type:a,selectors:[["app-list"]],standalone:!0,features:[M],decls:11,vars:1,consts:[[1,"employer-list"],["mat-subheader",""],["appearance","outline",1,"search"],["matInput","text","placeholder","Digite o nome ou matricula",3,"ngModelChange","input","ngModel"],["appearance","outlined",1,"member-cad"],["mat-raised-button","","color","warn",1,"add_button",3,"click"],[1,"member-info"],["mat-icon-button","","color","primary",3,"click"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"h2",1),r(2,"Alunos"),t(),o(3,"mat-form-field",2)(4,"mat-label"),r(5,"Busca Aluno"),t(),o(6,"input",3),L("ngModelChange",function(c){return D(n.searchTerm,c)||(n.searchTerm=c),c}),u("input",function(){return n.searchMember()}),t()(),T(7,Je,26,4,"mat-card",4,He),o(9,"button",5),u("click",function(){return n.create()}),r(10,"Novo aluno"),t()()),i&2&&(m(6),B("ngModel",n.searchTerm),m(),w(n.members))},dependencies:[v,R,Ee,oe,q,$,V,G,N,A,j,U,O,le],styles:[".member-cad[_ngcontent-%COMP%]{margin-bottom:16px;margin-left:1%;width:98%}.search[_ngcontent-%COMP%]{width:98%;margin-left:1%}.member-info[_ngcontent-%COMP%]{justify-content:space-between;align-items:flex-start}h2[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;text-align:center}"]})}return a})();var Ue=[{path:"list",component:Le},{path:"form/:action",component:Be}];var Dt=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275mod=ee({type:a});static \u0275inj=Z({imports:[ie,ae.forChild(Ue)]})}return a})();export{Dt as MemberModule};
