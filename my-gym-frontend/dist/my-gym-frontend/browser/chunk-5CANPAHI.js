import{a as Ye}from"./chunk-USGPMFQF.js";import{b as Le,d as Oe,e as Ge,f as Be,h as je}from"./chunk-NJPJXR4Q.js";import{a as Ae,b as Ve,c as Ne,d as qe,e as He,f as ze,g as Ue,h as $e,i as Qe,j as We,k as Xe}from"./chunk-42QW25JL.js";import"./chunk-DDKZZNDO.js";import{a as Ie}from"./chunk-3A35AQ27.js";import{a as Re,b as Fe,c as ke}from"./chunk-U76PCYAY.js";import{a as G}from"./chunk-N5P5CQHZ.js";import{a as Ce}from"./chunk-EWFQADUA.js";import{a as O}from"./chunk-ZEWUZSSU.js";import{b as k,c as De,d as Pe,g as I,j as L}from"./chunk-Z2MS5EHL.js";import{$ as Te,A as Se,C as Me,F as Ee,I as ye,J as we,K as P,L as R,a as y,ca as F,q as w,s as T,u as D,v as ve,y as xe,z as be}from"./chunk-S65PQ7FS.js";import"./chunk-CARY4E7O.js";import"./chunk-VEVENBIR.js";import{ba as fe,da as he,fa as ge,l as de,na as _e,p as ue}from"./chunk-6H5PU6RJ.js";import{$ as z,$b as v,$c as se,Ab as Q,Bb as W,Cb as t,Db as i,E as H,Eb as h,Fb as _,Gb as C,Ib as X,Lb as g,Sb as Y,Tb as J,Ub as K,Xa as a,Xb as Z,Ya as d,Zb as r,_b as A,_c as me,ac as ee,bc as te,bd as ce,cc as ie,cd as pe,dc as oe,ec as ne,f as q,fc as E,hc as re,ia as M,ja as U,jc as x,kc as ae,mc as V,nb as p,nc as le,qa as B,ra as j,sb as u,xb as b,yb as $}from"./chunk-OXVJG6A6.js";import"./chunk-JKOY2XUY.js";function rt(e,l){if(e&1&&(t(0,"mat-option",8),r(1),x(2,"titlecase"),i()),e&2){let n=l.$implicit;u("value",n),a(),A(ae(2,2,n))}}function at(e,l){e&1&&(t(0,"mat-error"),r(1,"Campo Obrigat\xF3rio"),i())}function lt(e,l){e&1&&(t(0,"mat-error"),r(1,"Campo Obrigat\xF3rio"),i())}function mt(e,l){e&1&&(t(0,"mat-error"),r(1,"Campo Obrigat\xF3rio"),i())}function st(e,l){e&1&&(t(0,"mat-error"),r(1,"Campo Obrigat\xF3rio"),i())}var Ke=(()=>{class e{formBuilder;httpMethods;authService;snackBar;dialogRef;data;pathUrl=O.EXPENSE;categories=["energia","agua","salario","manutencao","produtos","limpeza","impostos","outros"];formGroup;constructor(n,m,o,s,c,f){this.formBuilder=n,this.httpMethods=m,this.authService=o,this.snackBar=s,this.dialogRef=c,this.data=f,this.formGroup=this.formBuilder.group({tipo:[f.expense?.categoria||null,T.required],descricao:[f.expense?.descricao||null,T.required],valor:[f.expense?.valor||null,T.required],academia:[this.authService.get_gym()],data:[f.expense?.data||null]})}register(){this.formGroup.valid&&this.httpMethods.post(this.pathUrl,this.formGroup.value).subscribe(n=>{this.snackBar.open("Gasto registrado com sucesso.","Fechar",{duration:5e3,verticalPosition:"top"}),this.dialogRef.close(!0)},n=>{this.snackBar.open("Erro ao registrar gasto.","Fechar",{duration:5e3,verticalPosition:"top"})})}closeDialog(){this.formGroup.reset(),this.dialogRef.close()}static \u0275fac=function(m){return new(m||e)(d(we),d(G),d(F),d(Te),d(Re),d(Fe))};static \u0275cmp=M({type:e,selectors:[["app-form"]],standalone:!0,features:[ne([Le(),ge(),{provide:he,useValue:je},{provide:fe,useValue:"pt-BR"}]),E],decls:36,vars:9,consts:[["picker",""],[1,"p-3","flex","flex-column","gap-3"],[1,"flex","justify-content-start"],[1,"font-bold","text-2xl"],["id","container-prod",1,"flex","flex-column"],[1,"flex","flex-column","gap-3",3,"ngSubmit","formGroup"],["appearance","fill",1,"w-full"],["formControlName","tipo","placeholder","tipo","required",""],[3,"value"],["matInput","","formControlName","descricao","placeholder","Descri\xE7\xE3o","required",""],["matInput","","type","number","formControlName","valor","placeholder","Digite o valor do gasto","required",""],["matInput","","formControlName","data",3,"matDatepicker"],["matSuffix","",3,"for"],[1,"flex","justify-content-end","gap-2"],["mat-button","","type","button",1,"add_button","bg-black-alpha-80","text-white",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"add_button","text-white",3,"disabled"]],template:function(m,o){if(m&1){let s=X();t(0,"main",1)(1,"div",2)(2,"h2",3),r(3),i()(),t(4,"div",4)(5,"form",5),g("ngSubmit",function(){return B(s),j(o.register())}),t(6,"mat-form-field",6)(7,"mat-label"),r(8,"Tipo"),i(),t(9,"mat-select",7),Q(10,rt,3,4,"mat-option",8,$),i(),p(12,at,2,0,"mat-error"),i(),t(13,"mat-form-field",6)(14,"mat-label"),r(15,"Descri\xE7\xE3o"),i(),h(16,"input",9),p(17,lt,2,0,"mat-error"),i(),t(18,"mat-form-field",6)(19,"mat-label"),r(20,"Valor"),i(),h(21,"input",10),p(22,mt,2,0,"mat-error"),i(),t(23,"mat-form-field",6)(24,"mat-label"),r(25,"Data de Validade"),i(),h(26,"input",11)(27,"mat-datepicker-toggle",12)(28,"mat-datepicker",null,0),p(30,st,2,0,"mat-error"),i(),t(31,"div",13)(32,"button",14),g("click",function(){return B(s),j(o.closeDialog())}),r(33,"Cancelar"),i(),t(34,"button",15),r(35,"Salvar"),i()()()()()}if(m&2){let s,c,f,S,N=Z(29);a(3),A(o.data.title||"Registrar Gasto"),a(2),u("formGroup",o.formGroup),a(5),W(o.categories),a(2),b((s=o.formGroup.get("categoria"))!=null&&s.hasError("required")&&((s=o.formGroup.get("categoria"))!=null&&s.touched)?12:-1),a(5),b((c=o.formGroup.get("descricao"))!=null&&c.hasError("required")&&((c=o.formGroup.get("descricao"))!=null&&c.touched)?17:-1),a(5),b((f=o.formGroup.get("valor"))!=null&&f.hasError("required")&&((f=o.formGroup.get("valor"))!=null&&f.touched)?22:-1),a(4),u("matDatepicker",N),a(),u("for",N),a(3),b((S=o.formGroup.get("data"))!=null&&S.hasError("required")&&((S=o.formGroup.get("data"))!=null&&S.touched)?30:-1),a(4),u("disabled",o.formGroup.invalid)}},dependencies:[I,L,k,R,be,w,Se,D,ve,ye,Me,Ee,P,Ie,_e,De,Oe,Ge,Be,Pe,me,y],styles:["[_nghost-%COMP%]{display:block;max-width:100vw;overflow-x:hidden}main[_ngcontent-%COMP%]{display:block;width:100%;max-width:100%;overflow-x:hidden;box-sizing:border-box}mat-card[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box;overflow-x:hidden}#container-prod[_ngcontent-%COMP%]{width:100%;max-width:100%;overflow-x:hidden}"]})}return e})();var ct=e=>[e,"BRL","symbol","1.2-2","pt-BR"];function pt(e,l){e&1&&(t(0,"th",24),r(1," id "),i())}function dt(e,l){if(e&1&&(t(0,"td",25),r(1),i()),e&2){let n=l.$implicit;a(),v(" ",n.id," ")}}function ut(e,l){e&1&&(t(0,"th",24),r(1," Tipo "),i())}function ft(e,l){if(e&1&&(t(0,"td",25),r(1),i()),e&2){let n=l.$implicit;a(),v(" ",n.tipo," ")}}function ht(e,l){e&1&&(t(0,"th",24),r(1," Descri\xE7\xE3o "),i())}function gt(e,l){if(e&1&&(t(0,"td",25),r(1),i()),e&2){let n=l.$implicit;a(),v(" ",n.descricao," ")}}function _t(e,l){e&1&&(t(0,"th",24),r(1," Valor "),i())}function Ct(e,l){if(e&1&&(t(0,"td",25),r(1),x(2,"currency"),i()),e&2){let n=l.$implicit;a(),v(" ",le(2,1,re(7,ct,n.valor))," ")}}function vt(e,l){e&1&&(t(0,"th",24),r(1," Data "),i())}function xt(e,l){if(e&1&&(t(0,"td",25),r(1),x(2,"date"),i()),e&2){let n=l.$implicit;a(),v(" ",V(2,1,n.data,"dd/MM/yyyy","pt-BR")," ")}}function bt(e,l){e&1&&(t(0,"th",24),r(1," Registrado em "),i())}function St(e,l){if(e&1&&(t(0,"td",25),r(1),x(2,"date"),i()),e&2){let n=l.$implicit;a(),v(" ",V(2,1,n.created_at,"dd/MM/yyyy","pt-BR")," ")}}function Mt(e,l){e&1&&h(0,"tr",26)}function Et(e,l){e&1&&h(0,"tr",27)}var Ze=(()=>{class e{httpMethods;authService;router;dialog;pathUrl=O.EXPENSE;Expenses=[];dataSource=new Xe;searchTerm="";currentPage=0;limit=10;totalResults=0;searchChanged=new q;displayedColumns=["id","categoria","descricao","valor","data"];paginator;constructor(n,m,o,s){this.httpMethods=n,this.authService=m,this.router=o,this.dialog=s}ngOnInit(){this.search(),this.searchChanged.pipe(H(300)).subscribe(n=>{this.searchTerm=n,this.searchExpenses(n,0)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator}get totalPages(){return Math.ceil(this.totalResults/this.limit)}search(){this.searchExpenses(this.searchTerm,0)}searchExpenses(n="",m=0,o=this.limit){let s={limit:o,offset:m,active:!0,academia:this.authService.get_gym()};n&&(s.search=n),this.httpMethods.getPaginated(this.pathUrl,s).subscribe(c=>{this.Expenses=c.results,this.totalResults=c.count,this.dataSource.data=this.Expenses,this.currentPage=m/o})}nextPage(){let n=Math.ceil(this.totalResults/this.limit)-1;if(this.currentPage<n){let m=(this.currentPage+1)*this.limit;this.searchExpenses(this.searchTerm,m)}}prevPage(){if(this.currentPage>0){let n=(this.currentPage-1)*this.limit;this.searchExpenses(this.searchTerm,n)}}onSearchChange(n){this.searchChanged.next(n)}create(){this.dialog.open(Ke,{width:"600px",maxWidth:"90vw",minHeight:"400px",panelClass:"custom-modal",autoFocus:!0,data:{title:"Novo Gasto",action:"create",expense:{academia:this.authService.get_gym(),categoria:"",descricao:"",valor:0,data:null}}}).afterClosed().subscribe(m=>{m&&this.searchExpenses(this.searchTerm,0)})}static \u0275fac=function(m){return new(m||e)(d(G),d(F),d(de),d(ke))};static \u0275cmp=M({type:e,selectors:[["app-list"]],viewQuery:function(m,o){if(m&1&&Y(Ye,5),m&2){let s;J(s=K())&&(o.paginator=s.first)}},standalone:!0,features:[E],decls:49,vars:8,consts:[[1,"title"],[1,"subtitle","flex","justify-content-center","flex","mb-4"],[1,"ml-8","mr-8"],[1,"flex","align-items-center","justify-content-start"],["appearance","outline",1,"search","w-30rem"],["matInput","text","placeholder","Por descri\xE7\xE3o ou Categoria",3,"ngModelChange","input","ngModel"],[1,"flex","align-items-center","justify-content-between","w-full","mb-4"],[1,"w-10rem"],[1,"align-self-start","mr-2"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","mt-2",2,"color","white",3,"click"],[1,"mat-elevation-z1","bg-black-alpha-80"],["mat-table","",1,"mat-elevation-z8","demo-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","categoria"],["matColumnDef","descricao"],["matColumnDef","valor"],["matColumnDef","data"],["matColumnDef","created_at"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"pagination-controls"],[3,"click","disabled"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(m,o){m&1&&(t(0,"h2",0),r(1,"Gastos"),i(),t(2,"div",1),r(3,"Resgistre e verifique os gastos do estabelecimento"),i(),t(4,"main",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),r(8,"Buscar registro"),i(),t(9,"input",5),oe("ngModelChange",function(c){return ie(o.searchTerm,c)||(o.searchTerm=c),c}),g("input",function(){return o.onSearchChange(o.searchTerm)}),i()(),t(10,"div",6),h(11,"div",7),t(12,"div",8)(13,"button",9),g("click",function(){return o.create()}),t(14,"mat-icon"),r(15,"add"),i(),r(16," Registrar Gasto "),i()()()(),t(17,"div")(18,"div",10)(19,"table",11),_(20,12),p(21,pt,2,0,"th",13)(22,dt,2,1,"td",14),C(),_(23,15),p(24,ut,2,0,"th",13)(25,ft,2,1,"td",14),C(),_(26,16),p(27,ht,2,0,"th",13)(28,gt,2,1,"td",14),C(),_(29,17),p(30,_t,2,0,"th",13)(31,Ct,3,9,"td",14),C(),_(32,18),p(33,vt,2,0,"th",13)(34,xt,3,5,"td",14),C(),_(35,19),p(36,bt,2,0,"th",13)(37,St,3,5,"td",14),C(),p(38,Mt,1,0,"tr",20)(39,Et,1,0,"tr",21),i()(),t(40,"div",22)(41,"button",23),g("click",function(){return o.prevPage()}),t(42,"mat-icon"),r(43,"chevron_left"),i()(),t(44,"span"),r(45),i(),t(46,"button",23),g("click",function(){return o.nextPage()}),t(47,"mat-icon"),r(48,"chevron_right"),i()()()()()),m&2&&(a(9),te("ngModel",o.searchTerm),a(10),u("dataSource",o.dataSource),a(19),u("matHeaderRowDef",o.displayedColumns),a(),u("matRowDefColumns",o.displayedColumns),a(2),u("disabled",o.currentPage===0),a(4),ee("P\xE1gina ",o.currentPage+1," de ",o.totalPages,""),a(),u("disabled",o.currentPage>=o.totalPages-1))},dependencies:[ce,se,y,ze,Ve,qe,I,He,Qe,Ue,Ce,L,k,We,$e,Ae,R,w,D,Ne,P,xe],styles:[".title[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;font-size:1.5rem;color:#333}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:16px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:36px;height:36px;margin:0 8px;border-radius:50%;background-color:#e0e0e0;color:#000;border:none;cursor:pointer;display:flex;justify-content:center;align-items:center;box-shadow:0 2px 2px #0003;transition:background-color .3s ease,box-shadow .3s ease}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d6d6d6}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;color:#9e9e9e;cursor:not-allowed;box-shadow:none}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;margin:0 8px;color:#757575}"]})}return e})();var et=[{path:"list",component:Ze}];var oi=(()=>{class e{static \u0275fac=function(m){return new(m||e)};static \u0275mod=U({type:e});static \u0275inj=z({imports:[pe,ue.forChild(et)]})}return e})();export{oi as ExpensesModule};
