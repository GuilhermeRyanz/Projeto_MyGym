import{a as ee,b as te}from"./chunk-PI47PNF6.js";import{a as re}from"./chunk-OCPZM4ND.js";import{a as I}from"./chunk-LEO3NIKO.js";import{a as b}from"./chunk-EWFQADUA.js";import{a as M}from"./chunk-ZEWUZSSU.js";import{b as X,g as Z,j as $}from"./chunk-XAZTUTD6.js";import{$ as K,C as Q,J as Y,K as J,L as x,a as A,q as L,u as V,v as W,y as H,z as q}from"./chunk-NJ6WJ2NY.js";import"./chunk-CARY4E7O.js";import{a as _,c as y,e as ne,f as ie}from"./chunk-VEVENBIR.js";import{l as z,p as N}from"./chunk-6H5PU6RJ.js";import{$ as O,$b as p,Cb as n,Db as r,E as T,Eb as h,Ib as G,Lb as u,Nb as v,Uc as U,Xa as o,Ya as c,Zb as a,_b as g,bc as k,cc as S,cd as D,dc as w,f as E,fc as C,ia as f,ja as j,nb as B,qa as R,ra as F,sb as d}from"./chunk-OXVJG6A6.js";import"./chunk-JKOY2XUY.js";var P=(()=>{class m{formBuilder;httpMethods;router;snackBar;memberPlan;gymId="";formGroup;pathUrlFrequncy=M.FREQUENCY;currentTime="";getGym(){this.gymId=localStorage.getItem("academia"),this.gymId&&this.formGroup.patchValue({academia:this.gymId})}constructor(t,i,e,l){this.formBuilder=t,this.httpMethods=i,this.router=e,this.snackBar=l,this.updateTime(),this.formGroup=this.formBuilder.group({aluno:[""],academia:[this.gymId]})}ngOnInit(){this.getGym()}getInitials(t){if(!t)return"";let e=t.trim().split(" ").map(l=>l.charAt(0).toUpperCase()).join("");return e.length>2?e.substring(0,2):e}updateTime(){setInterval(()=>{let t=new Date;this.currentTime=t.toLocaleString()},1e3)}confirm(){this.formGroup.patchValue({aluno:this.memberPlan?.aluno.id}),this.httpMethods.post(this.pathUrlFrequncy,this.formGroup.value).subscribe(t=>{console.log(t);let i="check-in realizado com sucesso.";this.router.navigate(["check-in/register"]),this.snackBar.open(i,"fechar",{duration:5e3,verticalPosition:"top"})},t=>{console.error("Erro ao fazer check-in",t)})}static \u0275fac=function(i){return new(i||m)(c(Y),c(I),c(z),c(K))};static \u0275cmp=f({type:m,selectors:[["app-check-in-confirm"]],inputs:{memberPlan:[0,"member","memberPlan"]},standalone:!0,features:[C],decls:28,vars:5,consts:[["xmlns","http://www.w3.org/1999/html",1,"flex","align-items-center","justify-content-center","p-5"],["appearance","raised",1,"p-4","w-6","h-10","flex","align-content-start"],[1,"flex","flex-column","shadow-log"],[1,"text-xl","mb-1","font-bold"],[1,"text-sm","text-500","mb-3"],[1,"flex","align-items-center","gap-3"],[1,"avatar","align-items-center"],[1,"text-lg","font-bold"],[1,"text-sm","text-gray"],[1,"flex","align-items-start","justify-content-start","mt-3","text-sm"],[3,"formGroup"],["mat-button","",1,"w-full","bg-black-alpha-90","text-white-alpha-90","border-round",3,"click"]],template:function(i,e){i&1&&(n(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"div",2)(4,"span",3),a(5," Confirmar Check-in "),r(),n(6,"span",4),a(7," Confirme as informacoes do aluno "),r()()(),n(8,"mat-card-content")(9,"div",5)(10,"div")(11,"div",6),a(12),r()(),n(13,"div")(14,"span",7),a(15),r(),h(16,"br"),n(17,"span",8),a(18),r()()(),n(19,"div",9)(20,"mat-icon"),a(21,"schedule"),r(),n(22,"span"),a(23),r()()(),n(24,"form",10)(25,"mat-card-actions")(26,"button",11),u("click",function(){return e.confirm()}),a(27,"Confirmar"),r()()()()()),i&2&&(o(12),p(" ",e.getInitials((e.memberPlan==null||e.memberPlan.aluno==null?null:e.memberPlan.aluno.nome)||"")," "),o(3),p(" ",e.memberPlan==null||e.memberPlan.aluno==null?null:e.memberPlan.aluno.nome,""),o(3),p(" ",e.memberPlan==null||e.memberPlan.aluno==null?null:e.memberPlan.aluno.email,""),o(5),p(" Data e Hora: ",e.currentTime,""),o(),d("formGroup",e.formGroup))},dependencies:[A,_,ne,y,x,q,W,Q,b,ie],styles:[".avatar[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#53cd55;color:#fff;font-weight:700;font-size:16px;display:flex;align-items:center;justify-content:center;border-radius:50%;text-transform:uppercase}"]})}return m})();function de(m,le){if(m&1){let t=G();n(0,"mat-card",12),u("click",function(){let e=R(t).$implicit,l=v();return F(l.makePayment(e))}),n(1,"mat-card-content")(2,"div",13)(3,"div",14),a(4),r(),n(5,"div",15)(6,"div",16),a(7),r(),n(8,"div",17),a(9),r()()(),n(10,"div",18)(11,"div",19)(12,"span"),a(13,"Plano Atual:"),r(),n(14,"strong"),a(15),r()(),n(16,"div",19)(17,"span"),a(18,"Matr\xEDcula:"),r(),n(19,"strong"),a(20),r()()()(),n(21,"div",20)(22,"mat-icon"),a(23,"how_to_reg"),r(),n(24,"span",21),a(25,"Registrar Check-in"),r()()()}if(m&2){let t=le.$implicit,i=v();o(4),p(" ",i.getInitials(t.aluno.nome)," "),o(3),g(t.aluno.nome),o(2),g(t.aluno.email),o(6),g(t.plano.nome),o(5),g(t.aluno.matricula)}}var oe=(()=>{class m{httpMethods;obj=void 0;pathUrlMemberPlan=M.MEMBERPLAN;membersPlan;gym_id="";typeUser="";searchTerm="";currentPage=0;limit=10;totalResults=0;selectedIndex=0;searchChanged=new E;constructor(t){this.httpMethods=t}ngOnInit(){this.getIdGym(),this.getTypeUser(),this.search(),this.searchChanged.pipe(T(300)).subscribe(t=>{this.searchMember(t,0)})}getIdGym(){this.gym_id=localStorage.getItem("academia")}getTypeUser(){this.typeUser=localStorage.getItem("tipo_usuario")}search(){this.searchMember(this.searchTerm,0)}searchMember(t="",i=0,e=this.limit){let l={expand:["aluno","plano"],active:!0,academia:this.gym_id,limit:e,offset:i};t&&(l.search=t),this.httpMethods.getPaginated(this.pathUrlMemberPlan,l).subscribe(s=>{this.membersPlan=s.results,this.totalResults=s.count,this.currentPage=i/e})}onPageChange(t){let i=t*this.limit;this.searchMember(this.searchTerm,i)}trackById(t,i){return i.aluno.id}makePayment(t){this.obj=t,this.selectedIndex=1}getInitials(t){if(!t)return"";let e=t.trim().split(" ").map(l=>l.charAt(0).toUpperCase()).join("");return e.length>2?e.substring(0,2):e}onSearchChange(t){this.searchTerm=t,this.searchChanged.next(t)}static \u0275fac=function(i){return new(i||m)(c(I))};static \u0275cmp=f({type:m,selectors:[["app-check-in-registration"]],standalone:!0,features:[C],decls:16,vars:9,consts:[[1,"title"],[1,"subtitle","flex","justify-content-center"],[3,"selectedIndexChange","selectedIndex"],["label","Sele\xE7\xE3o Aluno"],[1,"flex","align-items-center","justify-content-center"],["appearance","outline",1,"search","w-30rem"],["matInput","text","placeholder","Digite o nome ou matr\xEDcula",3,"ngModelChange","input","ngModel"],[1,"member-list","p-3","gap-2","ml-4"],["class","member-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"pageChange","totalItems","itemsPerPage","currentPage"],["label","Confirma\xE7\xE3o",3,"disabled"],[3,"member"],[1,"member-card",3,"click"],[1,"member-info","flex","align-items-center"],[1,"avatar","align-items-center"],[1,"details","flex-column"],[1,"name"],[1,"email"],[1,"extra-info"],[1,"info-row"],[1,"footer","p-2","flex","justify-content-center"],[1,"Realizar","check-in"]],template:function(i,e){i&1&&(n(0,"h2",0),a(1,"Check-in"),r(),n(2,"div",1),a(3,"Registre a entrada de alunos no estabelecimento"),r(),n(4,"mat-tab-group",2),w("selectedIndexChange",function(s){return S(e.selectedIndex,s)||(e.selectedIndex=s),s}),n(5,"mat-tab",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),a(9,"Busca Aluno"),r(),n(10,"input",6),w("ngModelChange",function(s){return S(e.searchTerm,s)||(e.searchTerm=s),s}),u("input",function(){return e.onSearchChange(e.searchTerm)}),r()()(),n(11,"div",7),B(12,de,26,5,"mat-card",8),r(),n(13,"app-paginator",9),u("pageChange",function(s){return e.onPageChange(s)}),r()(),n(14,"mat-tab",10),h(15,"app-check-in-confirm",11),r()()),i&2&&(o(4),k("selectedIndex",e.selectedIndex),o(6),k("ngModel",e.searchTerm),o(2),d("ngForOf",e.membersPlan)("ngForTrackBy",e.trackById),o(),d("totalItems",e.totalResults)("itemsPerPage",e.limit)("currentPage",e.currentPage),o(),d("disabled",!e.obj),o(),d("member",e.obj))},dependencies:[_,y,Z,$,X,ee,te,x,L,V,J,H,P,U,b,re],styles:[".title[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;font-size:1.5rem;color:#333}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#909090}.search[_ngcontent-%COMP%]{margin-top:16px}.member-card[_ngcontent-%COMP%]{width:95%;background:#f8f8f8;border-radius:12px;box-shadow:0 2px 4px #0000001a;transition:all .3s ease-in-out;cursor:pointer}.member-card[_ngcontent-%COMP%]:hover{transform:scale(1.06);box-shadow:0 4px 8px #00000026}.member-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#53cd55;color:#fff;font-weight:700;font-size:16px;display:flex;align-items:center;justify-content:center;border-radius:50%;text-transform:uppercase}.member-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;line-height:1.2}.name[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#333;margin-bottom:2px}.email[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.extra-info[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid #eee}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.9rem;color:#444}.footer[_ngcontent-%COMP%]{background:#ededed;font-size:.9rem;color:#969696;border-top:1px solid #eee;border-radius:0 0 9px 9px}.member-card[_ngcontent-%COMP%]:hover   .footer[_ngcontent-%COMP%]{color:#fff;background-color:#53cd55}.mat-tab-group[_ngcontent-%COMP%]{padding-top:16px}h2[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%;text-align:center;font-family:Arial,Helvetica,sans-serif}mat-tab-group[_ngcontent-%COMP%]{padding-left:1%;width:98%}"]})}return m})();var me=[{path:"confirm",component:P},{path:"register",component:oe}];var De=(()=>{class m{static \u0275fac=function(i){return new(i||m)};static \u0275mod=j({type:m});static \u0275inj=O({imports:[D,N.forChild(me)]})}return m})();export{De as CheckInModule};
