import{a as De}from"./chunk-I2K4IUPB.js";import{a as ge,b as he}from"./chunk-EKKCXAYC.js";import{a as ke}from"./chunk-OMUIM4SU.js";import{a as ye,b as Me,c as we,e as Pe,f as Fe,g as Ie}from"./chunk-ZW7EKFDA.js";import{a as Se}from"./chunk-YT7YNDF5.js";import{a as G}from"./chunk-EPO6Q7SL.js";import{a as M,b as te}from"./chunk-AWHMWCAF.js";import{b as xe,c as be,g as ve,j as Ce,l as T}from"./chunk-CQRFBGBQ.js";import{B as le,C as me,D as de,E as ce,F as se,G as pe,H as ue,J as fe,Z as _e,a as y,q as ie,s as g,u as ne,v as oe,y as re,z as ae}from"./chunk-MLOVQ4ZF.js";import"./chunk-CARY4E7O.js";import{a as O,c as N,g as Ee}from"./chunk-LKV62IVN.js";import{j as Y,l as k,na as ee,p as Z}from"./chunk-MNF6TJHE.js";import{$ as Q,$b as J,$c as X,Ab as F,Bb as t,Cb as e,Db as _,Hb as D,Kb as f,Mb as C,Sc as K,Xa as l,Ya as c,Yb as n,Zb as E,_b as p,ec as S,ia as x,ja as W,nb as h,qa as b,ra as v,sb as u,xb as s,yb as I,zb as P}from"./chunk-BE5RT4AU.js";import{a as z,b as H}from"./chunk-JKOY2XUY.js";function Be(i,d){if(i&1&&(t(0,"li",10)(1,"mat-icon",17),n(2,"check_circle"),e(),n(3),e()),i&2){let r=d.$implicit;l(3),p(" ",r," ")}}function Le(i,d){i&1&&n(0,"Mes")}function Ae(i,d){i&1&&n(0," Meses ")}var Te=(()=>{class i{dialogRef;plan;constructor(r,a){this.dialogRef=r,this.plan=a}close(){this.dialogRef.close()}static \u0275fac=function(a){return new(a||i)(c(ye),c(Me))};static \u0275cmp=x({type:i,selectors:[["app-plan-detail"]],standalone:!0,features:[S],decls:37,vars:7,consts:[["mat-dialog-title","",1,"dialog-title","text-center"],[1,"dialog-content","p-4"],[1,"plan-card","p-3"],[1,"flex","flex-column","gap-3"],[1,"flex","align-items-center","justify-content-between"],[1,"text-2xl","font-bold"],[1,"text-2xl","text-green-500"],[1,"text-gray-700","text-sm","mb-2","overflow-hidden","text-overflow-ellipsis","line-clamp-3"],[1,"text-lg","font-bold"],[1,"pl-3","line-clamp-5","overflow-hidden"],[1,"text-sm","flex","align-items-center"],[1,"flex","flex-column","gap-2"],[1,"flex","justify-content-between","text-sm","font-medium"],[1,"text-primary","font-bold"],[1,"text-sm"],[1,"dialog-actions","flex","justify-content-center","p-3"],["mat-stroked-button","",1,"close-button","w-full",3,"click"],[1,"text-green-500","mr-2"]],template:function(a,o){a&1&&(t(0,"main")(1,"h2",0),n(2,"Detalhes do Plano"),e(),t(3,"mat-dialog-content",1)(4,"mat-card",2)(5,"mat-card-content",3)(6,"div",4)(7,"div",5),n(8),e(),t(9,"div",6),n(10),e()(),t(11,"div",7),n(12),e(),t(13,"div")(14,"div",8),n(15,"Benef\xEDcios:"),e(),t(16,"ul",9),P(17,Be,4,1,"li",10,I),e()(),t(19,"div",11)(20,"div",12)(21,"div"),n(22,"Dura\xE7\xE3o:"),e(),t(23,"div",13),n(24),h(25,Le,1,0)(26,Ae,1,0),e()(),t(27,"div",12)(28,"div"),n(29,"Dias dispon\xEDveis:"),e(),t(30,"div",14),n(31),e()()()()()(),t(32,"mat-dialog-actions",15)(33,"button",16),f("click",function(){return o.close()}),t(34,"mat-icon"),n(35,"close"),e(),n(36," Fechar "),e()()()),a&2&&(l(8),E(o.plan.nome),l(2),J("R$ ",o.plan.preco," / ",o.plan.duracao,"Meses"),l(2),p(" ",o.plan.descricao," "),l(5),F(o.plan.beneficios),l(7),p("",o.plan.duracao," "),l(),s(o.plan.duracao>1?25:26),l(6),p(" ",o.plan.dias_permitidos_str,""))},dependencies:[Fe,Ie,Pe,y,M,N,O],styles:[".dialog-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#333}.dialog-content[_ngcontent-%COMP%]{max-width:850px;min-width:650px}.text-green-500[_ngcontent-%COMP%]{color:#0f9d58}.text-primary[_ngcontent-%COMP%]{color:#007bff}.dialog-actions[_ngcontent-%COMP%]{border-top:1px solid #ddd}.close-button[_ngcontent-%COMP%]{color:#d32f2f;font-weight:700}[_nghost-%COMP%]{overflow-x:hidden}main[_ngcontent-%COMP%]{overflow-x:hidden}"]})}return i})();var Ue=(i,d)=>d.id;function $e(i,d){if(i&1&&(t(0,"li",16),n(1),e()),i&2){let r=d.$implicit;l(),p(" ",r,"")}}function qe(i,d){if(i&1){let r=D();t(0,"mat-card",6)(1,"mat-card-content",8)(2,"div",9)(3,"div",10)(4,"div",11),n(5),e(),t(6,"div",12),n(7),e()(),t(8,"div",13),n(9),e(),t(10,"div",14),n(11,"Benef\xEDcios:"),e(),t(12,"ul",15),P(13,$e,2,1,"li",16,I),e()()(),t(15,"mat-card",17)(16,"div",18)(17,"div"),n(18,"Dura\xE7\xE3o:"),e(),t(19,"div",19),n(20),e()(),t(21,"div",18)(22,"div"),n(23,"Dias dispon\xEDveis:"),e(),t(24,"div",16),n(25),e()()(),t(26,"div",20)(27,"button",21),f("click",function(){let o=b(r).$implicit,m=C();return v(m.edit(o))}),t(28,"mat-icon"),n(29,"edit_square"),e(),n(30," Editar "),e(),t(31,"button",22),f("click",function(){let o=b(r).$implicit,m=C();return v(m.disable(o))}),t(32,"mat-icon"),n(33,"delete"),e(),n(34," Excluir "),e()(),t(35,"button",23),f("click",function(){let o=b(r).$implicit,m=C();return v(m.viewDetail(o))}),t(36,"mat-icon"),n(37,"info"),e(),n(38," Ver Detalhes "),e()()}if(i&2){let r=d.$implicit;l(5),E(r.nome),l(2),p("R$ ",r.preco,""),l(2),p(" ",r.descricao," "),l(4),F(r.beneficios),l(7),p("",r.duracao," meses"),l(5),p(" ",r.dias_permitidos_str,"")}}var Oe=(()=>{class i{httpMethods;router;snackBar;dialog;pathUrlPlan=T.PLAN;plans;gym_id="";typeUser="";limit=3;totalResults=0;currentPage=0;getIdGym(){this.gym_id=localStorage.getItem("academia")}constructor(r,a,o,m){this.httpMethods=r,this.router=a,this.snackBar=o,this.dialog=m}ngOnInit(){this.getIdGym(),this.search(),this.getTypeUser()}getTypeUser(){this.typeUser=localStorage.getItem("tipo_usuario")}search(r=0,a=this.limit){let o={academia:this.gym_id,active:!0,limit:a,offset:r};this.httpMethods.getPaginated(this.pathUrlPlan,o).subscribe(m=>{m.results.length<=0&&this.snackBar.open("N\xE3o h\xE1 planos ativos cadastrados!","fechar",{duration:2e3,verticalPosition:"top"}),this.plans=m.results,this.totalResults=m.count,this.currentPage=r/a})}onPageChange(r){let a=r*this.limit;this.search(a)}create(){this.router.navigate(["/plan/form/create"]).then()}edit(r){this.router.navigate([`/plan/form/${r.id}`]).then()}viewDetail(r){this.dialog.open(Te,{width:"40rem",maxWidth:"none",data:r})}disable(r){this.dialog.open(ke).afterClosed().subscribe(o=>{o&&this.httpMethods.disable(this.pathUrlPlan,r,"desativar").subscribe(()=>{this.search(),this.snackBar.open("Plano desativado","Fechar",{duration:5e3,verticalPosition:"top"})})})}static \u0275fac=function(a){return new(a||i)(c(G),c(k),c(_e),c(we))};static \u0275cmp=x({type:i,selectors:[["app-list"]],standalone:!0,features:[S],decls:14,vars:4,consts:[[1,"container"],["mat-subheader",""],[1,"font-gray","subtitle","flex","justify-content-center"],[1,"flex","justify-content-end"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","mr-3",2,"color","white",3,"click","disabled"],[1,"flex","flex-wrap","justify-content-center","gap-3","p-2"],[1,"bg-white-alpha-90","plan-card","w-30rem","p-3","flex","flex-column","justify-content-between"],[3,"pageChange","totalItems","itemsPerPage","currentPage"],[1,"flex-grow-1"],[1,"flex","flex-column","gap-2"],[1,"flex","align-items-center","justify-content-between"],[1,"text-2xl","font-bold"],[1,"text-2xl","font-bold","text-green-500"],[1,"line-clamp-3","text-gray-700","text-sm","mb-2","overflow-hidden","text-overflow-ellipsis","line-clamp-3"],[1,"text-lg","font-bold","overflow-hidden","text-overflow-ellipsis"],[1,"pl-3","line-clamp-5","overflow-hidden"],[1,"text-sm"],["appearance","outlined",1,"p-3"],[1,"flex","justify-content-between","text-sm","font-medium"],[1,"text-primary","font-bold"],[1,"plan-actions","flex","justify-content-between","mt-auto","p-3"],["mat-stroked-button","",1,"edit-button",3,"click"],["mat-stroked-button","",1,"delete-button",3,"click"],["mat-stroked-button","",1,"view-details-button","mt-2","w-full",3,"click"]],template:function(a,o){a&1&&(t(0,"div",0)(1,"h2",1),n(2,"Planos"),e(),t(3,"p",2),n(4,"Crie e edite os planos fornecidos pela academia"),e(),t(5,"div",3)(6,"button",4),f("click",function(){return o.create()}),t(7,"mat-icon"),n(8,"add"),e(),n(9," Novo Plano "),e()(),t(10,"div",5),P(11,qe,39,5,"mat-card",6,Ue),e(),t(13,"app-paginator",7),f("pageChange",function(w){return o.onPageChange(w)}),e()()),a&2&&(l(6),u("disabled",o.typeUser=="A"),l(5),F(o.plans),l(2),u("totalItems",o.totalResults)("itemsPerPage",o.limit)("currentPage",o.currentPage))},dependencies:[te,M,y,he,ge,Ee,O,N,Se],styles:[".plan-card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 8px #0000001a;padding:1.5rem;width:30rem;min-height:30rem}.edit-button[_ngcontent-%COMP%]{color:#4768ff;border-radius:5px}.delete-button[_ngcontent-%COMP%]{color:#ff4747;border-radius:5px}.line-clamp-5[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;overflow:hidden}.line-clamp-3[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}"]})}return i})();function ze(i,d){i&1&&(t(0,"mat-error"),n(1," Campo Obrigatorio "),e())}function He(i,d){i&1&&(t(0,"mat-error"),n(1," Nome tem limite de 20 caracteres "),e())}function Qe(i,d){i&1&&(t(0,"mat-error"),n(1," Campo Obrigat\xF3rio "),e())}function We(i,d){i&1&&(t(0,"mat-error"),n(1," Pre\xE7o inv\xE1lido (deve ser um n\xFAmero com at\xE9 2 casas decimais) "),e())}function Je(i,d){i&1&&(t(0,"mat-error"),n(1," Campo Obrigat\xF3rio "),e())}function Ke(i,d){i&1&&(t(0,"mat-error"),n(1," Campo Obrigat\xF3rio "),e())}function Xe(i,d){i&1&&(t(0,"mat-error"),n(1," Campo Obrigat\xF3rio "),e())}function Ye(i,d){i&1&&(t(0,"mat-error"),n(1," limite de 120 caracteres "),e())}function Ze(i,d){if(i&1&&(t(0,"mat-option",18),n(1),e()),i&2){let r=d.$implicit;u("value",r.valor),l(),p(" ",r.label," ")}}function et(i,d){i&1&&(t(0,"mat-error"),n(1," O desconto n\xE3o pode ser negativo. "),e())}function tt(i,d){i&1&&(t(0,"mat-error"),n(1," O desconto n\xE3o pode ser maior que 100%. "),e())}function it(i,d){if(i&1){let r=D();t(0,"div",19)(1,"div",20)(2,"mat-form-field",21),_(3,"input",22),e(),t(4,"mat-icon",23),f("click",function(){let o=b(r).index,m=C();return v(m.removeBeneficio(o))}),n(5," backspace "),e()()()}if(i&2){let r=d.index;u("formGroupName",r)}}var Ne=(()=>{class i{httpMethods;formBuilder;router;route;action="";pathUrlPlan=T.PLAN;formGroup;created=!0;gymId="";title="Cria\xE7\xE3o de Plano";diasSemana=[{label:"Domingo",valor:1},{label:"Segunda",valor:2},{label:"Ter\xE7a",valor:3},{label:"Quarta",valor:4},{label:"Quinta",valor:5},{label:"Sexta",valor:6},{label:"S\xE1bado",valor:7}];constructor(r,a,o,m){this.httpMethods=r,this.formBuilder=a,this.router=o,this.route=m,this.formGroup=this.formBuilder.group({id:[],nome:["",[g.required,g.maxLength(20)]],preco:["",[g.required,g.pattern("^[0-9]+(.[0-9]{1,2})?$")]],duracao:["",g.required],descricao:["",[g.required,g.maxLength(250)]],beneficios:this.formBuilder.array([]),desconto:[0,[g.min(0),g.max(100)]],dias_permitidos:[[]],academia:[""]})}get benefits(){return this.formGroup.get("beneficios")}addBeneficio(){let r=this.formBuilder.group({beneficio:["",[g.maxLength(50)]]});this.benefits.push(r)}removeBeneficio(r){this.benefits.removeAt(r)}ngOnInit(){this.getPlan(),this.retriveCallBack()}getPlan(){this.gymId=localStorage.getItem("academia"),this.gymId&&this.formGroup.patchValue({academia:this.gymId})}retriveCallBack(){this.route.paramMap.subscribe(r=>{this.action=r.get("action"),this.created=!(this.action&&this.action!=="create"),this.created||(this.title="Edi\xE7\xE3o de Plano",this.httpMethods.get(`${this.pathUrlPlan}${this.action}/`).subscribe(a=>{this.benefits.clear(),Array.isArray(a.beneficios)&&a.beneficios.forEach(o=>{this.benefits.push(this.formBuilder.group({beneficio:[o,[g.maxLength(50)]]}))}),this.formGroup.patchValue({id:a.id,nome:a.nome,preco:a.preco,duracao:a.duracao,descricao:a.descricao,desconto:a.desconto,academia:this.gymId,dias_permitidos:Array.isArray(a.dias_permitidos)?a.dias_permitidos.map(Number):[]})}))})}saveOrUpdate(r){r.beneficios=this.benefits.value.map(o=>o.beneficio).filter(o=>o.trim()!=="");let a=H(z({},r),{academia:Number(this.gymId),preco:parseFloat(r.preco.toString()),desconto:parseFloat(r.desconto.toString()),dias_permitidos:r.dias_permitidos?.map(Number)});this.created?this.httpMethods.post(this.pathUrlPlan,a).subscribe(()=>{this.router.navigate(["/plan/list"]).then()}):this.httpMethods.patch(`${this.pathUrlPlan}`,a).subscribe(()=>{this.router.navigate(["/plan/list"]).then()})}static \u0275fac=function(a){return new(a||i)(c(G),c(ue),c(k),c(Y))};static \u0275cmp=x({type:i,selectors:[["app-form"]],standalone:!0,features:[S],decls:49,vars:18,consts:[[1,"container","p-3"],[1,"mat-elevation-z2","form",3,"ngSubmit","formGroup"],["appearance","fill",1,"nome"],["matInput","","formControlName","nome","placeholder","Digite o nome do plano"],[1,"flex","align-items-center","justify-content-between","gap-2"],["appearance","fill",2,"width","50%"],["matInput","","type","number","formControlName","preco","placeholder","Digite o pre\xE7o"],["matInput","","type","number","formControlName","duracao","placeholder","Dura\xE7\xE3o em meses",3,"min"],["appearance","fill"],["matInput","","formControlName","descricao","placeholder","Digite uma descri\xE7\xE3o","rows","4"],["formControlName","dias_permitidos","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","desconto","placeholder","Digite o desconto",3,"min","max"],[1,"flex","justify-content-between","align-items-center","align-content-center"],["mat-raised-button","","type","button","mat-button","",1,"add_button","w-3","text-white","bg-black-alpha-80",3,"click"],["formArrayName","beneficios"],[3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",1,"save",3,"disabled"],[3,"value"],[3,"formGroupName"],[1,"flex","align-items-center","justify-content-between","flex-wrap"],["appearance","outline",2,"width","50%","margin-bottom","1px"],["matInput","","formControlName","beneficio","placeholder",""],["aria-label","Remover benef\xEDcio",2,"color","red","cursor","pointer",3,"click"]],template:function(a,o){if(a&1&&(t(0,"div",0)(1,"form",1),f("ngSubmit",function(){return o.saveOrUpdate(o.formGroup.value)}),t(2,"h2"),n(3),e(),t(4,"mat-form-field",2)(5,"mat-label"),n(6,"Nome"),e(),_(7,"input",3),h(8,ze,2,0,"mat-error")(9,He,2,0,"mat-error"),e(),t(10,"div",4)(11,"mat-form-field",5)(12,"mat-label"),n(13,"Pre\xE7o"),e(),_(14,"input",6),h(15,Qe,2,0,"mat-error")(16,We,2,0,"mat-error"),e(),t(17,"mat-form-field",5)(18,"mat-label"),n(19," Dura\xE7\xE3o "),e(),_(20,"input",7),h(21,Je,2,0,"mat-error")(22,Ke,2,0,"mat-error"),e()(),t(23,"mat-form-field",8)(24,"mat-label"),n(25,"Descri\xE7\xE3o"),e(),_(26,"textarea",9),h(27,Xe,2,0,"mat-error")(28,Ye,2,0,"mat-error"),e(),t(29,"mat-form-field",8)(30,"mat-label"),n(31,"Dias Permitidos"),e(),t(32,"mat-select",10),h(33,Ze,2,2,"mat-option",11),e()(),t(34,"mat-form-field",8)(35,"mat-label"),n(36,"Desconto em produtos (%)"),e(),_(37,"input",12),h(38,et,2,0,"mat-error")(39,tt,2,0,"mat-error"),e(),t(40,"div",13)(41,"h3"),n(42,"Beneficios"),e(),t(43,"button",14),f("click",function(){return o.addBeneficio()}),n(44,"Adicionar Benef\xEDcio"),e()(),t(45,"div",15),h(46,it,6,1,"div",16),e(),t(47,"button",17),n(48,"Salvar"),e()()()),a&2){let m,w,B,L,A,R,V,U,$,q;l(),u("formGroup",o.formGroup),l(2),E(o.title),l(5),s((m=o.formGroup.get("nome"))!=null&&m.hasError("required")?8:-1),l(),s((w=o.formGroup.get("nome"))!=null&&w.hasError("maxlength")?9:-1),l(6),s((B=o.formGroup.get("preco"))!=null&&B.hasError("required")?15:-1),l(),s((L=o.formGroup.get("preco"))!=null&&L.hasError("pattern")?16:-1),l(4),u("min",1),l(),s((A=o.formGroup.get("duracao"))!=null&&A.hasError("required")?21:-1),l(),s((R=o.formGroup.get("duracao"))!=null&&R.hasError("required")?22:-1),l(5),s((V=o.formGroup.get("descricao"))!=null&&V.hasError("required")?27:-1),l(),s((U=o.formGroup.get("descricao"))!=null&&U.hasError("maxlength")?28:-1),l(5),u("ngForOf",o.diasSemana),l(4),u("min",0)("max",100),l(),s(($=o.formGroup.get("desconto"))!=null&&$.hasError("min")?38:-1),l(),s((q=o.formGroup.get("desconto"))!=null&&q.hasError("max")?39:-1),l(7),u("ngForOf",o.benefits.controls),l(),u("disabled",!o.formGroup.valid)}},dependencies:[fe,re,ie,ae,ne,oe,pe,se,le,ce,me,de,K,xe,be,y,ve,Ce,M,De,ee],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.form[_ngcontent-%COMP%]{width:100%;max-width:800px;padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}mat-label[_ngcontent-%COMP%]{font-weight:700;color:#333}input[_ngcontent-%COMP%]{font-size:16px}button[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border:none;border-radius:4px;cursor:pointer}"]})}return i})();var Ge=[{path:"list",component:Oe},{path:"form/:action",component:Ne}];var Lt=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=W({type:i});static \u0275inj=Q({imports:[X,Z.forChild(Ge)]})}return i})();export{Lt as EmployeeModule};
