import"./chunk-42SUFC33.js";import{a as vt}from"./chunk-DOJ3H5UX.js";import{a as O,b as B,c as U,d as G,e as T,f as gt}from"./chunk-LHVLC5TS.js";import{b as _t}from"./chunk-O4NCNYFU.js";import{a as k}from"./chunk-GWEJ6O57.js";import{a as ht,b as Ct}from"./chunk-VIEVWMA7.js";import{b as lt,c as st,g as dt,j as ct,l as D}from"./chunk-CIJ5G4FK.js";import{D as tt,F as h,H as et,I as it,L as ot,N as nt,O as at,Q as rt,S as mt,b as g,d as Y,e as F,z as w}from"./chunk-3RHGMBTT.js";import"./chunk-EJJBCPAK.js";import{a as pt,c as ut,e as ft}from"./chunk-UT2SQGIQ.js";import{ga as X,i as Q,k as I,n as W}from"./chunk-H2QP3XJO.js";import{Ab as E,Db as J,Gb as M,Ib as S,Ic as K,Sb as a,Tb as Z,Ua as m,Ub as _,Va as d,Z as $,Zb as f,ga as u,ha as q,kb as x,oa as R,pa as j,pb as s,ub as C,vb as H,wb as b,xb as y,yb as n,zb as i}from"./chunk-KGKDVHTP.js";import{a as V,b as z}from"./chunk-JKOY2XUY.js";var xt=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-confirm-dialog-component"]],standalone:!0,features:[f],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","color","warn",3,"mat-dialog-close"]],template:function(e,r){e&1&&(n(0,"h1",0),a(1,"Confirma\xE7\xE3o"),i(),n(2,"div",1),a(3,"Voce tem certeza de que deseja excluir esse funcionario? Ele n\xE3o podera acessar novamente o sistema da academia"),i(),n(4,"div",2)(5,"button",3),a(6,"Cancelar"),i(),n(7,"button",4),a(8,"Confirmar"),i()()),e&2&&(m(5),s("mat-dialog-close",!1),m(2),s("mat-dialog-close",!0))},dependencies:[gt,B,U,T,G,F,g]})}return t})();var kt=(t,c)=>c.id;function Ot(t,c){if(t&1){let o=J();n(0,"mat-card",1)(1,"mat-card-content")(2,"div",3)(3,"div")(4,"strong"),a(5,"ID:"),i(),a(6),i(),n(7,"div")(8,"strong"),a(9,"Nome:"),i(),a(10),i(),n(11,"div")(12,"strong"),a(13,"Email:"),i(),a(14),i(),n(15,"div")(16,"strong"),a(17,"Cargo:"),i(),a(18),i()()(),n(19,"mat-card-actions")(20,"button",4),M("click",function(){let r=R(o).$implicit,l=S();return j(l.edit(r))}),n(21,"mat-icon"),a(22,"edit"),i()(),n(23,"button",5),M("click",function(){let r=R(o).$implicit,l=S();return j(l.disable(r))}),n(24,"mat-icon"),a(25,"delete"),i()()()()}if(t&2){let o=c.$implicit,e=S();m(6),_(" ",o.id,""),m(4),_(" ",o.nome,""),m(4),_(" ",o.username,""),m(4),_(" ",o.tipo_usuario,""),m(2),s("disabled",o.tipo_usuario=="D"||e.typeUser=="A"),m(3),s("disabled",o.tipo_usuario=="D"||e.typeUser=="A")}}var bt=(()=>{class t{httpMethods;router;dialog;snackBar;pathUrlEmployee=D.USERS;employers;gym_id="";typeUser="";getIdGym(){this.gym_id=localStorage.getItem("academia")}constructor(o,e,r,l){this.httpMethods=o,this.router=e,this.dialog=r,this.snackBar=l}ngOnInit(){this.getIdGym(),this.seach(),this.getTypeUser()}getTypeUser(){this.typeUser=localStorage.getItem("tipo_usuario")}seach(){this.httpMethods.get(this.pathUrlEmployee+`?academia=${this.gym_id}&active=true`).subscribe(o=>{this.employers=o},o=>{console.error("Erro ao carregar os dados do funcionarios:",o)})}create(){this.router.navigate(["/employee/form/create"]).then()}edit(o){this.router.navigate([`/employee/form/${o.id}`]).then()}disable(o){let e=this.dialog.open(xt),r="desativar_usuario";e.afterClosed().subscribe(l=>{if(l){let p="Funcionario apagado";this.httpMethods.disable(this.pathUrlEmployee,o,r).subscribe(()=>{this.seach()}),this.snackBar.open(p,"fechar",{duration:5e3,verticalPosition:"top"})}})}static \u0275fac=function(e){return new(e||t)(d(k),d(I),d(O),d(w))};static \u0275cmp=u({type:t,selectors:[["app-list"]],standalone:!0,features:[f],decls:7,vars:0,consts:[[1,"employer-list"],["appearance","outlined",1,"employer-card"],["mat-raised-button","","color","primary",1,"add_button",3,"click"],[1,"employee-info"],["mat-icon-button","","color","primary",3,"click","disabled"],["mat-icon-button","","color","warn",3,"click","disabled"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h2"),a(2,"Funcion\xE1rios"),i(),b(3,Ot,26,6,"mat-card",1,kt),n(5,"button",2),M("click",function(){return r.create()}),a(6,"Novo funcionario"),i()()),e&2&&(m(3),y(r.employers))},dependencies:[_t,Ct,ht,F,g,Y,pt,ut,ft],styles:[".employer-card[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:16px;margin-left:1%;width:98%}mat-card-content[_ngcontent-%COMP%]   .employee-info[_ngcontent-%COMP%]{display:flex;gap:20px}h2[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;text-align:center}button[_ngcontent-%COMP%]{font-size:1rem}"]})}return t})();var yt=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-user-relink-confirmation"]],standalone:!0,features:[f],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"mat-dialog-close"],["mat-button","","color","warn",3,"mat-dialog-close"]],template:function(e,r){e&1&&(n(0,"h1",0),a(1,"Confirma\xE7\xE3o"),i(),n(2,"div",1),a(3,"J\xE1 existe um usuario com esse email cadastrado em uma academia, Deseja vincular esse usuario a essa academia? (Ele n\xE3o podera acessar o sistema da academia anterior)"),i(),n(4,"div",2)(5,"button",3),a(6,"Cancelar"),i(),n(7,"button",4),a(8,"Confirmar"),i()()),e&2&&(m(5),s("mat-dialog-close",!1),m(2),s("mat-dialog-close",!0))},dependencies:[U,G,T,g,B]})}return t})();function Bt(t,c){t&1&&(n(0,"mat-error"),a(1," Campo Obrigatorio "),i())}function Ut(t,c){t&1&&(n(0,"mat-error"),a(1," Campo Obrigatorio "),i())}function Gt(t,c){t&1&&(n(0,"mat-error"),a(1," Insira um email valido "),i())}function Tt(t,c){t&1&&(n(0,"mat-error"),a(1," Campo Obrigatorio "),i())}function Pt(t,c){t&1&&(n(0,"mat-error"),a(1," Deve conter no minimo 6 caracteres. "),i())}function Rt(t,c){t&1&&(n(0,"mat-error"),a(1," Deve conter um n\xFAmero e um caracter especial "),i())}function jt(t,c){if(t&1&&(n(0,"mat-option",9),a(1),i()),t&2){let o=c.$implicit;s("value",o.value),m(),_(" ",o.viewValue," ")}}var Et=(()=>{class t{httpMethods;formBuilder;router;route;snackBar;dialog;action="";pathUrlEmployee=D.USERS;formGroup;created=!0;gymId="";title="Cadastro de funcion\xE1rio";getGym(){this.gymId=localStorage.getItem("academia"),this.gymId&&this.formGroup.patchValue({academia:this.gymId})}constructor(o,e,r,l,p,v){this.httpMethods=o,this.formBuilder=e,this.router=r,this.route=l,this.snackBar=p,this.dialog=v,this.formGroup=this.formBuilder.group({id:[],nome:["",h.required],username:["",[h.required,h.email]],password:["",[h.required,h.minLength(6),h.pattern("^(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]+$")]],tipo_usuario:["",h.required],academia:[""]})}ngOnInit(){this.getGym(),this.retriveCallBack()}cargos=[{value:"G",viewValue:"Gerente"},{value:"A",viewValue:"Atendente"}];retriveCallBack(){this.route.paramMap.subscribe(o=>{this.action=o.get("action"),this.created=!(this.action&&this.action!=="create"),this.created||(this.title="Edi\xE7\xE3o de funcion\xE1rio",this.httpMethods.get(this.pathUrlEmployee+this.action+"/").subscribe(e=>{this.formGroup.setValue({id:e.id,nome:e.nome,username:e.username,password:"",tipo_usuario:e.tipo_usuario,academia:this.gymId})}))})}saveOrUpdate(o){if(this.created)this.httpMethods.get(this.pathUrlEmployee+`?email=${o.username}`).subscribe(e=>{if(e&&e.length>0)this.dialog.open(yt).afterClosed().subscribe(l=>{if(l){let p=e[0].id,v=z(V({},o),{usuario:p});this.httpMethods.post(this.pathUrlEmployee+"alterar_academia/",v).subscribe(()=>{this.router.navigate(["/employee/list"])})}});else{let r="Funcionario cadastrado";this.httpMethods.post(this.pathUrlEmployee,o).subscribe(()=>{this.router.navigate(["/employee/list"]).then(),this.snackBar.open(r,"Fechar",{duration:5e3,verticalPosition:"top"})})}});else{let e="Funcionario Atualizado";this.httpMethods.patch(this.pathUrlEmployee,o).subscribe(()=>{this.router.navigate(["/employee/list"]).then(),this.snackBar.open(e,"Fechar",{duration:5e3,verticalPosition:"top"})})}}static \u0275fac=function(e){return new(e||t)(d(k),d(rt),d(I),d(Q),d(w),d(O))};static \u0275cmp=u({type:t,selectors:[["app-form"]],standalone:!0,features:[f],decls:30,vars:9,consts:[[1,"container"],[1,"mat-elevation-z2","form",3,"ngSubmit","formGroup"],[1,"form-title"],["appearance","fill",1,"nome"],["matInput","","formControlName","nome","placeholder","Digite o nome do funcionario"],["appearance","fill"],["matInput","","type","email","formControlName","username","placeholder","Digite o email do funcinario"],["matInput","","type","password","formControlName","password","placeholder","Digite uma senha"],["formControlName","tipo_usuario","ARIA-PLACEHOLDER","Cargo"],[3,"value"],["mat-raised-button","","color","primary","type","submit",1,"save",3,"disabled"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"form",1),M("ngSubmit",function(){return r.saveOrUpdate(r.formGroup.value)}),n(2,"h2",2),a(3),i(),n(4,"mat-form-field",3)(5,"mat-label"),a(6,"Nome"),i(),E(7,"input",4),x(8,Bt,2,0,"mat-error"),i(),n(9,"mat-form-field",5)(10,"mat-label"),a(11,"Email"),i(),E(12,"input",6),x(13,Ut,2,0,"mat-error")(14,Gt,2,0,"mat-error"),i(),n(15,"mat-form-field",5)(16,"mat-label"),a(17,"Senha"),i(),E(18,"input",7),x(19,Tt,2,0,"mat-error")(20,Pt,2,0,"mat-error")(21,Rt,2,0,"mat-error"),i(),n(22,"mat-form-field",5)(23,"mat-label"),a(24,"Cargo"),i(),n(25,"mat-select",8),b(26,jt,2,2,"mat-option",9,H),i()(),n(28,"button",10),a(29,"Salvar"),i()()()),e&2){let l,p,v,A,L,N;m(),s("formGroup",r.formGroup),m(2),Z(r.title),m(5),C((l=r.formGroup.get("nome"))!=null&&l.hasError("required")?8:-1),m(5),C((p=r.formGroup.get("username"))!=null&&p.hasError("required")?13:-1),m(),C((v=r.formGroup.get("username"))!=null&&v.hasError("email")?14:-1),m(5),C((A=r.formGroup.get("password"))!=null&&A.hasError("required")?19:-1),m(),C((L=r.formGroup.get("password"))!=null&&L.hasError("minlength")?20:-1),m(),C((N=r.formGroup.get("password"))!=null&&N.hasError("pattern")?21:-1),m(5),y(r.cargos),m(2),s("disabled",!r.formGroup.valid)}},dependencies:[g,dt,ct,lt,mt,ot,tt,et,it,nt,at,vt,X,st],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f4f7fc}.form[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:40px;background-color:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a;font-family:Arial,sans-serif}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;color:#333;margin-bottom:30px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}mat-label[_ngcontent-%COMP%]{font-weight:600;color:#333}input[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:4px;border:1px solid #ddd}button[_ngcontent-%COMP%]{width:100%;padding:14px;font-size:16px;border:none;border-radius:4px;cursor:pointer;background-color:#00ff2a;color:#fff;transition:background-color .3s ease-in-out}.input-field[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:16px}button[disabled][_ngcontent-%COMP%]{background-color:#b0bec5;cursor:not-allowed}@media (max-width: 600px){.form[_ngcontent-%COMP%]{padding:20px}.form-title[_ngcontent-%COMP%]{font-size:20px}button[_ngcontent-%COMP%]{font-size:14px;padding:12px}}"]})}return t})();var St=[{path:"list",component:bt},{path:"form/:action",component:Et}];var Ce=(()=>{class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=q({type:t});static \u0275inj=$({imports:[K,W.forChild(St)]})}return t})();export{Ce as EmployeeModule};
