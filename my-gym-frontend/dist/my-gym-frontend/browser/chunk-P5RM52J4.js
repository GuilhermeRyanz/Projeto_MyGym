import{a as se,b as ce,c as pe,d as de,e as fe,f as ue,g as ge,h as he,i as _e,j as be,k as Me}from"./chunk-2VBYREBR.js";import"./chunk-3YTOO552.js";import{a as oe,b as me,c as le}from"./chunk-DUHGU6EU.js";import{a as w}from"./chunk-CQ6IIDQT.js";import{a as K}from"./chunk-RFQI5BNG.js";import{b as ne,g as ae,j as ie,l as v}from"./chunk-ZVP2WZDK.js";import{H as ee,Y as te,a as J,q as Q,u as X,x as Z}from"./chunk-KF24QTHE.js";import"./chunk-EJJBCPAK.js";import{a as S,c as re}from"./chunk-2TN3GL7T.js";import{l as Y,p as q}from"./chunk-V6KZPOXC.js";import{$ as R,$b as B,$c as G,Bb as a,Cb as i,Db as E,E as O,Eb as g,Fb as h,Hb as L,Kb as _,Mb as T,Sc as U,Uc as $,Vc as z,Wc as V,Xa as m,Ya as p,Yb as r,Yc as W,Zb as b,Zc as P,_b as f,ac as A,bc as H,cc as N,ec as y,f as D,ia as x,ic as M,ja as k,jc as C,nb as d,qa as j,ra as F,sb as c}from"./chunk-BE5RT4AU.js";import"./chunk-JKOY2XUY.js";function Se(e,l){e&1&&(a(0,"mat-header-cell",15),r(1," Valor (R$) "),i())}function we(e,l){if(e&1&&(a(0,"mat-cell",16)(1,"strong"),r(2),M(3,"number"),i()()),e&2){let t=l.$implicit;m(2),f("R$ ",C(3,1,t.valor,"1.2-2"),"")}}function Ie(e,l){e&1&&(a(0,"mat-header-cell",15),r(1," Data "),i())}function Ee(e,l){if(e&1&&(a(0,"mat-cell",16),r(1),M(2,"date"),i()),e&2){let t=l.$implicit;m(),f(" ",C(2,1,t.data_pagamento,"dd/MM/yyyy")," ")}}function Te(e,l){e&1&&(a(0,"mat-header-cell"),r(1," Tipo de Pagamento"),i())}function De(e,l){e&1&&(a(0,"span"),r(1,"Cr\xE9dito"),i())}function Oe(e,l){e&1&&(a(0,"span"),r(1,"Pix"),i())}function Re(e,l){e&1&&(a(0,"span"),r(1,"Dinheiro"),i())}function ke(e,l){e&1&&(a(0,"span"),r(1,"Outro"),i())}function je(e,l){if(e&1&&(a(0,"mat-cell")(1,"span",17),d(2,De,2,0,"span",18)(3,Oe,2,0,"span",18)(4,Re,2,0,"span",18)(5,ke,2,0,"span",19),i()()),e&2){let t=l.$implicit;m(),c("ngSwitch",t.tipo_pagamento),m(),c("ngSwitchCase","C"),m(),c("ngSwitchCase","P"),m(),c("ngSwitchCase","D")}}function Fe(e,l){e&1&&(a(0,"mat-header-cell",15),r(1," Plano "),i())}function Le(e,l){if(e&1&&(a(0,"mat-cell",16),r(1),i()),e&2){let t=l.$implicit;m(),f(" ",t.plano_nome," ")}}function Be(e,l){e&1&&E(0,"mat-header-row",20)}function Ae(e,l){e&1&&E(0,"mat-row",21)}var I=(()=>{class e{dialogRef;httpMethods;data;memberInfo;payments=new Me;displayedColumns=["valor","data_pagamento","tipo_pagamento","plano_nome"];urlPathPayments=v.PAYMENT;constructor(t,o,n){this.dialogRef=t,this.httpMethods=o,this.data=n,this.memberInfo=n?.memberInfo||{}}fechar(){this.dialogRef.close()}ngOnInit(){this.payments_seach()}payments_seach(){this.httpMethods.get(this.urlPathPayments+`?aluno=${this.memberInfo?.aluno?.id}&academia=${this.memberInfo?.plano?.academia}`).subscribe(t=>{this.payments=t})}static \u0275fac=function(o){return new(o||e)(p(oe),p(w),p(me))};static \u0275cmp=x({type:e,selectors:[["app-member-payments"]],standalone:!0,features:[y],decls:27,vars:5,consts:[[1,"p-4"],[1,"flex","align-items-center","gap-2"],[1,"p-4","shadow-lg","rounded-lg",2,"background-color","#ededed","border-radius","2px"],[1,"text-gray-700","text-lg","font-semibold","border-b","pb-2"],[1,"mat-elevation-z1","w-full","mt-3",2,"background-color","#fafafa",3,"dataSource"],["matColumnDef","valor"],["class","text-gray-600 font-medium",4,"matHeaderCellDef"],["class","py-3 px-2",4,"matCellDef"],["matColumnDef","data_pagamento"],["matColumnDef","tipo_pagamento"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","plano_nome"],["class","bg-gray-100",4,"matHeaderRowDef"],["class","hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],[1,"text-gray-600","font-medium"],[1,"py-3","px-2"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"bg-gray-100"],[1,"hover:bg-gray-50"]],template:function(o,n){o&1&&(a(0,"div",0)(1,"div")(2,"h3",1)(3,"mat-icon"),r(4,"credit_card"),i(),r(5),i(),a(6,"p"),r(7),i()(),a(8,"mat-card",2)(9,"h1",3),r(10," Hist\xF3rico de Pagamentos "),i(),a(11,"mat-table",4),g(12,5),d(13,Se,2,0,"mat-header-cell",6)(14,we,4,4,"mat-cell",7),h(),g(15,8),d(16,Ie,2,0,"mat-header-cell",6)(17,Ee,3,4,"mat-cell",7),h(),g(18,9),d(19,Te,2,0,"mat-header-cell",10)(20,je,6,4,"mat-cell",11),h(),g(21,12),d(22,Fe,2,0,"mat-header-cell",6)(23,Le,2,1,"mat-cell",7),h(),d(24,Be,1,0,"mat-header-row",13)(25,Ae,1,0,"mat-row",14),i()()(),r(26,`]
`)),o&2&&(m(5),f(" Pagamentos de ",n.memberInfo==null||n.memberInfo.aluno==null?null:n.memberInfo.aluno.nome," "),m(2),f("Email: ",n.memberInfo==null||n.memberInfo.aluno==null?null:n.memberInfo.aluno.email,""),m(4),c("dataSource",n.payments),m(13),c("matHeaderRowDef",n.displayedColumns),m(),c("matRowDefColumns",n.displayedColumns))},dependencies:[se,de,fe,pe,ue,_e,be,W,ce,he,ge,K,S,$,z,V,P],styles:[".mat-mdc-dialog-content[_ngcontent-%COMP%]{padding:20px}"]})}return e})();function He(e,l){if(e&1){let t=L();a(0,"mat-card",9),_("click",function(){let n=j(t).$implicit,s=T();return F(s.selectMember(n))}),a(1,"mat-card-content")(2,"div",10)(3,"div",11),r(4),i(),a(5,"div",12)(6,"div",13),r(7),i(),a(8,"div",14),r(9),i()()(),a(10,"div",15)(11,"div",16)(12,"span"),r(13,"Plano Atual:"),i(),a(14,"strong"),r(15),i()(),a(16,"div",16)(17,"span"),r(18,"Matr\xEDcula:"),i(),a(19,"strong"),r(20),i()()()(),a(21,"div",17)(22,"span",18),r(23,"Ver pagamentos"),i()()()}if(e&2){let t=l.$implicit,o=T();m(4),f(" ",o.getInitials(t.aluno.nome)," "),m(3),b(t.aluno.nome),m(2),b(t.aluno.email),m(6),b(t.plano.nome),m(5),b(t.aluno.matricula)}}var xe=(()=>{class e{httpMethods;router;snackBar;dialog;pathUrlMemberPlan=v.MEMBERPLAN;members;gym_id="";typeUser="";searchTerm="";limit=12;totalResults=0;currentPage=0;searchChanged=new D;constructor(t,o,n,s){this.httpMethods=t,this.router=o,this.snackBar=n,this.dialog=s}ngOnInit(){this.getIdGym(),this.search(),this.getTypeUser(),this.searchChanged.pipe(O(100)).subscribe(t=>{this.searchMember(t,0)})}getIdGym(){this.gym_id=localStorage.getItem("academia")}getTypeUser(){this.typeUser=localStorage.getItem("tipo_usuario")}search(){this.searchMember(this.searchTerm,0)}searchMember(t="",o=0,n=this.limit){let s={expand:["aluno","plano"],academia:this.gym_id,active:!0,limit:n,offset:o};t&&(s.search=t),this.httpMethods.getPaginated(this.pathUrlMemberPlan,s).subscribe(u=>{this.members=u.results,this.totalResults=u.count,this.currentPage=o/n})}nextPage(){let t=Math.ceil(this.totalResults/this.limit)-1;if(this.currentPage<t){let o=(this.currentPage+1)*this.limit;this.searchMember(this.searchTerm,o)}}prevPage(){if(this.currentPage>0){let t=(this.currentPage-1)*this.limit;this.searchMember(this.searchTerm,t)}}trackById(t,o){return o.aluno.id}getInitials(t){if(!t)return"";let n=t.trim().split(" ").map(s=>s.charAt(0).toUpperCase()).join("");return n.length>2?n.substring(0,2):n}selectMember(t){this.dialog.open(I,{width:"40rem",maxWidth:"none",data:{memberInfo:t}})}onSearchChange(t){this.searchTerm=t,this.searchChanged.next(t)}static \u0275fac=function(o){return new(o||e)(p(w),p(Y),p(te),p(le))};static \u0275cmp=x({type:e,selectors:[["app-members-list"]],standalone:!0,features:[y],decls:19,vars:10,consts:[[1,"container"],[1,"title"],[1,"subtitle","flex","justify-content-center"],["appearance","outline",1,"search","w-30rem","flex","align-items-center"],["matInput","text","placeholder","Digite o nome ou matricula",3,"ngModelChange","input","ngModel"],[1,"member-list","ml-4"],["class","member-card",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"pagination","flex","justify-content-center","gap-2","mt-4"],["mat-raised-button","",3,"click","disabled"],[1,"member-card",3,"click"],[1,"member-info","flex","align-items-center"],[1,"avatar","align-items-center"],[1,"details","flex-column"],[1,"name"],[1,"email"],[1,"extra-info"],[1,"info-row"],[1,"footer","p-2","flex","justify-content-center"],[1,"ver-pagamentos"]],template:function(o,n){o&1&&(a(0,"div",0)(1,"h2",1),r(2,"Pagamentos por Aluno"),i(),a(3,"p",2),r(4,"Selecione um aluno para ver seu hist\xF3rico de pagamentos"),i(),a(5,"mat-form-field",3)(6,"mat-label"),r(7,"Buscar aluno"),i(),a(8,"input",4),N("ngModelChange",function(u){return H(n.searchTerm,u)||(n.searchTerm=u),u}),_("input",function(){return n.onSearchChange(n.searchTerm)}),i()(),a(9,"div",5),d(10,He,24,5,"mat-card",6),i(),a(11,"div",7)(12,"button",8),_("click",function(){return n.prevPage()}),r(13,"Anterior"),i(),a(14,"span"),r(15),M(16,"number"),i(),a(17,"button",8),_("click",function(){return n.nextPage()}),r(18,"Pr\xF3xima"),i()()()),o&2&&(m(8),A("ngModel",n.searchTerm),m(2),c("ngForOf",n.members)("ngForTrackBy",n.trackById),m(2),c("disabled",n.currentPage===0),m(3),B("P\xE1gina ",n.currentPage+1," de ",C(16,7,n.totalResults/n.limit,"1.0-0"),""),m(2),c("disabled",n.currentPage>=n.totalResults/n.limit-1))},dependencies:[ee,Q,X,Z,ae,ie,ne,S,re,U,P,J],styles:[".container[_ngcontent-%COMP%]{padding:20px}.title[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;font-size:1.5rem;color:#333}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#909090}.search[_ngcontent-%COMP%]{margin:auto}.member-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.member-card[_ngcontent-%COMP%]{width:95%;background:#f8f8f8;border-radius:12px;box-shadow:0 2px 4px #0000001a;transition:all .3s ease-in-out;cursor:pointer}.member-card[_ngcontent-%COMP%]:hover{transform:scale(1.06);box-shadow:0 4px 8px #00000026}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#53cd55;color:#fff;font-weight:700;font-size:16px;display:flex;align-items:center;justify-content:center;border-radius:50%;text-transform:uppercase}.member-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;line-height:1.2}.name[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#333;margin-bottom:2px}.email[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.extra-info[_ngcontent-%COMP%]{margin-top:10px;padding-top:10px;border-top:1px solid #eee}.info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.9rem;color:#444}.footer[_ngcontent-%COMP%]{background:#ededed;font-size:.9rem;color:#969696;border-top:1px solid #eee;border-radius:0 0 9px 9px}.member-card[_ngcontent-%COMP%]:hover   .footer[_ngcontent-%COMP%]{color:#fff;background-color:#53cd55}"]})}return e})();var ye=[{path:"membersListPayments",component:xe},{path:"memberPayments",component:I}];var dt=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=k({type:e});static \u0275inj=R({imports:[G,q.forChild(ye)]})}return e})();export{dt as PaymentsModule};
