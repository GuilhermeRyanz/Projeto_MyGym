import{ca as ye}from"./chunk-RJASCPAO.js";import{a as F,b as Y,c as ve,d as q,e as Q,f as X,g as _e,h as A}from"./chunk-Q4DX7BQM.js";import{a as ue}from"./chunk-EKKCXAYC.js";import{c as x,e as E,f as T,g as O}from"./chunk-ZW7EKFDA.js";import{a as w}from"./chunk-EPO6Q7SL.js";import{a as v,b as pe}from"./chunk-AWHMWCAF.js";import{b as G,d as W,g as U,j as $,k as Me,l as _}from"./chunk-CQRFBGBQ.js";import{I as j,J as ge,Z as he,q as de,u as ce,x as fe}from"./chunk-MLOVQ4ZF.js";import"./chunk-CARY4E7O.js";import{a as b,b as D,c as Ce,f as S,g as z}from"./chunk-LKV62IVN.js";import{ba as N,da as k,ea as H,fa as L,p as le}from"./chunk-MNF6TJHE.js";import{$ as ne,$c as V,Bb as a,Cb as i,Db as s,Hb as B,Kb as h,Wb as P,Xa as c,Ya as g,Yb as m,Yc as se,_b as R,ac as K,bc as Z,cc as ee,dc as I,ec as d,ia as p,ic as ie,ja as ae,jc as re,qa as M,ra as C,sb as f,vc as me}from"./chunk-BE5RT4AU.js";import"./chunk-JKOY2XUY.js";var be=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=p({type:o,selectors:[["app-help-mensage"]],standalone:!0,features:[d],decls:5,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""]],template:function(e,n){e&1&&(a(0,"h1",0),m(1,"Gr\xE1ficos de alunos por dia e hora"),i(),a(2,"div",1),m(3,"Esses gr\xE1ficos mostram a quantidade de alunos que realizaram check-ins, organizados por hor\xE1rio e dias da semana."),i(),s(4,"div",2))},dependencies:[E,T,O]})}return o})();var De=(()=>{class o{httpMethods;dialog;beginDate=new Date(new Date().setDate(new Date().getDate()-30));endDate=new Date;chartOption={};gym_id="";pathUrlMembersFlowByTime=_.MEMBERSFLOWBYTIME;constructor(t,e){this.httpMethods=t,this.dialog=e}ngOnInit(){this.getIdGym(),this.search()}getIdGym(){this.gym_id=localStorage.getItem("academia")}formatDate(t){let e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`}help(){this.dialog.open(be).afterClosed()}search(){let t=this.formatDate(this.beginDate),e=this.formatDate(this.endDate),n=`?data_inicio=${t}&data_fim=${e}&academia=${this.gym_id}`;this.httpMethods.get(this.pathUrlMembersFlowByTime+n).subscribe(r=>{let l=r.alunos_por_dia,u=r.alunos_por_hora,J=Object.keys(l),Ie=Object.values(l),ke=Object.keys(u),Ae=Object.values(u);this.chartOption={tooltip:{trigger:"axis"},legend:{data:["Fluxo de alunos por dia","Fluxo de alunos por hora"]},grid:[{top:"10%",left:"5%",right:"5%",bottom:"50%"},{top:"60%",left:"5%",right:"5%",bottom:"10%"}],xAxis:[{type:"category",data:J},{type:"category",data:ke,gridIndex:1,nameLocation:"middle",nameTextStyle:{fontSize:14,padding:20}}],yAxis:[{type:"value",name:"Qtd de Alunos",nameLocation:"end",nameTextStyle:{fontSize:14,padding:10}},{type:"value",gridIndex:1}],series:[{name:"Fluxo de alunos por dia",type:"line",data:Ie,smooth:!0},{name:"Fluxo de alunos por hora",type:"line",data:Ae,smooth:!0,xAxisIndex:1,yAxisIndex:1}]}})}static \u0275fac=function(e){return new(e||o)(g(w),g(x))};static \u0275cmp=p({type:o,selectors:[["app-members-flow-by-time-component"]],standalone:!0,features:[I([Y(),L(),{provide:k,useValue:A},{provide:N,useValue:"pt-BR"}]),d],decls:23,vars:7,consts:[["pickerBegin",""],["pickerEnd",""],[1,"members-flow-by-time"],[1,"help-icon",3,"click"],["appearance","outline"],["matInput","",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["echarts","",2,"height","400px",3,"options"]],template:function(e,n){if(e&1){let r=B();a(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title"),m(3," Fluxo de alunos por dia da semana e hora "),a(4,"div",3),h("click",function(){return M(r),C(n.help())}),a(5,"mat-icon"),m(6,"help"),i()()()(),a(7,"mat-card-content")(8,"mat-form-field",4)(9,"mat-label"),m(10,"Data de In\xEDcio"),i(),a(11,"input",5),ee("ngModelChange",function(u){return M(r),Z(n.beginDate,u)||(n.beginDate=u),C(u)}),h("dateChange",function(){return M(r),C(n.search())}),i(),s(12,"mat-datepicker-toggle",6)(13,"mat-datepicker",null,0),i(),a(15,"mat-form-field",4)(16,"mat-label"),m(17,"Data de Fim"),i(),a(18,"input",5),ee("ngModelChange",function(u){return M(r),Z(n.endDate,u)||(n.endDate=u),C(u)}),h("dateChange",function(){return M(r),C(n.search())}),i(),s(19,"mat-datepicker-toggle",6)(20,"mat-datepicker",null,1),i()(),s(22,"div",7),i()}if(e&2){let r=P(14),l=P(21);c(11),f("matDatepicker",r),K("ngModel",n.beginDate),c(),f("for",r),c(6),f("matDatepicker",l),K("ngModel",n.endDate),c(),f("for",l),c(3),f("options",n.chartOption)}},dependencies:[F,V,z,b,Ce,S,D,Me,$,U,G,W,j,de,ce,fe,Q,X,q,H,pe,v],styles:[".members-flow-by-time[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]{display:flex;gap:9rem;margin-top:1rem}.members-flow-by-time[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}mat-card-content[_ngcontent-%COMP%]{display:flex;margin-top:12px}.help-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;margin-left:auto;display:flex;align-items:center;position:absolute;top:10px;right:10px}mat-form-field[_ngcontent-%COMP%]{padding:23px}mat-card-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.help-icon[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px}.help-icon[_ngcontent-%COMP%]:hover{opacity:.7;background-color:#f0f0f0;cursor:pointer;color:#b0bec5}.help-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;color:#4dca4f}"]})}return o})();var Se=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=p({type:o,selectors:[["app-help-mensage"]],standalone:!0,features:[d],decls:5,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""]],template:function(e,n){e&1&&(a(0,"h1",0),m(1,"Gr\xE1fico de distribui\xE7\xE3o de alunos por plano "),i(),a(2,"div",1),m(3,"Esse grafico mostram a quantidade de alunos dividos por planos ativos na academia."),i(),s(4,"div",2))},dependencies:[E,T,O]})}return o})();var we=(()=>{class o{httpMethods;dialog;gym_id="";pathUrlMemberPlanOverView=_.MEMBERPLANOVERVIEW;chartOption;membersall="0";constructor(t,e){this.httpMethods=t,this.dialog=e}ngOnInit(){this.getIdGym(),this.search()}getIdGym(){this.gym_id=localStorage.getItem("academia")}help(){this.dialog.open(Se).afterClosed()}search(){this.httpMethods.get(this.pathUrlMemberPlanOverView+`?academia=${this.gym_id}`).subscribe(t=>{let e=t.planos;if(this.membersall=t.total_sum,Array.isArray(e)){let n=e.map(r=>({name:r.plano,value:r.alunos_ativos}));this.chartOption={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"Distribui\xE7\xE3o de Alunos",type:"pie",radius:"55%",data:n,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}},t=>{console.error("Erro ao carregar os dados dos planos:",t)})}static \u0275fac=function(e){return new(e||o)(g(w),g(x))};static \u0275cmp=p({type:o,selectors:[["app-member-plans-overview-component"]],standalone:!0,features:[I([Y(),L(),{provide:k,useValue:A},{provide:N,useValue:"pt-BR"}]),d],decls:8,vars:2,consts:[[1,"members-plans-overview"],[1,"help-icon",3,"click"],["echarts","",2,"height","400px",3,"options"]],template:function(e,n){e&1&&(a(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),m(3),a(4,"div",1),h("click",function(){return n.help()}),a(5,"mat-icon"),m(6,"help"),i()()()(),s(7,"div",2),i()),e&2&&(c(3),R(" Distribui\xE7\xE3o de alunos por plano - Total de alunos ",n.membersall," "),c(4),f("options",n.chartOption))},dependencies:[b,S,F,z,D,v],styles:[".help-icon[_ngcontent-%COMP%]:hover{opacity:.7;background-color:#f0f0f0;cursor:pointer;color:#b0bec5}.help-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;color:#4dca4f}.help-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;margin-left:auto;display:flex;align-items:center;position:absolute;top:10px;right:10px}mat-card-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}"]})}return o})();var xe=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=p({type:o,selectors:[["app-help-mensage"]],standalone:!0,features:[d],decls:5,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""]],template:function(e,n){e&1&&(a(0,"h1",0),m(1,"Gr\xE1fico de ganhos mensais"),i(),a(2,"div",1),m(3,"Este gr\xE1fico mostra a receita arrecadada por cada um dos planos em um determinado m\xEAs. Selecione o m\xEAs e o ano que deseja consultar."),i(),s(4,"div",2))},dependencies:[E,T,O]})}return o})();var Ee=(()=>{class o{httpMethods;dialog;snackBar;gym_id="";pathUrlMonthltlyEarnings=_.MONTHLYEARNINGSCHARTS;chartOption;data=new Date;constructor(t,e,n){this.httpMethods=t,this.dialog=e,this.snackBar=n}ngOnInit(){this.getIdGym(),this.search()}setMonthAndYear(t,e){this.data=t,e.close(),this.search()}getIdGym(){this.gym_id=localStorage.getItem("academia")}help(){this.dialog.open(xe).afterClosed()}search(){let t=this.data.toISOString().slice(0,7);this.httpMethods.get(this.pathUrlMonthltlyEarnings+`?month=${t}&academia=${this.gym_id}`).subscribe(e=>{let n=e.total;n<=0&&this.snackBar.open("Sem dados de pagamentos para esse data","fechar",{duration:2e3,verticalPosition:"top"});let r=e.data;this.chartOption={title:{text:`Ganhos Mensais por Plano (${t}) - Total: R$ ${n}`,left:"center"},tooltip:{trigger:"item",formatter:"{b}: R$ {c}"},xAxis:{type:"category",data:r.map(l=>l.planos),name:"Planos",nameLocation:"middle",nameTextStyle:{fontSize:14,padding:20}},yAxis:{type:"value",name:"Receita (R$)",nameLocation:"end",nameTextStyle:{fontSize:14,padding:10}},series:[{data:r.map(l=>l.total),type:"bar",name:"Ganhos",itemStyle:{color:"#68c86c"}}]}})}static \u0275fac=function(e){return new(e||o)(g(w),g(x),g(he))};static \u0275cmp=p({type:o,selectors:[["app-monthly-earnings-chart"]],standalone:!0,features:[I([{provide:me,useValue:"pt-BR"}]),d],decls:17,vars:7,consts:[["pickerBegin",""],[1,"help-icon",3,"click"],["appearance","outline"],["matInput","","readonly","",3,"matDatepicker","value"],["matSuffix","",3,"for"],["startView","multi-year","panelClass","month-picker",3,"monthSelected"],["echarts","",2,"height","400px",3,"options"]],template:function(e,n){if(e&1){let r=B();a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),m(3," Ganhos mensais por plano "),a(4,"div",1),h("click",function(){return M(r),C(n.help())}),a(5,"mat-icon"),m(6,"help"),i()()()(),a(7,"mat-form-field",2)(8,"mat-label"),m(9,"Data"),i(),s(10,"input",3),ie(11,"date"),s(12,"mat-datepicker-toggle",4),a(13,"mat-datepicker",5,0),h("monthSelected",function(u){M(r);let J=P(14);return C(n.setMonthAndYear(u,J))}),i()(),a(15,"div"),s(16,"div",6),i()()}if(e&2){let r=P(14);c(10),f("matDatepicker",r)("value",re(11,4,n.data,"yyyy-MM")),c(2),f("for",r),c(4),f("options",n.chartOption)}},dependencies:[b,q,Q,X,U,$,G,W,ge,j,F,H,D,S,_e,se,v],styles:["mat-form-field[_ngcontent-%COMP%]{padding:23px;width:15%}.month-picker[_ngcontent-%COMP%]   .mat-calendar-body-cell-content[_ngcontent-%COMP%]{display:none}"]})}return o})();var Te=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=p({type:o,selectors:[["app-help-mensage"]],standalone:!0,features:[d],decls:5,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""]],template:function(e,n){e&1&&(a(0,"h1",0),m(1,"Gr\xE1fico de planos com novos alunos"),i(),a(2,"div",1),m(3,"Esse grafico mostra os planos em que houve um aumento no numeros de alunos nos ultimos 30 dias."),i(),s(4,"div",2))},dependencies:[E,T,O]})}return o})();var Oe=(()=>{class o{httpMethods;dialog;pathUrlPlansWithNewMembers=_.PLANSWITHNEWMEMBERS;gym_id="";chartOption;allnewMebers="0";constructor(t,e){this.httpMethods=t,this.dialog=e}ngOnInit(){this.getIdGym(),this.search()}getIdGym(){this.gym_id=localStorage.getItem("academia")}help(){this.dialog.open(Te).afterClosed()}search(){this.httpMethods.get(this.pathUrlPlansWithNewMembers+`?academia=${this.gym_id}`).subscribe(t=>{let e=t.novos_alunos.map(r=>r.plano_nome),n=t.novos_alunos.map(r=>r.novos_alunos);this.allnewMebers=t.total_sum,this.chartOption={tooltip:{trigger:"item",formatter:"{b}: {c} novos alunos"},series:[{name:"Novos Alunos por Plano",type:"pie",radius:[25,170],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:e.map((r,l)=>({name:r,value:n[l]}))}]}},t=>{console.error("Erro ao carregar os dados do gr\xE1fico:",t)})}static \u0275fac=function(e){return new(e||o)(g(w),g(x))};static \u0275cmp=p({type:o,selectors:[["app-plans-with-new-members-component"]],standalone:!0,features:[d],decls:8,vars:2,consts:[[1,"members-plans-overview"],[1,"help-icon",3,"click"],["echarts","",2,"height","400px",3,"options"]],template:function(e,n){e&1&&(a(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),m(3),a(4,"div",1),h("click",function(){return n.help()}),a(5,"mat-icon"),m(6,"help"),i()()()(),s(7,"div",2),i()),e&2&&(c(3),R(" Planos com novos alunos - Total de novos alunos ",n.allnewMebers," "),c(4),f("options",n.chartOption))},dependencies:[b,S,D,F,v]})}return o})();var Fe=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=p({type:o,selectors:[["app-dashboard"]],standalone:!0,features:[d],decls:12,vars:0,consts:[["mat-subheader",""],[1,"dashboard-container"],[1,"dashboard-item"],[1,"dashboard-item",2,"display","flex","width","100%"],[1,"chart-container"]],template:function(e,n){e&1&&(a(0,"h2",0),m(1,"Dashboards"),i(),a(2,"div",1)(3,"div",2),s(4,"app-members-flow-by-time-component"),i(),a(5,"div",3)(6,"div",4),s(7,"app-member-plans-overview-component"),i(),a(8,"div",4),s(9,"app-plans-with-new-members-component"),i()(),a(10,"div",2),s(11,"app-monthly-earnings-chart"),i()())},dependencies:[De,ue,we,Ee,Oe],styles:[".dashboard-container[_ngcontent-%COMP%]{gap:20px;padding:20px}.dashboard-item[_ngcontent-%COMP%]{margin-top:10px}h2[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;text-align:center}.chart-container[_ngcontent-%COMP%]{flex:1;margin:0 10px}app-member-plans-overview-component[_ngcontent-%COMP%], app-plans-with-new-members-component[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return o})();var Pe=[{path:"dashboard",component:Fe}];var to=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=ae({type:o});static \u0275inj=ne({providers:[{provide:k,useValue:A}],imports:[V,le.forChild(Pe),ve.forRoot({echarts:ye})]})}return o})();export{to as DashboardsModule};
