import{b as Be,d as Ne,e as Ve,f as je,g as Ge,h as qe}from"./chunk-4BIU32JB.js";import{a as Ue,b as $e,c as He,d as Ye,e as Xe,f as Qe,g as We,h as Ze,i as Ke,j as Je,k as ti}from"./chunk-2VBYREBR.js";import"./chunk-3YTOO552.js";import{a as ft}from"./chunk-T2GD2P46.js";import{a as Vt,b as jt,c as ht,h as Le}from"./chunk-DUHGU6EU.js";import{a as L}from"./chunk-CQ6IIDQT.js";import{a as H,b as De}from"./chunk-RFQI5BNG.js";import{b as A,c as Oe,d as Re,g as k,h as Fe,j as z,k as Ae,l as j}from"./chunk-ZVP2WZDK.js";import{A as st,D as lt,G as ct,H as dt,I as mt,J as ke,T as Bt,Y as pt,_ as Nt,a as O,c as zt,d as Yt,l as Ee,q as R,s as V,u as F,v as nt,x as at,y as rt,z as Lt}from"./chunk-KF24QTHE.js";import"./chunk-EJJBCPAK.js";import{a as ut,c as ze}from"./chunk-2TN3GL7T.js";import{A as $t,B as Ht,N as Ce,W as Se,Z as Pe,ba as Ie,da as Me,ea as Te,fa as we,j as _e,l as $,ma as ot,p as ve,q as be,s as xe,z as ye}from"./chunk-V6KZPOXC.js";import{$ as Mt,$b as Y,$c as yt,Ab as D,Ac as Ft,Ba as bt,Bb as r,Bc as xt,Cb as a,Db as _,Eb as W,Fb as Z,Ha as ne,Hb as M,Jc as he,Kb as u,Mb as h,Pb as le,Rb as Et,Rc as At,Sb as Dt,Tb as kt,Tc as fe,U as w,Ua as wt,Wb as Ot,Xa as l,Ya as m,Yb as s,Yc as ge,Zb as S,_ as Kt,_b as x,_c as it,ac as K,ba as _t,bc as J,cc as tt,db as ae,dc as ce,ea as qt,ec as P,f as B,gc as de,h as Zt,hc as me,ia as C,ic as G,ja as Tt,jc as et,ka as Jt,kb as re,kc as pe,lc as ue,nb as g,qa as v,qb as se,ra as b,rb as X,sa as vt,sb as p,ta as te,ub as Ut,wa as ee,wc as Rt,xb as I,ya as ie,yb as Q,za as oe,zb as E}from"./chunk-BE5RT4AU.js";import{a as gt}from"./chunk-JKOY2XUY.js";var fi=(o,c)=>c.id,gi=(o,c)=>({"bg-black-alpha-70":o,"text-gray":c});function _i(o,c){if(o&1){let t=M();r(0,"mat-card",6)(1,"section")(2,"div",8)(3,"div",9)(4,"span"),s(5),a(),r(6,"span"),s(7),a()(),r(8,"span"),s(9),G(10,"currency"),a()(),r(11,"span"),s(12),a()(),r(13,"div",8)(14,"div"),s(15," quantidade: "),r(16,"button",10),u("click",function(){let i=v(t).$implicit,n=h();return b(n.decreaseQuantity(i))}),s(17,"-"),a(),r(18,"span"),s(19),a(),r(20,"button",11),u("click",function(){let i=v(t).$implicit,n=h();return b(n.increaseQuantity(i))}),s(21,"+"),a()(),r(22,"button",12),u("click",function(){let i=v(t).$implicit,n=h();return b(n.addToCart(i))}),s(23," Adicionar "),a()()()}if(o&2){let t=c.$implicit,e=h();l(5),S(t.nome||"Produto sem nome "),l(2),S(t.categoria||"Sem categoria"),l(2),S(et(10,7,t.preco,"BRL")),l(3),x("Estoque: ",e.verification_total(t),""),l(7),x(" ",e.getQuantity(t.id)," "),l(3),p("ngClass",me(10,gi,e.verification_total(t)>0,e.verification_total(t)==0))("disabled",e.verification_total(t)==0)}}function vi(o,c){o&1&&(r(0,"div",7)(1,"div"),s(2," Nenhum produto encontrado "),a()())}var ii=(()=>{class o{dialogRef;data;httpMethods;snackBar;products=[];pathUrl=j.PRODUCT;searchTerm="";totalResults=0;currentPage=0;limit=6;offset=0;loading=!1;quantities={};constructor(t,e,i,n){this.dialogRef=t,this.data=e,this.httpMethods=i,this.snackBar=n}unsubscribe$=new B;ngOnInit(){this.loadProducts()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onScroll(){let t=document.getElementById("container-prod");if(!t)return;let e=t.scrollTop,i=t.scrollHeight,n=e+t.clientHeight>=i-10;this.loading||n&&this.products.length<this.totalResults&&this.loadProducts()}onSearch(){this.products=[],this.offset=0,this.totalResults=0,this.quantities={},this.loadProducts()}loadProducts(){if(this.offset>=this.totalResults&&this.offset!==0)return;this.loading=!0;let t={expand:["lotes"],academia:this.data.academia,search:this.searchTerm,limit:this.limit,offset:this.offset};this.httpMethods.getPaginated(this.pathUrl,t).pipe(w(this.unsubscribe$)).subscribe(e=>{this.products.push(...e.results),this.totalResults=e.totalResults,this.products.forEach(i=>{i.id&&!this.quantities[i.id]&&(this.quantities[i.id]=1)}),this.loading=!1,this.offset+=this.limit})}getQuantity(t){return this.quantities[t]||1}decreaseQuantity(t){t.id&&this.quantities[t.id]>1&&this.quantities[t.id]--}verification_total(t){let e=this.data.cartItems.find(i=>i.produto.id===t.id);return e?(t.quantidade_estoque||0)-e.quantidade:t.quantidade_estoque||0}increaseQuantity(t){t.id&&(t.quantidade_estoque===void 0||this.quantities[t.id]<t.quantidade_estoque)&&this.quantities[t.id]++}addToCart(t){if(!t||!t.id||!t.preco){this.snackBar.open("Selecione um produto v\xE1lido.","Fechar",{duration:3e3});return}let e=this.getQuantity(t.id);if(e<=0){this.snackBar.open("Quantidade deve ser maior que zero.","Fechar",{duration:3e3});return}if(t.quantidade_estoque!==void 0&&e>t.quantidade_estoque){this.snackBar.open("Quantidade maior que o estoque dispon\xEDvel.","Fechar",{duration:3e3});return}let i={produto:t,quantidade:e,preco_unitario:t.preco};this.dialogRef.close(i)}console=console;static \u0275fac=function(e){return new(e||o)(m(Vt),m(jt),m(L),m(pt))};static \u0275cmp=C({type:o,selectors:[["app-product-select-modal"]],standalone:!0,features:[P],decls:12,vars:2,consts:[[1,"grid","align-items-center","p-3"],[1,"col-12","flex","justify-content-start"],[1,"font-bold","text-2xl"],["appearance","outline",1,"col-12"],["matInput","text","placeholder","Buscar produtos...",3,"ngModelChange","input","ngModel"],["id","container-prod",1,"grid","container-prod","p-2","gap-2",2,"max-height","300px","overflow-y","auto",3,"scroll"],["appearance","outlined",1,"col-12"],[1,"col-12","align-items-center","justify-content-center","align-content-center"],[1,"flex","justify-content-between","align-items-center"],[1,"flex-wrap"],["mat-button","",1,"add_button",2,"width","1%",3,"click"],["mat-button","",1,"add_button",3,"click"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","text-white-alpha-90",3,"click","ngClass","disabled"]],template:function(e,i){e&1&&(r(0,"main",0)(1,"div",1)(2,"div",2),s(3,"Adicionar Produto"),a()(),r(4,"mat-form-field",3)(5,"mat-label"),s(6,"Buscar Produto"),a(),r(7,"input",4),tt("ngModelChange",function(d){return J(i.searchTerm,d)||(i.searchTerm=d),d}),u("input",function(){return i.onSearch()}),a()(),r(8,"div",5),u("scroll",function(){return i.onScroll()}),E(9,_i,24,13,"mat-card",6,fi),g(11,vi,3,0,"div",7),a()()),e&2&&(l(7),K("ngModel",i.searchTerm),l(2),D(i.products),l(2),I(i.products.length===0?11:-1))},dependencies:[dt,R,F,at,it,A,k,z,ut,O,At],styles:["[_nghost-%COMP%]{display:block;max-width:100vw;overflow-x:hidden}main[_ngcontent-%COMP%]{display:block;width:100%;max-width:100%;overflow-x:hidden;box-sizing:border-box}mat-card[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box;overflow-x:hidden}#container-prod[_ngcontent-%COMP%]{width:100%;max-width:100%;overflow-x:hidden}"]})}return o})();var xi=(o,c)=>c.produto.id;function yi(o,c){if(o&1&&(r(0,"mat-option",11),s(1),a()),o&2){let t=c.$implicit;p("value",t),l(),x(" ",t," ")}}function Ci(o,c){if(o&1){let t=M();r(0,"div",16)(1,"mat-icon",19),s(2,"shopping_cart"),a(),r(3,"p",19),s(4,"Nenhum produto adicionado"),a(),r(5,"button",20),u("click",function(){v(t);let i=h();return b(i.openProductModal())}),s(6,"Adicionar Produto"),a()()}}function Si(o,c){if(o&1){let t=M();r(0,"div",21)(1,"div",22)(2,"span"),s(3),a(),r(4,"span"),s(5),G(6,"currency"),a()(),r(7,"div",23)(8,"div"),s(9),G(10,"currency"),a(),r(11,"button",24),u("click",function(){let i=v(t).$implicit,n=h(2);return b(n.removeItem(i))}),r(12,"mat-icon"),s(13,"delete"),a()()()()}if(o&2){let t=c.$implicit;l(3),S(t.produto.nome||"Produto sem nome"),l(2),Y("",t.quantidade," x ",et(6,4,t.preco_unitario,"BRL"),""),l(4),x(" R$ ",et(10,7,t.quantidade*t.preco_unitario,"BRL")," ")}}function Pi(o,c){if(o&1&&(r(0,"div"),E(1,Si,14,10,"div",21,xi),r(3,"div",19)(4,"h4",19),s(5),G(6,"currency"),a()()()),o&2){let t=h();l(),D(t.cartItems),l(4),x("Total: ",et(6,1,t.getTotal(),"BRL"),"")}}var oi=(()=>{class o{formBuilder;router;snackBar;dialog;authService;httpMethods;pathUrl=j.SALE;cartItems=[];formGroup;formasPagamento=["Dinheiro","Cart\xE3o","Pix"];constructor(t,e,i,n,d,f){this.formBuilder=t,this.router=e,this.snackBar=i,this.dialog=n,this.authService=d,this.httpMethods=f,this.formGroup=this.formBuilder.group({client:[""],formaPagamento:["Dinheiro"]})}openProductModal(){this.dialog.open(ii,{width:"600px",data:{academia:this.authService.get_gym(),cartItems:this.cartItems}}).afterClosed().subscribe(e=>{if(e){let i=this.cartItems.find(n=>n.produto.id===e.produto.id);i?i.quantidade+=e.quantidade:this.cartItems.push(e),this.snackBar.open("Produto adicionado ao carrinho!","Fechar",{duration:3e3})}})}ngOnInit(){}removeItem(t){let e=this.cartItems.findIndex(i=>i.produto.id===t.produto.id);e!==-1?this.cartItems.splice(e,1):(console.error("Item n\xE3o encontrado:",t),this.snackBar.open("Erro ao remover item.","Fechar",{duration:3e3}))}getTotal(){return this.cartItems.reduce((t,e)=>t+Number(e.preco_unitario)*e.quantidade,0)}finalizeSale(){if(this.cartItems.length===0){this.snackBar.open("Adicione produtos ao carrinho antes de finalizar a venda.","Fechar",{duration:3e3});return}let t={academia:this.authService.get_gym(),cliente:this.formGroup.get("client")?.value||null,forma_pagamento:this.formGroup.get("formaPagamento")?.value,itens:this.cartItems.map(e=>({produto:e.produto.id,quantidade:e.quantidade,preco_unitario:e.preco_unitario,valor_total:Number(e.preco_unitario)*e.quantidade}))};this.httpMethods.post(this.pathUrl,t).subscribe(e=>{this.snackBar.open("Venda finalizada com sucesso","Fechar",{duration:3e3}),this.cartItems=[],this.formGroup.reset({formaPagamento:"Dinheiro"}),this.router.navigate(["/sales"]).then()},e=>{console.error("Erro ao finalizar venda:",e),this.snackBar.open("Erro ao finalizar venda. Tente novamente.","Fechar",{duration:3e3})})}goBack(){this.router.navigate(["product/sales"]).then()}static \u0275fac=function(e){return new(e||o)(m(ct),m($),m(pt),m(ht),m(Nt),m(L))};static \u0275cmp=C({type:o,selectors:[["app-sell-page"]],standalone:!0,features:[P],decls:36,vars:4,consts:[[1,"grid","justify-content-center","align-items-start","p-4"],[1,"col-10"],["mat-raised-button","","color","primary",1,"",3,"click"],[1,"p-4"],[1,"font-bold","text-2xl","mb-1"],[1,"grid"],[1,"col-12"],[1,"p-d-flex","p-flex-column","p-gap-3",3,"formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","client","placeholder","Nome do cliente"],["formControlName","formaPagamento"],[3,"value"],["appearance","outlined",1,"p-2"],[1,"flex","justify-content-between","align-items-center","mb-2"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-10","text-black-alpha-90",3,"click"],[1,"bg-black-alpha-10","flex","flex-column","align-items-center","justify-content-center","p-4"],[1,"mt-2"],["mat-raised-button","","color","primary",1,"add_button",3,"click","disabled"],[1,""],["mat-button","","color","primary",3,"click"],[1,"flex","justify-content-between","align-items-center","bg-black-alpha-10","p-1"],[1,"flex","flex-wrap","align-content-start","justify-content-center"],[1,"flex","justify-content-end","align-items-center"],["mat-icon-button","","color","warn",3,"click"]],template:function(e,i){e&1&&(r(0,"main",0)(1,"div",1)(2,"button",2),u("click",function(){return i.goBack()}),r(3,"mat-icon"),s(4,"arrow_back"),a(),s(5," voltar "),a()(),r(6,"div",1)(7,"mat-card",3)(8,"div",4),s(9,"Registrar Venda"),a(),r(10,"div",5)(11,"div",6)(12,"form",7)(13,"mat-form-field",8)(14,"mat-label"),s(15,"Matricula (opcional)"),a(),_(16,"input",9),a(),r(17,"mat-form-field",8)(18,"mat-label"),s(19,"Forma de Pagamento"),a(),r(20,"mat-select",10),E(21,yi,2,2,"mat-option",11,Q),a()()()()(),r(23,"mat-card",12)(24,"div",13)(25,"div",14),s(26,"Produtos"),a(),r(27,"button",15),u("click",function(){return i.openProductModal()}),r(28,"mat-icon"),s(29,"add"),a(),s(30," Adicionar Produto "),a()(),g(31,Ci,7,0,"div",16)(32,Pi,7,4,"div"),a(),r(33,"div",17)(34,"button",18),u("click",function(){return i.finalizeSale()}),s(35," Finalizar Venda "),a()()()()()),e&2&&(l(12),p("formGroup",i.formGroup),l(9),D(i.formasPagamento),l(10),I(i.cartItems.length===0?31:-1),l(),I(i.cartItems.length>0?32:-1),l(2),p("disabled",i.cartItems.length===0))},dependencies:[zt,H,mt,rt,R,F,nt,st,lt,k,ft,ot,O,it,z,A,ut]})}return o})();var ni=(()=>{class o{prod;static \u0275fac=function(e){return new(e||o)};static \u0275cmp=C({type:o,selectors:[["app-product-item"]],inputs:{prod:"prod"},standalone:!0,features:[P],decls:20,vars:8,consts:[[1,"h-15rem","w-25rem","w-full","aspect-square","flex","items-center","justify-center","overflow-hidden"],["alt","Imagem do produto",1,"w-full","h-full","object-contain","p-2",3,"src"],[1,"p-4"],[1,"flex","justify-content-between"],[1,"font-semibold","text-2xl"],[1,"text-2xl","font-bold","whitespace-nowrap"],[1,"flex","items-center","text-1xl","gap-1","font-gray"],["fontIcon","local_offer",1,"text-1xl","text-gray-400"],[1,"text-xl","font-gray"],[1,"text-sl","font-gray"],[1,"text-xl",2,"color","#666666"]],template:function(e,i){e&1&&(r(0,"main")(1,"div",0),_(2,"img",1),a(),r(3,"mat-card-content",2)(4,"div",3)(5,"div",4),s(6),a(),r(7,"div",5),s(8),a()(),r(9,"div",6),_(10,"mat-icon",7),s(11),a(),r(12,"div",8)(13,"strong"),s(14,"Marca:"),a(),s(15),a(),r(16,"p",9),s(17),a(),r(18,"div",10),s(19),a()()()),e&2&&(l(2),p("src",i.prod.foto_url,wt),l(4),S(i.prod.nome),l(2),x("R$ ",i.prod.preco,""),l(3),x(" ",i.prod.categoria||"Produto"," "),l(4),x(" ",i.prod.marca||"Desconhecida"," "),l(2),S(i.prod.descricao),l(2),Y(" Em estoque: ",i.prod.quantidade_estoque," unidade",i.prod.quantidade_estoque===1?"":"s"," "))},dependencies:[ze,H]})}return o})();var ai=(()=>{class o{fb;httpMethods;dialogRef;data;formGroup;constructor(t,e,i,n){this.fb=t,this.httpMethods=e,this.dialogRef=i,this.data=n,this.formGroup=this.fb.group({produto:[this.data.produtoId,V.required],quantidade:[null,V.required],preco_total:[null,V.required],data_validade:[""]})}submit(){if(this.formGroup.valid){let t=this.formGroup.get("data_validade")?.value,e=new Date(t).toISOString().split("T")[0];this.formGroup.patchValue({data_validade:e}),this.httpMethods.post("api/produto/lotes/",this.formGroup.value).subscribe({next:()=>this.dialogRef.close(!0),error:i=>console.error("Erro ao abastecer produto:",i)})}}static \u0275fac=function(e){return new(e||o)(m(ct),m(L),m(Vt),m(jt))};static \u0275cmp=C({type:o,selectors:[["app-product-stock-modal"]],standalone:!0,features:[ce([Be(),we(),{provide:Me,useValue:qe},{provide:Ie,useValue:"pt-BR"}]),P],decls:27,vars:3,consts:[["picker",""],[1,"flex","flex-column","align-items-center","justify-content-center","p-1"],[1,"text-2xl","font-bold","mb-4"],[1,"col-12","p-3",3,"formGroup"],[1,"field","w-full"],["appearance","fill",1,"w-full"],["matInput","","type","number","formControlName","quantidade"],["matInput","","type","number","formControlName","preco_total"],["matInput","","formControlName","data_validade",3,"matDatepicker"],["matSuffix","",3,"for"],[1,"flex","justify-content-end","gap-2","mt-2"],["mat-raised-button","","type","button",1,"add_button","bg-red-alpha-70","text-yellow-100",3,"click"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","text-white-alpha-90",3,"click"]],template:function(e,i){if(e&1){let n=M();r(0,"main",1)(1,"h2",2),s(2,"Abastecer Produto"),a(),r(3,"form",3)(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),s(7,"Quantidade"),a(),_(8,"input",6),a()(),r(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),s(12,"Preco"),a(),_(13,"input",7),a()(),r(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),s(17,"Data de validade"),a(),_(18,"input",8)(19,"mat-datepicker-toggle",9)(20,"mat-datepicker",null,0),a()(),r(22,"div",10)(23,"button",11),u("click",function(){return v(n),b(i.dialogRef.close())}),s(24,"Cancelar"),a(),r(25,"button",12),u("click",function(){return v(n),b(i.submit())}),s(26,"Salvar"),a()()()()}if(e&2){let n=Ot(21);l(3),p("formGroup",i.formGroup),l(15),p("matDatepicker",n),l(),p("for",n)}},dependencies:[yt,mt,rt,R,Lt,F,nt,st,lt,Le,Fe,k,A,Re,Ae,z,Yt,O,Ge,Ne,Ve,je,Te],styles:["[_nghost-%COMP%]{overflow-x:hidden}main[_ngcontent-%COMP%]{overflow-x:hidden}form[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;overflow-x:hidden}"]})}return o})();var Ii=(o,c)=>c.id;function Mi(o,c){if(o&1){let t=M();r(0,"mat-card",14),_(1,"app-product-item",15),r(2,"div",16)(3,"button",17),u("click",function(){let i=v(t).$implicit,n=h(4);return b(n.restock(i))}),r(4,"mat-icon"),s(5,"add_circle"),a(),s(6," Abastecer "),a(),r(7,"button",17),u("click",function(){let i=v(t).$implicit,n=h(4);return b(n.edit(i))}),r(8,"mat-icon"),s(9,"edit"),a(),s(10," Editar "),a()()()}if(o&2){let t=c.$implicit;l(),p("prod",t)}}function Ti(o,c){if(o&1){let t=M();r(0,"section",11)(1,"div"),s(2),a(),r(3,"div",12)(4,"div",13),u("scroll",function(){v(t);let i=h().$implicit,n=h(2);return b(n.onScroll(i))}),E(5,Mi,11,1,"mat-card",14,Ii),a()()()}if(o&2){let t=h().$implicit,e=h(2);l(2),S(t),l(),le("id","category-",t,""),l(2),D(e.categoryPanation[t].products)}}function wi(o,c){if(o&1&&g(0,Ti,7,3,"section",11),o&2){let t=c.$implicit,e=h(2);I(e.categoryPanation[t].products.length>0?0:-1)}}function Ei(o,c){if(o&1&&(r(0,"section",10),E(1,wi,1,1,null,null,Q),a()),o&2){let t=h();l(),D(t.categories)}}function Di(o,c){}var ri=(()=>{class o{httpMethods;router;dialog;pathUrlProduct=j.PRODUCT;products=[];searchterm="";gym_id="";searchTerm="";limit=4;loading=!1;totalResults=0;currentPage=0;categories=["SUPLEMENTO","ACESSORIO","ROUPA","BEBIDA","ALIMENTO","OUTROS"];categoryPanation={};unsubscribe$=new B;constructor(t,e,i){this.httpMethods=t,this.router=e,this.dialog=i}getIdGym(){this.gym_id=localStorage.getItem("academia")}ngOnInit(){this.getIdGym();for(let t of this.categories)this.categoryPanation[t]={products:[],limit:this.limit,offset:0,totalResults:0,loading:!1},this.getInventory(t)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}restock(t){this.dialog.open(ai,{data:{produtoId:t.id},width:"100%",maxWidth:"500px",autoFocus:!1}).afterClosed().pipe(w(this.unsubscribe$)).subscribe(i=>{if(i){let n=this.categories.find(d=>this.categoryPanation[d]?.products.some(f=>f.id===t.id));n&&(this.categoryPanation[n].products=[],this.categoryPanation[n].offset=0,this.categoryPanation[n].totalResults=0,this.getInventory(n))}})}onScroll(t){let e=document.getElementById(`category-${t}`);if(!e)return;let i=e.scrollLeft,n=e.clientWidth,d=e.scrollWidth,f=i+n>=d-5,y=this.categoryPanation[t];!y||y.loading||f&&y.products.length<y.totalResults&&this.loadMoreProducts(t)}loadMoreProducts(t){let e=this.categoryPanation[t];if(e.offset>=e.totalResults)return;e.loading=!0;let i={expand:["lotes"],academia:this.gym_id,categoria:t,limit:e.limit,offset:e.offset};this.httpMethods.getPaginated(this.pathUrlProduct,i).pipe(w(this.unsubscribe$)).subscribe(n=>{n.results&&n.results.length>0&&(e.products.push(...n.results),e.offset+=e.limit,e.totalResults=n.count),e.loading=!1},n=>{e.loading=!1,console.error("Erro ao carregar mais produtos:",n)})}getInventory(t){let e=this.categoryPanation[t];if(e.loading)return;e.loading=!0;let i={expand:["lotes"],academia:this.gym_id,categoria:t,limit:e.limit,offset:e.offset};this.httpMethods.getPaginated(this.pathUrlProduct,i).pipe(w(this.unsubscribe$)).subscribe(n=>{let d=n.results,f=n.count;e.products.push(...d),e.offset+=e.limit,e.totalResults=f,e.loading=!1},n=>{e.loading=!1})}edit(t){this.router.navigate([`/product/form/${t.id}`]).then()}create(){this.router.navigate(["/product/form/create/"])}search(){let t={expand:["lotes"],academia:this.gym_id,limit:this.limit,offset:this.currentPage,search:this.searchterm};this.httpMethods.getPaginated(this.pathUrlProduct,t).pipe(w(this.unsubscribe$)).subscribe(e=>{this.products=e.results,this.limit=e.count,this.totalResults=e.count,this.currentPage=this.limit,this.loading=!1},e=>{this.loading=!1})}static \u0275fac=function(e){return new(e||o)(m(L),m($),m(ht))};static \u0275cmp=C({type:o,selectors:[["app-product-inventory"]],standalone:!0,features:[P],decls:20,vars:2,consts:[[1,"grid"],[1,"col-12","justify-content-center","align-items-center","align-content-center"],[1,"flex","font-gray","w-full","justify-content-center"],[1,"col-12","p-4"],[1,"flex","justify-content-between","align-items-center","col-12","align-content-center","align-items-center"],["appearance","outline",1,"search","w-30rem"],["matInput","text","placeholder","Digite o nome ou categoria",3,"ngModelChange","input","ngModel"],[1,"flex","align-items-center","justify-content-end","mb-5"],[1,"align-self-start","mr-2"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","mt-2",2,"color","white",3,"click"],[1,"flex-wrap","col-12"],[1,"flex","flex-column"],[1,"flex","flex-col","gap-4","mb-6",3,"id"],[1,"flex","overflow-x-auto","gap-4","styled-scroll","p-2",3,"scroll"],[1,"min-w-[16rem]","flex-shrink-0","overflow-hidden","border","bg-white","flex","flex-col","p-3"],[3,"prod"],[1,"flex","justify-between","items-center","p-3"],["mat-button","","type","button",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Estoque"),a(),r(4,"span",2),s(5," Gerencie e abaste\xE7a os produtos oferecidos pelo estabelecimento "),a()(),r(6,"div",3)(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),s(10,"Buscar Produto"),a(),r(11,"input",6),tt("ngModelChange",function(d){return J(i.searchTerm,d)||(i.searchTerm=d),d}),u("input",function(){return i.search()}),a()(),r(12,"div",7)(13,"div",8)(14,"button",9),u("click",function(){return i.create()}),r(15,"mat-icon"),s(16,"add"),a(),s(17," Adicionar produto "),a()()()(),g(18,Ei,3,0,"section",10)(19,Di,0,0),a()()),e&2&&(l(11),K("ngModel",i.searchTerm),l(7),I(i.searchterm?19:18))},dependencies:[dt,R,F,at,O,ut,H,ni,k,z,A],styles:[".subtitle[_ngcontent-%COMP%]{text-align:center;color:#909090}"]})}return o})();var ki=(o,c)=>c.value;function Oi(o,c){o&1&&(r(0,"mat-error"),s(1,"Campo obrigat\xF3rio"),a())}function Ri(o,c){o&1&&(r(0,"mat-error"),s(1,"Campo obrigat\xF3rio"),a())}function Fi(o,c){o&1&&(r(0,"mat-error"),s(1,"Campo obrigat\xF3rio"),a())}function Ai(o,c){if(o&1&&(r(0,"mat-option",9),s(1),a()),o&2){let t=c.$implicit;p("value",t.value),l(),S(t.label)}}function zi(o,c){o&1&&(r(0,"mat-error"),s(1," Campo obrigat\xF3rio "),a())}function Li(o,c){o&1&&(r(0,"mat-error"),s(1,"Campo obrigat\xF3rio"),a())}function Bi(o,c){if(o&1&&(r(0,"div",15)(1,"p"),s(2,"Imagem atual:"),a(),_(3,"img",16),a()),o&2){let t=h();l(3),p("src",t.imagePreviewUrl,wt)}}var si=(()=>{class o{httpMethods;formBuilder;router;route;snackBar;dialog;categorias=[{value:"SUPLEMENTO",label:"Suplemento"},{value:"Acessorio",label:"Acess\xF3rio"},{value:"ROUPA",label:"Roupa"},{value:"BEBIDA",label:"Bebida"},{value:"ALIMENTO",label:"Alimento"},{value:"OUTROS",label:"Outros"}];action="";created=!0;pathUrlProd=j.PRODUCT;formGroup;gymId="";title="Cadastro de produto";selectedImage=null;imagePreviewUrl=null;constructor(t,e,i,n,d,f){this.httpMethods=t,this.formBuilder=e,this.router=i,this.route=n,this.snackBar=d,this.dialog=f,this.formGroup=this.formBuilder.group({id:[],nome:["",V.required],preco:["",V.required],descricao:["",V.required],academia:[""],categoria:["",V.required],created_at:[""],modified_at:[""],marca:["",V.required]})}ngOnInit(){this.getGym(),this.retriveCallBack()}getGym(){this.gymId=localStorage.getItem("academia"),this.gymId&&this.formGroup.patchValue({academia:this.gymId})}onFileSelected(t){let e=t.target.files[0];e&&e.type.startsWith("image/")&&this.resizeImage(e,500,500).then(i=>{this.selectedImage=i})}resizeImage(t,e,i){return new Promise((n,d)=>{let f=new FileReader;f.onload=y=>{let N=new Image;N.src=y.target.result,N.onload=()=>{let U=document.createElement("canvas"),Pt=U.getContext("2d"),T=N.width,It=N.height,Qt=Math.min(e/T,i/It);U.width=T*Qt,U.height=It*Qt,Pt?.drawImage(N,0,0,U.width,U.height),U.toBlob(Wt=>{if(Wt){let hi=new File([Wt],t.name,{type:t.type,lastModified:Date.now()});n(hi)}else d("Erro ao redimensionar imagem.")},t.type)}},f.onerror=y=>d(y),f.readAsDataURL(t)})}retriveCallBack(){this.route.paramMap.subscribe(t=>{this.action=t.get("action"),this.created=!(this.action&&this.action!=="create"),this.created||(this.title="Edi\xE7\xE3o de produto",this.httpMethods.get(this.pathUrlProd+this.action+"/").subscribe(e=>{this.imagePreviewUrl=e.foto,console.log(e),this.formGroup.patchValue({id:e.id,nome:e.nome,preco:e.preco,descricao:e.descricao,categoria:e.categoria,created_at:e.created_at,modified_at:e.modified_at,marca:e.marca,academia:this.gymId})}))})}saveOrUpdate(t){let e=new FormData;Object.keys(t).forEach(n=>{t[n]!==null&&t[n]!==void 0&&e.append(n,t[n])}),this.selectedImage&&e.append("foto",this.selectedImage),(this.created?this.httpMethods.post(`${this.pathUrlProd}`,e):this.httpMethods.noIdPatch(`${this.pathUrlProd}${t.id}/`,e)).subscribe(()=>{let n=this.created?"Produto cadastrado":"Produto atualizado";this.snackBar.open(n,"OK",{duration:3e3,verticalPosition:"top"}),this.router.navigate(["/product/productInventory"])})}static \u0275fac=function(e){return new(e||o)(m(L),m(ct),m($),m(_e),m(pt),m(ht))};static \u0275cmp=C({type:o,selectors:[["app-product-form"]],standalone:!0,features:[P],decls:36,vars:9,consts:[[1,"container"],[1,"mat-elevation-z2","form",3,"ngSubmit","formGroup"],[1,"form-title"],["appearance","fill"],["matInput","","formControlName","nome","placeholder","Digite o nome do produto"],[4,"ngIf"],["matInput","","formControlName","preco","type","number","placeholder","Digite o pre\xE7o"],["matInput","","formControlName","marca","placeholder","Marca do produto"],["formControlName","categoria"],[3,"value"],["matInput","","formControlName","descricao","placeholder","Descri\xE7\xE3o do produto"],[1,"form-group"],["type","file",3,"change"],["class","image-preview",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"image-preview"],["width","200","alt","Preview do produto",3,"src"]],template:function(e,i){if(e&1&&(r(0,"div",0)(1,"form",1),u("ngSubmit",function(){return i.saveOrUpdate(i.formGroup.value)}),r(2,"h2",2),s(3),a(),r(4,"mat-form-field",3)(5,"mat-label"),s(6,"Nome"),a(),_(7,"input",4),g(8,Oi,2,0,"mat-error",5),a(),r(9,"mat-form-field",3)(10,"mat-label"),s(11,"Pre\xE7o"),a(),_(12,"input",6),g(13,Ri,2,0,"mat-error",5),a(),r(14,"mat-form-field",3)(15,"mat-label"),s(16,"Marca"),a(),_(17,"input",7),g(18,Fi,2,0,"mat-error",5),a(),r(19,"mat-form-field",3)(20,"mat-label"),s(21,"Categoria"),a(),r(22,"mat-select",8),E(23,Ai,2,2,"mat-option",9,ki),a(),g(25,zi,2,0,"mat-error",5),a(),r(26,"mat-form-field",3)(27,"mat-label"),s(28,"Descri\xE7\xE3o"),a(),_(29,"textarea",10),g(30,Li,2,0,"mat-error",5),a(),r(31,"div",11)(32,"input",12),u("change",function(d){return i.onFileSelected(d)}),a()(),g(33,Bi,4,1,"div",13),r(34,"button",14),s(35,"Salvar"),a()()()),e&2){let n,d,f,y,N;l(),p("formGroup",i.formGroup),l(2),S(i.title),l(5),p("ngIf",(n=i.formGroup.get("nome"))==null?null:n.hasError("required")),l(5),p("ngIf",(d=i.formGroup.get("preco"))==null?null:d.hasError("required")),l(5),p("ngIf",(f=i.formGroup.get("marca"))==null?null:f.hasError("required")),l(5),D(i.categorias),l(2),p("ngIf",(y=i.formGroup.get("categoria"))==null?null:y.hasError("required")),l(5),p("ngIf",(N=i.formGroup.get("descricao"))==null?null:N.hasError("required")),l(3),p("ngIf",i.imagePreviewUrl),l(),p("disabled",!i.formGroup.valid)}},dependencies:[mt,rt,R,Lt,F,nt,st,lt,O,Oe,k,z,A,fe,ft,ot],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f4f7fc}.form[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:40px;background-color:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a;font-family:Arial,sans-serif}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;color:#333;margin-bottom:30px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}mat-label[_ngcontent-%COMP%]{font-weight:600;color:#333}input[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:4px;border:1px solid #ddd}button[_ngcontent-%COMP%]{width:100%;padding:14px;font-size:16px;border:none;border-radius:4px;cursor:pointer}.input-field[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:16px}button[disabled][_ngcontent-%COMP%]{background-color:#b0bec5;cursor:not-allowed}@media (max-width: 600px){.form[_ngcontent-%COMP%]{padding:20px}.form-title[_ngcontent-%COMP%]{font-size:20px}button[_ngcontent-%COMP%]{font-size:14px;padding:12px}}"]})}return o})();var Vi=["tooltip"],ji=20;var Gi=new _t("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let o=qt(Bt);return()=>o.scrollStrategies.reposition({scrollThrottle:ji})}});function qi(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var Ui=new _t("mat-tooltip-default-options",{providedIn:"root",factory:qi});var li="tooltip-panel",ci=xe({passive:!0}),$i=8,Hi=8,Yi=24,Xi=200,di=(()=>{class o{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=$t(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){let e=$t(t);this._disabled!==e&&(this._disabled=e,e?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=Ht(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=Ht(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){let e=this._message;this._message=t!=null?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(e)}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,e,i,n,d,f,y,N,U,Pt,T,It){this._overlay=t,this._elementRef=e,this._scrollDispatcher=i,this._viewContainerRef=n,this._ngZone=d,this._platform=f,this._ariaDescriber=y,this._focusMonitor=N,this._dir=Pt,this._defaultOptions=T,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=Qi,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._touchstartTimeout=null,this._destroyed=new B,this._injector=qt(ee),this._scrollStrategy=U,this._document=It,T&&(this._showDelay=T.showDelay,this._hideDelay=T.hideDelay,T.position&&(this.position=T.position),T.positionAtOrigin&&(this.positionAtOrigin=T.positionAtOrigin),T.touchGestures&&(this.touchGestures=T.touchGestures),T.tooltipClass&&(this.tooltipClass=T.tooltipClass)),Pt.change.pipe(w(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=$i}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(w(this._destroyed)).subscribe(t=>{t?t==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let t=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([e,i])=>{t.removeEventListener(e,i,ci)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,e){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let i=this._createOverlay(e);this._detach(),this._portal=this._portal||new ke(this._tooltipComponent,this._viewContainerRef);let n=this._tooltipInstance=i.attach(this._portal).instance;n._triggerElement=this._elementRef.nativeElement,n._mouseLeaveHideDelay=this._hideDelay,n.afterHidden().pipe(w(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),n.show(t)}hide(t=this.hideDelay){let e=this._tooltipInstance;e&&(e.isVisible()?e.hide(t):(e._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){let n=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&n._origin instanceof bt)return this._overlayRef;this._detach()}let e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),i=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?t||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(e);return i.positionChanges.pipe(w(this._destroyed)).subscribe(n=>{this._updateCurrentPositionClass(n.connectionPair),this._tooltipInstance&&n.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:i,panelClass:`${this._cssClassPrefix}-${li}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(w(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(w(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(w(this._destroyed)).subscribe(n=>{this._isTooltipVisible()&&n.keyCode===27&&!ye(n)&&(n.preventDefault(),n.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){let e=t.getConfig().positionStrategy,i=this._getOrigin(),n=this._getOverlayPosition();e.withPositions([this._addOffset(gt(gt({},i.main),n.main)),this._addOffset(gt(gt({},i.fallback),n.fallback))])}_addOffset(t){let e=Hi,i=!this._dir||this._dir.value=="ltr";return t.originY==="top"?t.offsetY=-e:t.originY==="bottom"?t.offsetY=e:t.originX==="start"?t.offsetX=i?-e:e:t.originX==="end"&&(t.offsetX=i?e:-e),t}_getOrigin(){let t=!this._dir||this._dir.value=="ltr",e=this.position,i;e=="above"||e=="below"?i={originX:"center",originY:e=="above"?"top":"bottom"}:e=="before"||e=="left"&&t||e=="right"&&!t?i={originX:"start",originY:"center"}:(e=="after"||e=="right"&&t||e=="left"&&!t)&&(i={originX:"end",originY:"center"});let{x:n,y:d}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:n,originY:d}}}_getOverlayPosition(){let t=!this._dir||this._dir.value=="ltr",e=this.position,i;e=="above"?i={overlayX:"center",overlayY:"bottom"}:e=="below"?i={overlayX:"center",overlayY:"top"}:e=="before"||e=="left"&&t||e=="right"&&!t?i={overlayX:"end",overlayY:"center"}:(e=="after"||e=="right"&&t||e=="left"&&!t)&&(i={overlayX:"start",overlayY:"center"});let{x:n,y:d}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:n,overlayY:d}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),se(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,e){return this.position==="above"||this.position==="below"?e==="top"?e="bottom":e==="bottom"&&(e="top"):t==="end"?t="start":t==="start"&&(t="end"),{x:t,y:e}}_updateCurrentPositionClass(t){let{overlayY:e,originX:i,originY:n}=t,d;if(e==="center"?this._dir&&this._dir.value==="rtl"?d=i==="end"?"left":"right":d=i==="start"?"left":"right":d=e==="bottom"&&n==="top"?"above":"below",d!==this._currentPosition){let f=this._overlayRef;if(f){let y=`${this._cssClassPrefix}-${li}-`;f.removePanelClass(y+this._currentPosition),f.addPanelClass(y+d)}this._currentPosition=d}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{this._setupPointerExitEventsIfNeeded();let e;t.x!==void 0&&t.y!==void 0&&(e=t),this.show(void 0,e)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{let e=t.targetTouches?.[0],i=e?{x:e.clientX,y:e.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let n=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,i)},this._defaultOptions.touchLongPressShowDelay??n)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",e=>{let i=e.relatedTarget;(!i||!this._overlayRef?.overlayElement.contains(i))&&this.hide()}],["wheel",e=>this._wheelListener(e)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let e=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",e],["touchcancel",e])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([e,i])=>{this._elementRef.nativeElement.addEventListener(e,i,ci)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){let e=this._document.elementFromPoint(t.clientX,t.clientY),i=this._elementRef.nativeElement;e!==i&&!i.contains(e)&&this.hide()}}_disableNativeGesturesIfNecessary(){let t=this.touchGestures;if(t!=="off"){let e=this._elementRef.nativeElement,i=e.style;(t==="on"||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA")&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),(t==="on"||!e.draggable)&&(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}}_syncAriaDescription(t){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,t,"tooltip"),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}static{this.\u0275fac=function(e){return new(e||o)(m(Bt),m(bt),m(Ee),m(ae),m(oe),m(be),m(Ce),m(Se),m(Gi),m(Pe),m(Ui,8),m(he))}}static{this.\u0275dir=Jt({type:o,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(e,i){e&2&&Ut("mat-mdc-tooltip-disabled",i.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}}return o})(),Qi=(()=>{class o{constructor(t,e,i){this._changeDetectorRef=t,this._elementRef=e,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new B,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=i==="NoopAnimations"}show(t){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>Yi&&t.width>=Xi}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){let e=this._tooltip.nativeElement,i=this._showAnimation,n=this._hideAnimation;if(e.classList.remove(t?n:i),e.classList.add(t?i:n),this._isVisible!==t&&(this._isVisible=t,this._changeDetectorRef.markForCheck()),t&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let d=getComputedStyle(e);(d.getPropertyValue("animation-duration")==="0s"||d.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(e.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}static{this.\u0275fac=function(e){return new(e||o)(m(Rt),m(bt),m(ne,8))}}static{this.\u0275cmp=C({type:o,selectors:[["mat-tooltip-component"]],viewQuery:function(e,i){if(e&1&&Et(Vi,7),e&2){let n;Dt(n=kt())&&(i._tooltip=n.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(e,i){e&1&&u("mouseleave",function(d){return i._handleMouseLeave(d)})},standalone:!0,features:[P],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(e,i){if(e&1){let n=M();r(0,"div",1,0),u("animationend",function(f){return v(n),b(i._handleAnimationEnd(f))}),r(2,"div",2),s(3),a()()}e&2&&(Ut("mdc-tooltip--multiline",i._isMultiline),p("ngClass",i.tooltipClass),l(3),S(i.message))},dependencies:[At],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-app-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-app-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-app-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-app-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-app-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-app-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-app-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}}return o})();function Wi(o,c){if(o&1&&(r(0,"mat-option",17),s(1),a()),o&2){let t=c.$implicit;p("value",t),l(),x(" ",t," ")}}function Zi(o,c){if(o&1){let t=M();r(0,"mat-form-field",14)(1,"mat-select",16,0),u("selectionChange",function(i){v(t);let n=h(2);return b(n._changePageSize(i.value))}),E(3,Wi,2,2,"mat-option",17,Q),a(),r(5,"div",18),u("click",function(){v(t);let i=Ot(2);return b(i.open())}),a()()}if(o&2){let t=h(2);p("appearance",t._formFieldAppearance)("color",t.color),l(),p("value",t.pageSize)("disabled",t.disabled)("aria-labelledby",t._pageSizeLabelId)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering),l(2),D(t._displayedPageSizeOptions)}}function Ki(o,c){if(o&1&&(r(0,"div",15),s(1),a()),o&2){let t=h(2);l(),S(t.pageSize)}}function Ji(o,c){if(o&1&&(r(0,"div",3)(1,"div",13),s(2),a(),g(3,Zi,6,7,"mat-form-field",14)(4,Ki,2,1,"div",15),a()),o&2){let t=h();l(),X("id",t._pageSizeLabelId),l(),x(" ",t._intl.itemsPerPageLabel," "),l(),I(t._displayedPageSizeOptions.length>1?3:-1),l(),I(t._displayedPageSizeOptions.length<=1?4:-1)}}function to(o,c){if(o&1){let t=M();r(0,"button",19),u("click",function(){v(t);let i=h();return b(i.firstPage())}),vt(),r(1,"svg",8),_(2,"path",20),a()()}if(o&2){let t=h();p("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),X("aria-label",t._intl.firstPageLabel)}}function eo(o,c){if(o&1){let t=M();r(0,"button",21),u("click",function(){v(t);let i=h();return b(i.lastPage())}),vt(),r(1,"svg",8),_(2,"path",22),a()()}if(o&2){let t=h();p("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),X("aria-label",t._intl.lastPageLabel)}}var io=(()=>{class o{constructor(){this.changes=new B,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,e,i)=>{if(i==0||e==0)return`0 of ${i}`;i=Math.max(i,0);let n=t*e,d=n<i?Math.min(n+e,i):n+e;return`${n+1} \u2013 ${d} of ${i}`}}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=Kt({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var oo=50;var no=new _t("MAT_PAGINATOR_DEFAULT_OPTIONS"),ao=0,mi=(()=>{class o{get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(t||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=t||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(t||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(e=>xt(e,0)),this._updateDisplayedPageSizeOptions()}constructor(t,e,i){if(this._intl=t,this._changeDetectorRef=e,this._pageSizeLabelId=`mat-paginator-page-size-label-${ao++}`,this._isInitialized=!1,this._initializedStream=new Zt(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new ie,this.initialized=this._initializedStream,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),i){let{pageSize:n,pageSizeOptions:d,hidePageSize:f,showFirstLastButtons:y}=i;n!=null&&(this._pageSize=n),d!=null&&(this._pageSizeOptions=d),f!=null&&(this.hidePageSize=f),y!=null&&(this.showFirstLastButtons=y)}this._formFieldAppearance=i?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;let t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;let t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;let t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;let t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let t=this.getNumberOfPages()-1;return this.pageIndex<t&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){let e=this.pageIndex*this.pageSize,i=this.pageIndex;this.pageIndex=Math.floor(e/t)||0,this.pageSize=t,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:oo),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,e)=>t-e),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static{this.\u0275fac=function(e){return new(e||o)(m(io),m(Rt),m(no,8))}}static{this.\u0275cmp=C({type:o,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",xt],length:[2,"length","length",xt],pageSize:[2,"pageSize","pageSize",xt],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",Ft],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",Ft],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",Ft]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[re,P],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,i){e&1&&(r(0,"div",1)(1,"div",2),g(2,Ji,5,4,"div",3),r(3,"div",4)(4,"div",5),s(5),a(),g(6,to,3,5,"button",6),r(7,"button",7),u("click",function(){return i.previousPage()}),vt(),r(8,"svg",8),_(9,"path",9),a()(),te(),r(10,"button",10),u("click",function(){return i.nextPage()}),vt(),r(11,"svg",8),_(12,"path",11),a()(),g(13,eo,3,5,"button",12),a()()()),e&2&&(l(2),I(i.hidePageSize?-1:2),l(3),x(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),l(),I(i.showFirstLastButtons?6:-1),l(),p("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),X("aria-label",i._intl.previousPageLabel),l(3),p("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),X("aria-label",i._intl.nextPageLabel),l(3),I(i.showFirstLastButtons?13:-1))},dependencies:[k,ft,ot,zt,di],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color, var(--mat-app-on-surface));background-color:var(--mat-paginator-container-background-color, var(--mat-app-surface));font-family:var(--mat-paginator-container-text-font, var(--mat-app-body-small-font));line-height:var(--mat-paginator-container-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-paginator-container-text-size, var(--mat-app-body-small-size));font-weight:var(--mat-paginator-container-text-weight, var(--mat-app-body-small-weight));letter-spacing:var(--mat-paginator-container-text-tracking, var(--mat-app-body-small-tracking));--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size, var(--mat-app-body-small-size))}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display);position:absolute;top:50%;left:50%;width:84px;height:48px;background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}"],encapsulation:2,changeDetection:0})}}return o})();var ro=(o,c)=>c.produto.id,so=o=>[o,"BRL","symbol","1.2-2","pt-BR"];function lo(o,c){o&1&&(r(0,"th",23),s(1," Cliente "),a())}function co(o,c){if(o&1&&(r(0,"td",24),s(1),a()),o&2){let t=c.$implicit;l(),x(" ",t.cliente==null?null:t.cliente.nome," ")}}function mo(o,c){o&1&&(r(0,"th",23),s(1," Vendedor "),a())}function po(o,c){if(o&1&&(r(0,"td",24),s(1),a()),o&2){let t=c.$implicit;l(),x(" ",t.vendedor==null?null:t.vendedor.nome," ")}}function uo(o,c){o&1&&(r(0,"th",23),s(1," Valor Total "),a())}function ho(o,c){if(o&1&&(r(0,"td",24),s(1),G(2,"currency"),a()),o&2){let t=c.$implicit;l(),x(" ",ue(2,1,de(7,so,t.valor_total))," ")}}function fo(o,c){o&1&&(r(0,"th",23),s(1," Itens "),a())}function go(o,c){if(o&1&&(r(0,"li"),s(1),a()),o&2){let t=c.$implicit;l(),Y("",t.produto.nome," - ",t.quantidade,"")}}function _o(o,c){if(o&1&&E(0,go,2,2,"li",null,ro),o&2){let t=h().$implicit;D(t.itens)}}function vo(o,c){o&1&&(r(0,"li"),s(1,"Sem itens"),a())}function bo(o,c){if(o&1&&(r(0,"td",24)(1,"ul"),g(2,_o,2,0)(3,vo,2,0,"li"),a()()),o&2){let t=c.$implicit;l(2),I(t.itens&&t.itens.length>0?2:3)}}function xo(o,c){o&1&&(r(0,"th",23),s(1," Data da Venda "),a())}function yo(o,c){if(o&1&&(r(0,"td",24),s(1),G(2,"date"),a()),o&2){let t=c.$implicit;l(),x(" ",pe(2,1,t.data_venda,"dd/MM/yyyy","pt-BR")," ")}}function Co(o,c){o&1&&_(0,"tr",25)}function So(o,c){o&1&&_(0,"tr",26)}var pi=(()=>{class o{httpMethos;authService;router;sales=[];dataSource=new ti(this.sales);displayedColumns=["cliente","vendedor","valor_total","itens","data_venda"];pathUrlSales=j.SALE;searchTerm="";currentPage=0;limit=10;totalResults=0;searchChanged=new B;paginator;constructor(t,e,i){this.httpMethos=t,this.authService=e,this.router=i}ngOnInit(){console.log("Valor inicial de currentPage:",this.currentPage),this.search()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,console.log("Paginator atribu\xEDdo ao dataSource:",this.dataSource.paginator)}get totalPages(){return Math.ceil(this.totalResults/this.limit)}search(){this.searchRegisters(this.searchTerm,0)}searchRegisters(t="",e=0,i=this.limit){let n={expand:["cliente","vendedor","itens.produto"],active:!0,academia:this.authService.get_gym(),limit:i,offset:e};t&&(n.search=t),this.httpMethos.getPaginated(this.pathUrlSales,n).subscribe(d=>{this.totalResults=d.count,this.sales=d.results,this.dataSource.data=this.sales,this.currentPage=e/i,console.log(d)})}nextPage(){let t=Math.ceil(this.totalResults/this.limit)-1;if(this.currentPage<t){let e=(this.currentPage+1)*this.limit;this.searchRegisters(this.searchTerm,e)}}prevPage(){if(this.currentPage>0){let t=(this.currentPage-1)*this.limit;this.searchRegisters(this.searchTerm,t)}}onSearchChange(t){this.searchTerm=t,this.searchRegisters(this.searchTerm,0)}create(){this.router.navigate(["/product/sellPage"]).then()}static \u0275fac=function(e){return new(e||o)(m(L),m(Nt),m($))};static \u0275cmp=C({type:o,selectors:[["app-sales"]],viewQuery:function(e,i){if(e&1&&Et(mi,5),e&2){let n;Dt(n=kt())&&(i.paginator=n.first)}},standalone:!0,features:[P],decls:46,vars:8,consts:[[1,"title"],[1,"subtitle","flex","justify-content-center","flex","mb-4"],[1,"ml-8","mr-8"],[1,"flex","align-items-center","justify-content-start"],["appearance","outline",1,"search","w-30rem"],["matInput","text","placeholder","Procure por produto vendedor ou cliente",3,"ngModelChange","input","ngModel"],[1,"flex","align-items-center","justify-content-between","w-full","mb-4"],[1,"w-10rem"],[1,"align-self-start","mr-2"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","mt-2",2,"color","white",3,"click"],[1,"mat-elevation-z1","bg-black-alpha-80"],["mat-table","",1,"mat-elevation-z8","demo-table",3,"dataSource"],["matColumnDef","cliente"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vendedor"],["matColumnDef","valor_total"],["matColumnDef","itens"],["matColumnDef","data_venda"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"pagination-controls"],[3,"click","disabled"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,i){e&1&&(r(0,"h2",0),s(1,"Vendas"),a(),r(2,"div",1),s(3,"Verifique as vendas realizada e regisstre novas vendas"),a(),r(4,"main",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),s(8,"Buscar registro"),a(),r(9,"input",5),tt("ngModelChange",function(d){return J(i.searchTerm,d)||(i.searchTerm=d),d}),u("input",function(){return i.onSearchChange(i.searchTerm)}),a()(),r(10,"div",6),_(11,"div",7),r(12,"div",8)(13,"button",9),u("click",function(){return i.create()}),r(14,"mat-icon"),s(15,"add"),a(),s(16," Registrar nova venda "),a()()()(),r(17,"div")(18,"div",10)(19,"table",11),W(20,12),g(21,lo,2,0,"th",13)(22,co,2,1,"td",14),Z(),W(23,15),g(24,mo,2,0,"th",13)(25,po,2,1,"td",14),Z(),W(26,16),g(27,uo,2,0,"th",13)(28,ho,3,9,"td",14),Z(),W(29,17),g(30,fo,2,0,"th",13)(31,bo,4,1,"td",14),Z(),W(32,18),g(33,xo,2,0,"th",13)(34,yo,3,5,"td",14),Z(),g(35,Co,1,0,"tr",19)(36,So,1,0,"tr",20),a()(),r(37,"div",21)(38,"button",22),u("click",function(){return i.prevPage()}),r(39,"mat-icon"),s(40,"chevron_left"),a()(),r(41,"span"),s(42),a(),r(43,"button",22),u("click",function(){return i.nextPage()}),r(44,"mat-icon"),s(45,"chevron_right"),a()()()()()),e&2&&(l(9),K("ngModel",i.searchTerm),l(10),p("dataSource",i.dataSource),l(16),p("matHeaderRowDef",i.displayedColumns),l(),p("matRowDefColumns",i.displayedColumns),l(2),p("disabled",i.currentPage===0),l(4),Y("P\xE1gina ",i.currentPage+1," de ",i.totalPages,""),l(),p("disabled",i.currentPage>=i.totalPages-1))},dependencies:[k,z,dt,R,F,at,O,Ue,Ye,Xe,Qe,$e,He,it,ge,We,Ke,Ze,Je,De,H,A],styles:[".title[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;font-size:1.5rem;color:#333}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:16px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:36px;height:36px;margin:0 8px;border-radius:50%;background-color:#e0e0e0;color:#000;border:none;cursor:pointer;display:flex;justify-content:center;align-items:center;box-shadow:0 2px 2px #0003;transition:background-color .3s ease,box-shadow .3s ease}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d6d6d6}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;color:#9e9e9e;cursor:not-allowed;box-shadow:none}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;margin:0 8px;color:#757575}"]})}return o})();var ui=[{path:"productInventory",component:ri},{path:"sellPage",component:oi},{path:"form/:action",component:si},{path:"sales",component:pi}];var Na=(()=>{class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=Tt({type:o});static \u0275inj=Mt({imports:[yt,ve.forChild(ui)]})}return o})();export{Na as ProductModule};
