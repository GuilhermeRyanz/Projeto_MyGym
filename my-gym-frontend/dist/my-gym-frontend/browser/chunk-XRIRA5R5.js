import{a as kt,b as Dt}from"./chunk-VXASFR3Q.js";import{b as gt,d as vt}from"./chunk-35ZIMB5Q.js";import{a as Ct,b as xt,c as bt,d as St,e as Mt,f as wt,g as yt,h as Pt,i as It,j as Et,k as Tt}from"./chunk-OEQ5PFX2.js";import"./chunk-7IZTALVS.js";import"./chunk-D7X432AK.js";import{c as st,d as dt,e as mt,f as pt,g as ut,h as ft}from"./chunk-L2Q2YWF7.js";import{a as ht,b as _t}from"./chunk-J5PROWEA.js";import{a as Ee}from"./chunk-NLT3YVZR.js";import{a as Pe,b as Ie,c as Y,h as ct}from"./chunk-5ZQMS33S.js";import{a as B}from"./chunk-J4WTDL2S.js";import{a as q}from"./chunk-QDRWFLAQ.js";import{b as F,c as it,d as nt,g as V,h as ot,j as R,k as rt}from"./chunk-GELPBASQ.js";import{A as de,B as me,D as Q,G as pe,a as E,c as we,d as Ze,f as T,h as k,k as D,l as oe,o as re,p as ae,q as ye,r as tt,s as le,v as ce,z as se}from"./chunk-VL4B4XMJ.js";import{a as K,c as at,g as lt}from"./chunk-IFDCXV3N.js";import{a as H,b as et}from"./chunk-PR2HLA7M.js";import{W as Ye,Y as Je,Z as Xe,_ as Se,ga as Me,j as Qe,l as W,p as Ke}from"./chunk-DYBUUYLF.js";import{$b as l,Bb as ve,Cb as M,Db as w,E as _e,Eb as r,Fb as o,Gb as C,Hb as J,Ib as X,J as Be,Kb as b,Nb as p,Pb as g,Sb as je,Ub as Ae,V as G,Va as ge,Vb as Ne,Wb as Ge,Wc as We,Ya as c,Yc as xe,Za as f,Zb as te,aa as Oe,ac as y,bc as x,cc as $,cd as He,ec as U,ed as ne,f as j,fc as L,fd as be,gc as z,hc as Ce,ic as P,ja as S,ka as qe,kc as $e,lc as Ue,mc as A,ob as v,oc as ie,pc as Le,qc as ze,ra as h,sa as _,ub as u,zb as I}from"./chunk-KNMBK3NL.js";import"./chunk-JKOY2XUY.js";var Ut=(n,s)=>s.id,Lt=(n,s)=>({"bg-black-alpha-70":n,"text-gray":s});function zt(n,s){if(n&1){let e=b();r(0,"mat-card",6)(1,"section")(2,"div",8)(3,"div",9)(4,"span"),l(5),o(),r(6,"span"),l(7),o()(),r(8,"span"),l(9),A(10,"currency"),o()(),r(11,"span"),l(12),o()(),r(13,"div",8)(14,"div"),l(15," quantidade: "),r(16,"button",10),p("click",function(){let i=h(e).$implicit,a=g();return _(a.decreaseQuantity(i))}),l(17,"-"),o(),r(18,"span"),l(19),o(),r(20,"button",11),p("click",function(){let i=h(e).$implicit,a=g();return _(a.increaseQuantity(i))}),l(21,"+"),o()(),r(22,"button",12),p("click",function(){let i=h(e).$implicit,a=g();return _(a.addToCart(i))}),l(23," Adicionar "),o()()()}if(n&2){let e=s.$implicit,t=g();c(5),y(e.nome||"Produto sem nome "),c(2),y(e.categoria||"Sem categoria"),c(2),y(ie(10,7,e.preco,"BRL")),c(3),x("Estoque: ",t.verification_total(e),""),c(7),x(" ",t.getQuantity(e.id)," "),c(3),u("ngClass",Ue(10,Lt,t.verification_total(e)>0,t.verification_total(e)==0))("disabled",t.verification_total(e)==0)}}function Wt(n,s){n&1&&(r(0,"div",7)(1,"div"),l(2," Nenhum produto encontrado "),o()())}var Ft=(()=>{class n{dialogRef;data;httpMethods;snackBar;products=[];pathUrl=q.PRODUCT;searchTerm="";totalResults=0;currentPage=0;limit=6;offset=0;loading=!1;quantities={};constructor(e,t,i,a){this.dialogRef=e,this.data=t,this.httpMethods=i,this.snackBar=a}unsubscribe$=new j;ngOnInit(){this.loadProducts()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onScroll(){let e=document.getElementById("container-prod");if(!e)return;let t=e.scrollTop,i=e.scrollHeight,a=t+e.clientHeight>=i-10;this.loading||a&&this.products.length<this.totalResults&&this.loadProducts()}onSearch(){this.products=[],this.offset=0,this.totalResults=0,this.quantities={},this.loadProducts()}loadProducts(){if(this.offset>=this.totalResults&&this.offset!==0)return;this.loading=!0;let e={expand:["lotes"],academia:this.data.academia,search:this.searchTerm,limit:this.limit,offset:this.offset};this.httpMethods.getPaginated(this.pathUrl,e).pipe(G(this.unsubscribe$)).subscribe(t=>{this.products.push(...t.results),this.totalResults=t.totalResults,this.products.forEach(i=>{i.id&&!this.quantities[i.id]&&(this.quantities[i.id]=1)}),this.loading=!1,this.offset+=this.limit})}getQuantity(e){return this.quantities[e]||1}decreaseQuantity(e){e.id&&this.quantities[e.id]>1&&this.quantities[e.id]--}verification_total(e){let t=this.data.cartItems.find(i=>i.produto.id===e.id);return t?(e.quantidade_estoque||0)-t.quantidade:e.quantidade_estoque||0}increaseQuantity(e){e.id&&(e.quantidade_estoque===void 0||this.quantities[e.id]<e.quantidade_estoque)&&this.quantities[e.id]++}addToCart(e){if(!e||!e.id||!e.preco){this.snackBar.open("Selecione um produto v\xE1lido.","Fechar",{duration:3e3});return}let t=this.getQuantity(e.id);if(t<=0){this.snackBar.open("Quantidade deve ser maior que zero.","Fechar",{duration:3e3});return}if(e.quantidade_estoque!==void 0&&t>e.quantidade_estoque){this.snackBar.open("Quantidade maior que o estoque dispon\xEDvel.","Fechar",{duration:3e3});return}let i={produto:e,quantidade:t,preco_unitario:e.preco};this.dialogRef.close(i)}console=console;static \u0275fac=function(t){return new(t||n)(f(Pe),f(Ie),f(B),f(Q))};static \u0275cmp=S({type:n,selectors:[["app-product-select-modal"]],standalone:!0,features:[P],decls:12,vars:2,consts:[[1,"grid","align-items-center","p-3"],[1,"col-12","flex","justify-content-start"],[1,"font-bold","text-2xl"],["appearance","outline",1,"col-12"],["matInput","text","placeholder","Buscar produtos...",3,"ngModelChange","input","ngModel"],["id","container-prod",1,"grid","container-prod","p-2","gap-2",2,"max-height","300px","overflow-y","auto",3,"scroll"],["appearance","outlined",1,"col-12"],[1,"col-12","align-items-center","justify-content-center","align-content-center"],[1,"flex","justify-content-between","align-items-center"],[1,"flex-wrap"],["mat-button","",1,"add_button",2,"width","1%",3,"click"],["mat-button","",1,"add_button",3,"click"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","text-white-alpha-90",3,"click","ngClass","disabled"]],template:function(t,i){t&1&&(r(0,"main",0)(1,"div",1)(2,"div",2),l(3,"Adicionar Produto"),o()(),r(4,"mat-form-field",3)(5,"mat-label"),l(6,"Buscar Produto"),o(),r(7,"input",4),z("ngModelChange",function(d){return L(i.searchTerm,d)||(i.searchTerm=d),d}),p("input",function(){return i.onSearch()}),o()(),r(8,"div",5),p("scroll",function(){return i.onScroll()}),M(9,zt,24,13,"mat-card",6,Ut),v(11,Wt,3,0,"div",7),o()()),t&2&&(c(7),U("ngModel",i.searchTerm),c(2),w(i.products),c(2),I(i.products.length===0?11:-1))},dependencies:[de,T,D,re,ne,F,V,R,K,E,We],styles:["[_nghost-%COMP%]{display:block;max-width:100vw;overflow-x:hidden}main[_ngcontent-%COMP%]{display:block;width:100%;max-width:100%;overflow-x:hidden;box-sizing:border-box}mat-card[_ngcontent-%COMP%]{width:100%;max-width:100%;box-sizing:border-box;overflow-x:hidden}#container-prod[_ngcontent-%COMP%]{width:100%;max-width:100%;overflow-x:hidden}"]})}return n})();var Ht=(n,s)=>s.id,Qt=(n,s)=>s.produto.id;function Kt(n,s){if(n&1&&(r(0,"mat-option",11),l(1),o()),n&2){let e=s.$implicit;u("value",e),c(),$(" ",e.aluno.matricula," - ",e.aluno.nome," ")}}function Yt(n,s){if(n&1&&(r(0,"mat-option",11),l(1),o()),n&2){let e=s.$implicit;u("value",e),c(),y(e)}}function Jt(n,s){if(n&1){let e=b();r(0,"div",17)(1,"mat-icon"),l(2,"shopping_cart"),o(),r(3,"p"),l(4,"Nenhum produto adicionado"),o(),r(5,"button",20),p("click",function(){h(e);let i=g();return _(i.openProductModal())}),l(6,"Adicionar Produto"),o()()}}function Xt(n,s){if(n&1){let e=b();r(0,"div",21)(1,"div",24)(2,"span"),l(3),o(),r(4,"span"),l(5),A(6,"currency"),o()(),r(7,"div",25)(8,"div"),l(9),A(10,"currency"),o(),r(11,"button",26),p("click",function(){let i=h(e).$implicit,a=g(2);return _(a.removeItem(i))}),r(12,"mat-icon"),l(13,"delete"),o()()()()}if(n&2){let e=s.$implicit;c(3),y(e.produto.nome||"Produto sem nome"),c(2),$("",e.quantidade," x ",ie(6,4,e.preco_unitario,"BRL"),""),c(4),x("R$ ",ie(10,7,e.quantidade*e.preco_unitario,"BRL"),"")}}function Zt(n,s){if(n&1&&(r(0,"div",23)(1,"mat-icon"),l(2,"arrow_downward"),o(),l(3),o()),n&2){let e=g(2);c(3),x(" Desc: ",e.desc,"% ")}}function ei(n,s){if(n&1&&(r(0,"div"),M(1,Xt,14,10,"div",21,Qt),r(3,"div",22)(4,"div"),l(5),A(6,"currency"),o(),v(7,Zt,4,1,"div",23),o()()),n&2){let e=g();c(),w(e.cartItems),c(4),x("Total: ",ie(6,2,e.getTotal(),"BRL"),""),c(2),I(e.desc>0?7:-1)}}var Rt=(()=>{class n{formBuilder;router;snackBar;dialog;authService;httpMethods;pathUrl=q.SALE;pathUrMembers=q.MEMBERPLAN;cartItems=[];members=[];formGroup;selectedMember=null;desc=0;searchTerm="";formasPagamento=["Dinheiro","Cart\xE3o","Pix"];searchChange=new j;constructor(e,t,i,a,d,m){this.formBuilder=e,this.router=t,this.snackBar=i,this.dialog=a,this.authService=d,this.httpMethods=m,this.formGroup=this.formBuilder.group({client:[null],formaPagamento:["Dinheiro",k.required]})}ngOnInit(){this.search(),this.searchChange.pipe(_e(300),Be()).subscribe(e=>{this.searchMember(e)})}searchMember(e=""){let t={expand:["aluno","plano"],active:!0,academia:this.authService.get_gym()};e&&(t.search=e),this.httpMethods.getPaginated(this.pathUrMembers,t).subscribe({next:i=>{this.members=i.results,this.selectedMember&&!this.members.find(a=>a.id===this.selectedMember.id)&&(this.selectedMember=null,this.desc=0,this.formGroup.get("client")?.setValue(null),this.snackBar.open("Membro selecionado n\xE3o est\xE1 mais dispon\xEDvel.","Fechar",{duration:3e3}))},error:i=>{console.error("Erro ao buscar membros:",i),this.snackBar.open("Erro ao carregar membros.","Fechar",{duration:3e3})}})}search(){this.searchMember(this.searchTerm)}openProductModal(){this.dialog.open(Ft,{width:"600px",data:{academia:this.authService.get_gym(),cartItems:this.cartItems}}).afterClosed().subscribe(t=>{if(t&&t.produto&&t.quantidade){let i=this.cartItems.find(a=>a.produto.id===t.produto.id);i?i.quantidade+=t.quantidade:this.cartItems.push({produto:t.produto,quantidade:t.quantidade,preco_unitario:t.produto.preco||t.preco_unitario}),this.snackBar.open("Produto adicionado ao carrinho!","Fechar",{duration:3e3})}})}removeItem(e){let t=this.cartItems.findIndex(i=>i.produto.id===e.produto.id);t!==-1?(this.cartItems.splice(t,1),this.snackBar.open("Produto removido do carrinho.","Fechar",{duration:3e3})):(console.error("Item n\xE3o encontrado:",e),this.snackBar.open("Erro ao remover item.","Fechar",{duration:3e3}))}getTotal(){let e=this.selectedMember?.plano?.desconto||0;return this.cartItems.reduce((i,a)=>{let d=Number(a.preco_unitario)||0;return i+d*a.quantidade},0)*(1-e/100)}finalizeSale(){if(this.cartItems.length===0){this.snackBar.open("Adicione produtos ao carrinho antes de finalizar a venda.","Fechar",{duration:3e3});return}let e={academia:this.authService.get_gym(),cliente:this.formGroup.get("client")?.value,forma_pagamento:this.formGroup.get("formaPagamento")?.value,itens:this.cartItems.map(t=>({produto:t.produto.id,quantidade:t.quantidade,preco_unitario:Number(t.preco_unitario),valor_total:Number(t.preco_unitario)*t.quantidade}))};this.httpMethods.post(this.pathUrl,e).subscribe({next:()=>{this.snackBar.open("Venda finalizada com sucesso!","Fechar",{duration:3e3}),this.cartItems=[],this.formGroup.reset({formaPagamento:"Dinheiro"}),this.selectedMember=null,this.desc=0,this.router.navigate(["/sales"])},error:t=>{console.error("Erro ao finalizar venda:",t),this.snackBar.open("Erro ao finalizar venda: "+(t.error?.error||"Tente novamente"),"Fechar",{duration:5e3})}})}onSearchChange(e){this.searchTerm=e,this.searchChange.next(e)}displayMemberFn(e){return e&&e.aluno?`${e.aluno.matricula} - ${e.aluno.nome}`:""}onMemberSelected(e){let t=e.option.value;t?(this.selectedMember=t,this.desc=t.plano?.desconto||0,this.formGroup.get("client")?.setValue(t.aluno.id),console.log("Aluno selecionado:",t)):(this.selectedMember=null,this.desc=0,this.formGroup.get("client")?.setValue(null))}get clientControl(){return this.formGroup.get("client")}goBack(){this.router.navigate(["/product/sales"])}static \u0275fac=function(t){return new(t||n)(f(se),f(W),f(Q),f(Y),f(pe),f(B))};static \u0275cmp=S({type:n,selectors:[["app-sell-page"]],standalone:!0,features:[P],decls:35,vars:7,consts:[["auto","matAutocomplete"],[1,"grid","justify-content-center","align-items-start","p-4"],[1,"col-10"],[1,"p-4"],[1,"font-bold","text-2xl","mb-1"],[1,"grid"],[1,"col-12"],[1,"p-d-flex","p-flex-column","p-gap-3",3,"formGroup"],["appearance","outline",1,"w-full"],["matInput","","placeholder","Digite o nome ou matr\xEDcula",3,"input","formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value"],["formControlName","formaPagamento"],["appearance","outlined",1,"p-2"],[1,"flex","justify-content-between","align-items-center","mb-2"],[1,"text-2xl","font-bold"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-10","text-black-alpha-90",3,"click"],[1,"bg-black-alpha-10","flex","flex-column","align-items-center","justify-content-center","p-4"],[1,"mt-2"],["mat-raised-button","","color","primary",1,"add_button",3,"click","disabled"],["mat-button","","color","primary",3,"click"],[1,"flex","justify-content-between","align-items-center","bg-black-alpha-10","p-1"],[1,"flex","justify-content-between","align-content-center"],[1,"flex","align-content-center","align-items-center",2,"color","#4dca4f"],[1,"flex","flex-wrap","align-content-start","justify-content-center"],[1,"flex","justify-content-end","align-items-center"],["mat-icon-button","","color","warn",3,"click"]],template:function(t,i){if(t&1){let a=b();r(0,"main",1)(1,"div",2)(2,"mat-card",3)(3,"div",4),l(4,"Registrar Venda"),o(),r(5,"div",5)(6,"div",6)(7,"form",7)(8,"mat-form-field",8)(9,"mat-label"),l(10,"Cliente"),o(),r(11,"input",9),p("input",function(m){return h(a),_(i.onSearchChange(m.target.value||""))}),o(),r(12,"mat-autocomplete",10,0),p("optionSelected",function(m){return h(a),_(i.onMemberSelected(m))}),M(14,Kt,2,3,"mat-option",11,Ht),o()(),r(16,"mat-form-field",8)(17,"mat-label"),l(18,"Forma de Pagamento"),o(),r(19,"mat-select",12),M(20,Yt,2,2,"mat-option",11,ve),o()()()()(),r(22,"mat-card",13)(23,"div",14)(24,"div",15),l(25,"Produtos"),o(),r(26,"button",16),p("click",function(){return h(a),_(i.openProductModal())}),r(27,"mat-icon"),l(28,"add"),o(),l(29," Adicionar Produto "),o()(),v(30,Jt,7,0,"div",17)(31,ei,8,5,"div"),o(),r(32,"div",18)(33,"button",19),p("click",function(){return h(a),_(i.finalizeSale())}),l(34," Finalizar Venda "),o()()()()()}if(t&2){let a=te(13);c(7),u("formGroup",i.formGroup),c(4),u("formControl",i.clientControl)("matAutocomplete",a),c(),u("displayWith",i.displayMemberFn),c(2),w(i.members),c(6),w(i.formasPagamento),c(10),I(i.cartItems.length===0?30:-1),c(),I(i.cartItems.length>0?31:-1),c(2),u("disabled",i.formGroup.invalid||i.cartItems.length===0)}},dependencies:[we,H,me,ae,T,D,oe,tt,le,ce,V,Ee,Me,E,ne,R,F,K,_t,ht]})}return n})();function ti(n,s){if(n&1&&(r(0,"div",6),C(1,"mat-icon",10),r(2,"span",11),l(3),o()()),n&2){let e=g();c(3),y(e.prod.categoria||"Produto")}}var Bt=(()=>{class n{prod;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-product-item"]],inputs:{prod:"prod"},standalone:!0,features:[P],decls:17,vars:8,consts:[[1,"h-15rem","w-full","flex","align-items-center","justify-content-center","overflow-hidden"],["alt","Imagem do produto",1,"w-full","h-full","object-contain","p-2",3,"src"],[1,"p-2"],[1,"flex","justify-content-between","gap-2"],[1,"font-bold","text-xl","overflow-hidden","text-overflow-ellipsis","white-space-nowrap",2,"max-width","60%"],[1,"text-xl","font-bold","text-right","overflow-hidden","text-overflow-ellipsis","white-space-nowrap",2,"max-width","40%"],[1,"flex","align-items-center","text-sm","gap-1","text-color-secondary","mt-2"],[1,"text-sm","text-color-secondary","overflow-hidden","text-overflow-ellipsis","white-space-nowrap","mt-2"],[1,"text-sm","text-color-secondary","mt-2","line-clamp-2",2,"display","-webkit-box","-webkit-line-clamp","2","-webkit-box-orient","vertical","overflow","hidden"],["appearance","outlined",1,"text-sm","text-color","mt-2","p-1","overflow-hidden","text-overflow-ellipsis","white-space-nowrap"],["fontIcon","local_offer",1,"text-sm","text-color-secondary"],[1,"overflow-hidden","text-overflow-ellipsis","white-space-nowrap"]],template:function(t,i){t&1&&(r(0,"div",0),C(1,"img",1),o(),r(2,"mat-card-content",2)(3,"div",3)(4,"div",4),l(5),o(),r(6,"div",5),l(7),o()(),v(8,ti,4,1,"div",6),r(9,"div",7)(10,"strong"),l(11,"Marca:"),o(),l(12),o(),r(13,"p",8),l(14),o(),r(15,"mat-card",9),l(16),o()()),t&2&&(c(),u("src",i.prod.foto_url,ge),c(4),x(" ",i.prod.nome," "),c(2),x(" R$ ",i.prod.preco," "),c(),I(i.prod.categoria?8:-1),c(4),x(" ",i.prod.marca||"Desconhecida"," "),c(2),x(" ",i.prod.descricao," "),c(2),$(" Em estoque: ",i.prod.quantidade_estoque," unidade",i.prod.quantidade_estoque===1?"":"s"," "))},dependencies:[at,H,K]})}return n})();var Ot=(()=>{class n{fb;httpMethods;dialogRef;data;formGroup;constructor(e,t,i,a){this.fb=e,this.httpMethods=t,this.dialogRef=i,this.data=a,this.formGroup=this.fb.group({produto:[this.data.produtoId,k.required],quantidade:[null,k.required],preco_total:[null,k.required]})}submit(){this.formGroup.valid&&this.httpMethods.post("api/produto/lotes/",this.formGroup.value).subscribe({next:()=>this.dialogRef.close(!0),error:e=>console.error("Erro ao abastecer produto:",e)})}static \u0275fac=function(t){return new(t||n)(f(se),f(B),f(Pe),f(Ie))};static \u0275cmp=S({type:n,selectors:[["app-product-stock-modal"]],standalone:!0,features:[Ce([gt(),Se(),{provide:Je,useValue:vt},{provide:Ye,useValue:"pt-BR"}]),P],decls:19,vars:1,consts:[[1,"flex","flex-column","align-items-center","justify-content-center","p-1"],[1,"text-2xl","font-bold","mb-4"],[1,"col-12","p-3",3,"formGroup"],[1,"field","w-full"],["appearance","fill",1,"w-full"],["matInput","","type","number","formControlName","quantidade"],["matInput","","type","number","formControlName","preco_total"],[1,"flex","justify-content-end","gap-2","mt-2"],["mat-raised-button","","type","button",1,"add_button","bg-red-alpha-70","text-yellow-100",3,"click"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","text-white-alpha-90",3,"click"]],template:function(t,i){t&1&&(r(0,"main",0)(1,"h2",1),l(2,"Abastecer Produto"),o(),r(3,"form",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),l(7,"Quantidade"),o(),C(8,"input",5),o()(),r(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),l(12,"Preco"),o(),C(13,"input",6),o()(),r(14,"div",7)(15,"button",8),p("click",function(){return i.dialogRef.close()}),l(16,"Cancelar"),o(),r(17,"button",9),p("click",function(){return i.submit()}),l(18,"Salvar"),o()()()()),t&2&&(c(3),u("formGroup",i.formGroup))},dependencies:[be,me,ae,T,ye,D,oe,le,ce,ct,ot,V,F,rt,R,Ze,E,ft,Xe],styles:["[_nghost-%COMP%]{overflow-x:hidden}main[_ngcontent-%COMP%]{overflow-x:hidden}form[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;overflow-x:hidden}"]})}return n})();var ii=(n,s)=>s.id;function ni(n,s){return this.products}function oi(n,s){if(n&1){let e=b();r(0,"mat-card",15),C(1,"app-product-item",16),r(2,"div",17)(3,"button",18),p("click",function(){let i=h(e).$implicit,a=g(4);return _(a.restock(i))}),r(4,"mat-icon"),l(5,"add_circle"),o(),l(6," Abastecer "),o(),r(7,"button",18),p("click",function(){let i=h(e).$implicit,a=g(4);return _(a.edit(i))}),r(8,"mat-icon"),l(9,"edit"),o(),l(10," Editar "),o()()()}if(n&2){let e=s.$implicit;c(),u("prod",e)}}function ri(n,s){if(n&1){let e=b();r(0,"section",12)(1,"h4"),l(2),o(),r(3,"div",13)(4,"div",14),p("scroll",function(){h(e);let i=g().$implicit,a=g(2);return _(a.onScroll(i))}),M(5,oi,11,1,"mat-card",15,ii),o()()()}if(n&2){let e=g().$implicit,t=g(2);c(2),y(e),c(),je("id","category-",e,""),c(2),w(t.categoryPanation[e].products)}}function ai(n,s){if(n&1&&v(0,ri,7,3,"section",12),n&2){let e=s.$implicit,t=g(2);I(t.categoryPanation[e].products.length>0?0:-1)}}function li(n,s){if(n&1&&(r(0,"section",11),M(1,ai,1,1,null,null,ve),o()),n&2){let e=g();c(),w(e.categories)}}function ci(n,s){if(n&1){let e=b();r(0,"mat-card",19),C(1,"app-product-item",16),r(2,"div",17)(3,"button",18),p("click",function(){let i=h(e).$implicit,a=g(2);return _(a.restock(i))}),r(4,"mat-icon"),l(5,"add_circle"),o(),l(6," Abastecer "),o(),r(7,"button",18),p("click",function(){let i=h(e).$implicit,a=g(2);return _(a.edit(i))}),r(8,"mat-icon"),l(9,"edit"),o(),l(10," Editar "),o()()()}if(n&2){let e=s.$implicit;c(),u("prod",e)}}function si(n,s){if(n&1){let e=b();r(0,"section",12)(1,"div",14),p("scroll",function(){h(e);let i=g();return _(i.onScroll())}),M(2,ci,11,1,"mat-card",19,ni,!0),o()()}if(n&2){let e=g();c(2),w(e.products)}}var qt=(()=>{class n{httpMethods;router;dialog;authService;pathUrlProduct=q.PRODUCT;products=[];gym_id="";searchTerm="";limit=4;loading=!1;totalResults=0;currentPage=0;categories=["SUPLEMENTO","ACESSORIO","ROUPA","BEBIDA","ALIMENTO","OUTROS"];categoryPanation={};unsubscribe$=new j;searchChange=new j;constructor(e,t,i,a){this.httpMethods=e,this.router=t,this.dialog=i,this.authService=a}ngOnInit(){this.searchChange.pipe(_e(300),G(this.unsubscribe$)).subscribe(()=>{this.doSearch()});for(let e of this.categories)this.categoryPanation[e]={products:[],limit:this.limit,offset:0,totalResults:0,loading:!1},this.getInventory(e)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}restock(e){this.dialog.open(Ot,{data:{produtoId:e.id},width:"100%",maxWidth:"500px",autoFocus:!1}).afterClosed().pipe(G(this.unsubscribe$)).subscribe(i=>{if(i){let a=this.categories.find(d=>this.categoryPanation[d]?.products.some(m=>m.id===e.id));a&&(this.categoryPanation[a].products=[],this.categoryPanation[a].offset=0,this.categoryPanation[a].totalResults=0,this.getInventory(a))}})}onScroll(e=""){let t=document.getElementById(`category-${e}`);if(!t)return;let i=t.scrollLeft,a=t.clientWidth,d=t.scrollWidth,m=i+a>=d-5,O=this.categoryPanation[e];!O||O.loading||m&&O.products.length<O.totalResults&&this.loadMoreProducts(e)}loadMoreProducts(e){let t=this.categoryPanation[e];if(t.offset>=t.totalResults)return;t.loading=!0;let i={expand:["lotes"],academia:this.gym_id,categoria:e,limit:t.limit,offset:t.offset};this.httpMethods.getPaginated(this.pathUrlProduct,i).pipe(G(this.unsubscribe$)).subscribe(a=>{a.results&&a.results.length>0&&(t.products.push(...a.results),t.offset+=t.limit,t.totalResults=a.count),t.loading=!1},a=>{t.loading=!1,console.error("Erro ao carregar mais produtos:",a)})}getInventory(e){let t=this.categoryPanation[e];if(t.loading)return;t.loading=!0;let i={expand:["lotes"],academia:this.gym_id,categoria:e,limit:t.limit,offset:t.offset};this.httpMethods.getPaginated(this.pathUrlProduct,i).pipe(G(this.unsubscribe$)).subscribe(a=>{let d=a.results,m=a.count;t.products.push(...d),t.offset+=t.limit,t.totalResults=m,t.loading=!1},a=>{t.loading=!1})}edit(e){this.router.navigate([`/product/form/${e.id}`]).then()}create(){this.router.navigate(["/product/form/create/"])}onSearchInput(e){this.searchTerm=e,this.searchChange.next(e)}doSearch(){this.loading=!0;let e={expand:["lotes"],academia:this.authService.get_gym(),limit:this.limit,offset:this.currentPage,search:this.searchTerm};this.httpMethods.getPaginated(this.pathUrlProduct,e).pipe(G(this.unsubscribe$)).subscribe({next:t=>{this.products=t.results,this.totalResults=t.count,this.loading=!1},error:t=>{console.error("Erro na busca:",t),this.loading=!1,this.products=[]}})}static \u0275fac=function(t){return new(t||n)(f(B),f(W),f(Y),f(pe))};static \u0275cmp=S({type:n,selectors:[["app-product-inventory"]],standalone:!0,features:[P],decls:21,vars:2,consts:[["inputElement",""],[1,"grid","ml-3","mr-3"],[1,"col-12","justify-content-center","align-items-center","align-content-center"],[1,"flex","font-gray","w-full","justify-content-center"],[1,"col-12","p-4"],[1,"flex","justify-content-between","align-items-center","col-12","align-content-center","align-items-center"],["appearance","outline",1,"search","w-30rem"],["matInput","","type","text","placeholder","Digite o nome do produto",3,"ngModelChange","input","ngModel"],[1,"flex","align-items-center","justify-content-end","mb-5"],[1,"align-self-start","mr-2"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","mt-2",2,"color","white",3,"click"],[1,"flex-wrap","col-12"],[1,"flex","flex-column"],[1,"flex","flex-col","gap-4","mb-6",3,"id"],[1,"flex","overflow-x-auto","gap-4","styled-scroll","p-2",3,"scroll"],[1,"min-w-[19rem]","max-w-[18rem]","flex-shrink-0","overflow-hidden","border","bg-white","flex","flex-col","p-3"],[3,"prod"],[1,"grid","justify-content-between"],["mat-raised-button","","type","button",1,"add_button",3,"click"],[1,"min-w-[20rem]","flex-shrink-0","overflow-hidden","border","bg-white","flex","flex-col","p-3"]],template:function(t,i){if(t&1){let a=b();r(0,"div",1)(1,"div",2)(2,"h2"),l(3,"Inventario"),o(),r(4,"span",3),l(5," Gerencie e abaste\xE7a os produtos oferecidos pelo estabelecimento "),o()(),r(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),l(10,"Buscar Produto"),o(),r(11,"input",7,0),z("ngModelChange",function(m){return h(a),L(i.searchTerm,m)||(i.searchTerm=m),_(m)}),p("input",function(){h(a);let m=te(12);return _(i.onSearchInput(m.value))}),o()(),r(13,"div",8)(14,"div",9)(15,"button",10),p("click",function(){return h(a),_(i.create())}),r(16,"mat-icon"),l(17,"add"),o(),l(18," Adicionar produto "),o()()()(),v(19,li,3,0,"section",11)(20,si,4,0,"section",12),o()()}t&2&&(c(11),U("ngModel",i.searchTerm),c(8),I(i.searchTerm==""?19:20))},dependencies:[de,T,D,re,E,K,H,Bt,V,R,F],styles:[".subtitle[_ngcontent-%COMP%]{text-align:center;color:#909090}"]})}return n})();var di=(n,s)=>s.value;function mi(n,s){n&1&&(r(0,"mat-error"),l(1,"Campo obrigat\xF3rio"),o())}function pi(n,s){n&1&&(r(0,"mat-error"),l(1,"Campo obrigat\xF3rio"),o())}function ui(n,s){n&1&&(r(0,"mat-error"),l(1,"Campo obrigat\xF3rio"),o())}function fi(n,s){if(n&1&&(r(0,"mat-option",9),l(1),o()),n&2){let e=s.$implicit;u("value",e.value),c(),y(e.label)}}function hi(n,s){n&1&&(r(0,"mat-error"),l(1," Campo obrigat\xF3rio "),o())}function _i(n,s){n&1&&(r(0,"mat-error"),l(1,"Campo obrigat\xF3rio"),o())}function gi(n,s){if(n&1&&(r(0,"div",15)(1,"p"),l(2,"Imagem atual:"),o(),C(3,"img",16),o()),n&2){let e=g();c(3),u("src",e.imagePreviewUrl,ge)}}var jt=(()=>{class n{httpMethods;formBuilder;router;route;snackBar;dialog;categorias=[{value:"SUPLEMENTO",label:"Suplemento"},{value:"Acessorio",label:"Acess\xF3rio"},{value:"ROUPA",label:"Roupa"},{value:"BEBIDA",label:"Bebida"},{value:"ALIMENTO",label:"Alimento"},{value:"OUTROS",label:"Outros"}];action="";created=!0;pathUrlProd=q.PRODUCT;formGroup;gymId="";title="Cadastro de produto";selectedImage=null;imagePreviewUrl=null;constructor(e,t,i,a,d,m){this.httpMethods=e,this.formBuilder=t,this.router=i,this.route=a,this.snackBar=d,this.dialog=m,this.formGroup=this.formBuilder.group({id:[],nome:["",k.required],preco:["",k.required],descricao:["",k.required],academia:[""],categoria:["",k.required],created_at:[""],modified_at:[""],marca:["",k.required]})}ngOnInit(){this.getGym(),this.retriveCallBack()}getGym(){this.gymId=localStorage.getItem("academia"),this.gymId&&this.formGroup.patchValue({academia:this.gymId})}onFileSelected(e){let t=e.target.files[0];t&&t.type.startsWith("image/")&&this.resizeImage(t,500,500).then(i=>{this.selectedImage=i})}resizeImage(e,t,i){return new Promise((a,d)=>{let m=new FileReader;m.onload=O=>{let N=new Image;N.src=O.target.result,N.onload=()=>{let ee=document.createElement("canvas"),Gt=ee.getContext("2d"),De=N.width,Fe=N.height,Ve=Math.min(t/De,i/Fe);ee.width=De*Ve,ee.height=Fe*Ve,Gt?.drawImage(N,0,0,ee.width,ee.height),ee.toBlob(Re=>{if(Re){let $t=new File([Re],e.name,{type:e.type,lastModified:Date.now()});a($t)}else d("Erro ao redimensionar imagem.")},e.type)}},m.onerror=O=>d(O),m.readAsDataURL(e)})}retriveCallBack(){this.route.paramMap.subscribe(e=>{this.action=e.get("action"),this.created=!(this.action&&this.action!=="create"),this.created||(this.title="Edi\xE7\xE3o de produto",this.httpMethods.get(this.pathUrlProd+this.action+"/").subscribe(t=>{this.imagePreviewUrl=t.foto,console.log(t),this.formGroup.patchValue({id:t.id,nome:t.nome,preco:t.preco,descricao:t.descricao,categoria:t.categoria,created_at:t.created_at,modified_at:t.modified_at,marca:t.marca,academia:this.gymId})}))})}saveOrUpdate(e){let t=new FormData;Object.keys(e).forEach(a=>{e[a]!==null&&e[a]!==void 0&&t.append(a,e[a])}),this.selectedImage&&t.append("foto",this.selectedImage),(this.created?this.httpMethods.post(`${this.pathUrlProd}`,t):this.httpMethods.noIdPatch(`${this.pathUrlProd}${e.id}/`,t)).subscribe(()=>{let a=this.created?"Produto cadastrado":"Produto atualizado";this.snackBar.open(a,"OK",{duration:3e3,verticalPosition:"top"}),this.router.navigate(["/product/productInventory"])})}static \u0275fac=function(t){return new(t||n)(f(B),f(se),f(W),f(Qe),f(Q),f(Y))};static \u0275cmp=S({type:n,selectors:[["app-product-form"]],standalone:!0,features:[P],decls:36,vars:9,consts:[[1,"container"],[1,"mat-elevation-z2","form",3,"ngSubmit","formGroup"],[1,"form-title"],["appearance","fill"],["matInput","","formControlName","nome","placeholder","Digite o nome do produto"],[4,"ngIf"],["matInput","","formControlName","preco","type","number","placeholder","Digite o pre\xE7o"],["matInput","","formControlName","marca","placeholder","Marca do produto"],["formControlName","categoria"],[3,"value"],["matInput","","formControlName","descricao","placeholder","Descri\xE7\xE3o do produto"],[1,"form-group"],["type","file",3,"change"],["class","image-preview",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"image-preview"],["width","200","alt","Preview do produto",3,"src"]],template:function(t,i){if(t&1&&(r(0,"div",0)(1,"form",1),p("ngSubmit",function(){return i.saveOrUpdate(i.formGroup.value)}),r(2,"h2",2),l(3),o(),r(4,"mat-form-field",3)(5,"mat-label"),l(6,"Nome"),o(),C(7,"input",4),v(8,mi,2,0,"mat-error",5),o(),r(9,"mat-form-field",3)(10,"mat-label"),l(11,"Pre\xE7o"),o(),C(12,"input",6),v(13,pi,2,0,"mat-error",5),o(),r(14,"mat-form-field",3)(15,"mat-label"),l(16,"Marca"),o(),C(17,"input",7),v(18,ui,2,0,"mat-error",5),o(),r(19,"mat-form-field",3)(20,"mat-label"),l(21,"Categoria"),o(),r(22,"mat-select",8),M(23,fi,2,2,"mat-option",9,di),o(),v(25,hi,2,0,"mat-error",5),o(),r(26,"mat-form-field",3)(27,"mat-label"),l(28,"Descri\xE7\xE3o"),o(),C(29,"textarea",10),v(30,_i,2,0,"mat-error",5),o(),r(31,"div",11)(32,"input",12),p("change",function(d){return i.onFileSelected(d)}),o()(),v(33,gi,4,1,"div",13),r(34,"button",14),l(35,"Salvar"),o()()()),t&2){let a,d,m,O,N;c(),u("formGroup",i.formGroup),c(2),y(i.title),c(5),u("ngIf",(a=i.formGroup.get("nome"))==null?null:a.hasError("required")),c(5),u("ngIf",(d=i.formGroup.get("preco"))==null?null:d.hasError("required")),c(5),u("ngIf",(m=i.formGroup.get("marca"))==null?null:m.hasError("required")),c(5),w(i.categorias),c(2),u("ngIf",(O=i.formGroup.get("categoria"))==null?null:O.hasError("required")),c(5),u("ngIf",(N=i.formGroup.get("descricao"))==null?null:N.hasError("required")),c(3),u("ngIf",i.imagePreviewUrl),c(),u("disabled",!i.formGroup.valid)}},dependencies:[me,ae,T,ye,D,oe,le,ce,E,it,V,R,F,xe,Ee,Me],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f4f7fc}.form[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:40px;background-color:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a;font-family:Arial,sans-serif}.form-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;color:#333;margin-bottom:30px}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}mat-label[_ngcontent-%COMP%]{font-weight:600;color:#333}input[_ngcontent-%COMP%]{font-size:16px;padding:10px;border-radius:4px;border:1px solid #ddd}button[_ngcontent-%COMP%]{width:100%;padding:14px;font-size:16px;border:none;border-radius:4px;cursor:pointer}.input-field[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:16px}button[disabled][_ngcontent-%COMP%]{background-color:#b0bec5;cursor:not-allowed}@media (max-width: 600px){.form[_ngcontent-%COMP%]{padding:20px}.form-title[_ngcontent-%COMP%]{font-size:20px}button[_ngcontent-%COMP%]{font-size:14px;padding:12px}}"]})}return n})();var vi=(n,s)=>s.produto.id,Ci=n=>[n,"BRL","symbol","1.2-2","pt-BR"];function xi(n,s){if(n&1){let e=b();r(0,"button",31),p("click",function(){h(e);let i=g();return _(i.clearDateRange())}),r(1,"mat-icon"),l(2,"close"),o()()}}function bi(n,s){n&1&&(r(0,"th",32),l(1," Cliente "),o())}function Si(n,s){if(n&1&&(r(0,"td",33),l(1),o()),n&2){let e=s.$implicit;c(),x(" ",e.cliente==null?null:e.cliente.nome," ")}}function Mi(n,s){n&1&&(r(0,"th",32),l(1," Vendedor "),o())}function wi(n,s){if(n&1&&(r(0,"td",33),l(1),o()),n&2){let e=s.$implicit;c(),x(" ",e.vendedor==null?null:e.vendedor.nome," ")}}function yi(n,s){n&1&&(r(0,"th",32),l(1," Valor Total "),o())}function Pi(n,s){if(n&1&&(r(0,"td",33),l(1),A(2,"currency"),o()),n&2){let e=s.$implicit;c(),x(" ",ze(2,1,$e(7,Ci,e.valor_total))," ")}}function Ii(n,s){n&1&&(r(0,"th",32),l(1," Itens "),o())}function Ei(n,s){if(n&1&&(r(0,"li"),l(1),o()),n&2){let e=s.$implicit;c(),$("",e.produto.nome," - ",e.quantidade,"")}}function Ti(n,s){if(n&1&&M(0,Ei,2,2,"li",null,vi),n&2){let e=g().$implicit;w(e.itens)}}function ki(n,s){n&1&&(r(0,"li"),l(1,"Sem itens"),o())}function Di(n,s){if(n&1&&(r(0,"td",33)(1,"ul"),v(2,Ti,2,0)(3,ki,2,0,"li"),o()()),n&2){let e=s.$implicit;c(2),I(e.itens&&e.itens.length>0?2:3)}}function Fi(n,s){n&1&&(r(0,"th",32),l(1," Data da Venda "),o())}function Vi(n,s){if(n&1&&(r(0,"td",33),l(1),A(2,"date"),o()),n&2){let e=s.$implicit;c(),x(" ",Le(2,1,e.data_venda,"dd/MM/yyyy","pt-BR")," ")}}function Ri(n,s){n&1&&(r(0,"th",32),l(1," actions "),o())}function Bi(n,s){if(n&1){let e=b();r(0,"td",33)(1,"button",34),p("click",function(){let i=h(e).$implicit,a=g();return _(a.disable(i))}),r(2,"mat-icon"),l(3,"delete"),o()()()}}function Oi(n,s){n&1&&C(0,"tr",35)}function qi(n,s){n&1&&C(0,"tr",36)}var At=(()=>{class n{httpMethos;authService;router;dialog;snackBar;sales=[];dataSource=new Tt(this.sales);displayedColumns=["cliente","vendedor","valor_total","itens","data_venda","actions"];pathUrlSales=q.SALE;searchTerm="";currentPage=1;limit=10;totalResults=0;startDate=null;endDate=null;searchChanged=new j;paginator;constructor(e,t,i,a,d){this.httpMethos=e,this.authService=t,this.router=i,this.dialog=a,this.snackBar=d}ngOnInit(){this.search()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}onDateRangeChange(e){e.start&&(this.startDate=e.start),e.end&&(this.endDate=e.end),this.search()}get totalPages(){return Math.max(Math.ceil(this.totalResults/this.limit),1)}search(){this.searchRegisters(this.searchTerm,0)}disable(e){this.dialog.open(Dt,{autoFocus:!0,data:{title:"Excluir Registro",message:"Deseja realmente excluir este registro?",action:"delete"}}).afterClosed().subscribe(d=>{if(d){let m="Registro apagado";this.httpMethos.disable(this.pathUrlSales,e,"cancelar").subscribe(()=>{this.search()}),this.snackBar.open(m,"fechar",{duration:5e3,verticalPosition:"top"})}else return})}searchRegisters(e="",t=0,i=this.limit){let a={expand:["cliente","vendedor","itens.produto"],active:!0,academia:this.authService.get_gym(),limit:i,offset:t};e&&(a.search=e),this.startDate&&(a.data_after=this.startDate.toISOString().split("T")[0]),this.endDate&&(a.data_before=this.endDate.toISOString().split("T")[0]),this.httpMethos.getPaginated(this.pathUrlSales,a).subscribe(d=>{this.totalResults=d.count,this.sales=d.results,this.dataSource.data=this.sales,this.currentPage=t/i})}nextPage(){let e=Math.ceil(this.totalResults/this.limit)-1;if(this.currentPage<e){let t=(this.currentPage+1)*this.limit;this.searchRegisters(this.searchTerm,t)}}clearDateRange(){this.startDate=null,this.endDate=null,this.search()}prevPage(){if(this.currentPage>0){let e=(this.currentPage-1)*this.limit;this.searchRegisters(this.searchTerm,e)}}onSearchChange(e){this.searchTerm=e,this.searchRegisters(this.searchTerm,0)}create(){this.router.navigate(["/product/sellPage"]).then()}static \u0275fac=function(t){return new(t||n)(f(B),f(pe),f(W),f(Y),f(Q))};static \u0275cmp=S({type:n,selectors:[["app-sales"]],viewQuery:function(t,i){if(t&1&&Ae(kt,5),t&2){let a;Ne(a=Ge())&&(i.paginator=a.first)}},standalone:!0,features:[Ce([Se()]),P],decls:59,vars:13,consts:[["picker",""],[1,"title"],[1,"subtitle","flex","justify-content-center","flex","mb-4","font-gray"],[1,"ml-8","mr-8"],[1,"flex","align-items-center","justify-content-start"],["appearance","outline",1,"search","w-30rem"],["matInput","text","placeholder","Procure por produto vendedor ou cliente",3,"ngModelChange","input","ngModel"],["appearance","outline",1,"w-5","ml-2"],[3,"rangePicker"],["matStartDate","","placeholder","Data inicial",3,"ngModelChange","dateChange","ngModel"],["matEndDate","","placeholder","Data final",3,"ngModelChange","dateChange","ngModel"],["mat-icon-button","","matSuffix","","class","clear-button","aria-label","Limpar filtro de data",3,"click",4,"ngIf"],["matSuffix","",3,"for"],[1,"flex","align-items-center","justify-content-between","w-full","mb-4"],[1,"w-10rem"],[1,"align-self-start","mr-2"],["mat-raised-button","","color","primary",1,"add_button","bg-black-alpha-70","mt-2",2,"color","white",3,"click"],[1,"mat-elevation-z1","bg-black-alpha-80"],["mat-table","",1,"mat-elevation-z8","demo-table",3,"dataSource"],["matColumnDef","cliente"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vendedor"],["matColumnDef","valor_total"],["matColumnDef","itens"],["matColumnDef","data_venda"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"pagination-controls"],[3,"click","disabled"],["mat-icon-button","","matSuffix","","aria-label","Limpar filtro de data",1,"clear-button",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){if(t&1){let a=b();r(0,"h2",1),l(1,"Vendas"),o(),r(2,"div",2),l(3,"Verifique as vendas realizadas e registre novas transa\xE7\xF5es"),o(),r(4,"main",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),l(8,"Buscar registro"),o(),r(9,"input",6),z("ngModelChange",function(m){return h(a),L(i.searchTerm,m)||(i.searchTerm=m),_(m)}),p("input",function(){return h(a),_(i.onSearchChange(i.searchTerm))}),o()(),r(10,"mat-form-field",7)(11,"mat-label"),l(12,"Filtro por Data"),o(),r(13,"mat-date-range-input",8)(14,"input",9),z("ngModelChange",function(m){return h(a),L(i.startDate,m)||(i.startDate=m),_(m)}),p("dateChange",function(m){return h(a),_(i.onDateRangeChange({start:m.value,end:i.endDate}))}),o(),r(15,"input",10),z("ngModelChange",function(m){return h(a),L(i.endDate,m)||(i.endDate=m),_(m)}),p("dateChange",function(m){return h(a),_(i.onDateRangeChange({start:i.startDate,end:m.value}))}),o()(),v(16,xi,3,0,"button",11),C(17,"mat-datepicker-toggle",12)(18,"mat-date-range-picker",null,0),o(),r(20,"div",13),C(21,"div",14),r(22,"div",15)(23,"button",16),p("click",function(){return h(a),_(i.create())}),r(24,"mat-icon"),l(25,"add"),o(),l(26," Registrar nova venda "),o()()()(),r(27,"div")(28,"div",17)(29,"table",18),J(30,19),v(31,bi,2,0,"th",20)(32,Si,2,1,"td",21),X(),J(33,22),v(34,Mi,2,0,"th",20)(35,wi,2,1,"td",21),X(),J(36,23),v(37,yi,2,0,"th",20)(38,Pi,3,9,"td",21),X(),J(39,24),v(40,Ii,2,0,"th",20)(41,Di,4,1,"td",21),X(),J(42,25),v(43,Fi,2,0,"th",20)(44,Vi,3,5,"td",21),X(),J(45,26),v(46,Ri,2,0,"th",20)(47,Bi,4,0,"td",21),X(),v(48,Oi,1,0,"tr",27)(49,qi,1,0,"tr",28),o()(),r(50,"div",29)(51,"button",30),p("click",function(){return h(a),_(i.prevPage())}),r(52,"mat-icon"),l(53,"chevron_left"),o()(),r(54,"span"),l(55),o(),r(56,"button",30),p("click",function(){return h(a),_(i.nextPage())}),r(57,"mat-icon"),l(58,"chevron_right"),o()()()()()}if(t&2){let a=te(19);c(9),U("ngModel",i.searchTerm),c(4),u("rangePicker",a),c(),U("ngModel",i.startDate),c(),U("ngModel",i.endDate),c(),u("ngIf",i.startDate||i.endDate),c(),u("for",a),c(12),u("dataSource",i.dataSource),c(19),u("matHeaderRowDef",i.displayedColumns),c(),u("matRowDefColumns",i.displayedColumns),c(2),u("disabled",i.currentPage===0),c(4),$("P\xE1gina ",i.currentPage+1," de ",i.totalPages,""),c(),u("disabled",i.currentPage>=i.totalPages-1)}},dependencies:[V,R,de,T,D,re,E,Ct,St,Mt,wt,xt,bt,ne,He,yt,It,Pt,Et,et,H,F,pt,ut,st,mt,dt,nt,we,lt,xe],styles:[".title[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;font-size:1.5rem;color:#333}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:16px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:36px;height:36px;margin:0 8px;border-radius:50%;background-color:#e0e0e0;color:#000;border:none;cursor:pointer;display:flex;justify-content:center;align-items:center;box-shadow:0 2px 2px #0003;transition:background-color .3s ease,box-shadow .3s ease}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d6d6d6}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;color:#9e9e9e;cursor:not-allowed;box-shadow:none}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;margin:0 8px;color:#757575}.mat-form-field[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]{order:1;margin-right:4px}.mat-form-field[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%]{order:2}"]})}return n})();var Nt=[{path:"productInventory",component:qt},{path:"sellPage",component:Rt},{path:"form/:action",component:jt},{path:"sales",component:At}];var fo=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=qe({type:n});static \u0275inj=Oe({imports:[be,Ke.forChild(Nt)]})}return n})();export{fo as ProductModule};
