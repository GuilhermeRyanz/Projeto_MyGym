<main class="grid align-items-center p-3">
  <div class="col-12 flex justify-content-start">
    <div class="font-bold text-2xl">Adicionar Produto</div>
  </div>
  <mat-form-field appearance="outline" class="col-12" >
    <mat-label>Buscar Produto</mat-label>
    <input matInput="text" [(ngModel)]="searchTerm" (input)="onSearch()" placeholder="Buscar produtos...">
  </mat-form-field>

  <div id="container-prod" class="grid container-prod p-2 gap-2" style="max-height: 300px; overflow-y: auto;" (scroll)="onScroll()">
    @for (product of products; track product.id) {
      <mat-card appearance="outlined" class="col-12">
        <section>
          <div class="flex justify-content-between align-items-center">
            <div class="flex-wrap">
              <span>{{ product.nome || 'Produto sem nome ' }}</span>
              <span>{{ product.categoria || 'Sem categoria' }}</span>
            </div>
              <span>{{ product.preco | currency:'BRL' }}</span>
            </div>
          <span>Estoque: {{ verification_total(product) }}</span>
        </section>
        <div class="flex justify-content-between align-items-center">
          <div>
          quantidade:
            <button mat-button class="add_button" style="width: 1%;" (click)="decreaseQuantity(product)">-</button>
            <span> {{ getQuantity(product.id!) }} </span>
            <button mat-button class="add_button" (click)="increaseQuantity(product)">+</button>
          </div>
          <button mat-raised-button color="primary" class="add_button bg-black-alpha-70 text-white-alpha-90"
                  [ngClass]="{'bg-black-alpha-70': verification_total(product) > 0, 'text-gray': verification_total(product) == 0}"
                  (click)="addToCart(product)"
                  [disabled]="verification_total(product) == 0">
            Adicionar
          </button>
        </div>
      </mat-card>
    }
    @if (products.length === 0) {
      <div class="col-12 align-items-center justify-content-center align-content-center">
        <div>
          Nenhum produto encontrado
        </div>

      </div>
    }
  </div>
</main>
